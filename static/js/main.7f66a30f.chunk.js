(this.webpackJsonpaprwebapp=this.webpackJsonpaprwebapp||[]).push([[0],{1072:function(e,t,a){},1115:function(e,t,a){},1130:function(e,t,a){},1131:function(e,t,a){},1132:function(e,t,a){},1133:function(e,t,a){},1137:function(e,t,a){},115:function(e,t,a){},1181:function(e,t,a){},1182:function(e,t,a){},1183:function(e,t,a){},1184:function(e,t,a){},1185:function(e,t,a){},1186:function(e,t,a){},1187:function(e,t,a){},1189:function(e,t,a){},1190:function(e,t,a){},1191:function(e,t,a){},1192:function(e,t,a){},1199:function(e,t,a){},1200:function(e,t,a){},1201:function(e,t,a){},1202:function(e,t,a){},1203:function(e,t,a){},1204:function(e,t,a){},1223:function(e,t,a){},1224:function(e,t,a){},1225:function(e,t,a){},1226:function(e,t,a){},1227:function(e,t,a){},1229:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),i=a.n(o),l=a(43),c=a(33),s=a(617),u=a(18),d=a(9),p=a(16),m=a.n(p),h=a(40),g=a(109),f=a.n(g),y=f.a.create({baseURL:function(){var e=document.URL.replace("http://","").split(":");return e&&e.length>0?"http://".concat(e[0],":60000/api"):null}()||"http://localhost:60000/api"}),v=function(){return function(){var e=document.URL.replace("http://","").split(":");return e&&e.length>0?"http://".concat(e[0],":5000"):null}()||"http://localhost:5000"},b=f.a.create({baseURL:v()}),E=a(84),C=a.n(E),k=a(37),O=function(e,t){return-1!==t.title.toLowerCase().indexOf(e.toLowerCase())},S=function e(t,a,n){return n(a,t)||t.children&&t.children.length&&!!t.children.find((function(t){return e(t,a,n)}))},D=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O;if(n(a,t)||!t.children)return t;var r=t.children.filter((function(e){return S(e,a,n)})).map((function(t){return e(t,a,n)}));return Object.assign({},t,{children:r})},x=function e(t,a){if(!t)return null;for(var n=0;n<t.length;n++){var r=t[n];if(r.key===a)return{item:r,index:n,parentArr:t};if(r.children){var o=e(r.children,a);if(o)return o}}return null},w=function e(t){for(var a=[],n=0;n<t.length;n++){var r=t[n],o=Object(d.a)({},r),i=(o.parent,o.hierStack,Object(k.a)(o,["parent","hierStack"]));i.children&&(i.children=e(i.children)),a.push(i)}return a},T=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;for(var r=0;r<t.length;r++){var o=t[r];o.hierStack=[].concat(Object(u.a)(a),[r]),o.parent=n,e(o.children,o.hierStack,o)}return t},j="CLICK_MENU",N="DRAG_TOOLITEM_START",P="SELECT_TOOLPANEL_TREE",A="SELECT_HIER_DESIGNER_TREE",I="UPDATE_HIER_DESIGNER_TREE",F="INSERT_HIER_DESIGNER_TREE",L="FILTER_HIER_DESIGNER_TREE",R="FETCH_HIERARCHY",M="FETCH_HIERARCHYCONSO",V="FETCH_AVAILABLEDATA",z="FETCH_HIERARCHYVIEWS",H="FETCH_DIMENSIONS",W="FETCH_HIERARCHYKPI",B="FETCH_IMAGES",G="SAVE_DESIGNER_LAYOUT",_="SAVE_HIER_DESIGN_NODE";function U(e){return{type:j,payload:e}}function K(e){return{type:P,payload:Object(d.a)({},e)}}function q(e){return{type:A,payload:Object(d.a)({},e)}}function J(e){return{type:I,payload:e}}function Y(e){return{type:L,payload:e}}function X(){return{type:F}}function $(e){return{type:_,payload:e}}var Z=function(){return function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[action] fetchHierarchyViews"),e.next=3,b.get("fetchHierarchyViews");case 3:a=e.sent,t({type:z,payload:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Q=function(){return function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[action] fetchImages"),e.next=3,b.get("getfilelist");case 3:a=e.sent,t({type:B,payload:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ee=function(e){return{type:"SELECT_CONTROL",payload:e}},te=function(){return{type:"SELECT_PAGE",payload:null}},ae=function(e){return{type:"UPDATE_DESIGNER_LAYOUT",payload:e}},ne=function(e,t){return{type:"OPEN_LAYOUT",payload:{controls:e,layoutData:t}}},re=function(e,t,a){return function(){var n=Object(h.a)(m.a.mark((function n(r){var o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("[action] saveLayout"),o=null,n.prev=2,n.next=5,b.post("createupdatelayout",{name:t,layoutJson:JSON.stringify(e),numRows:a.rows,numCols:a.columns,pageFilterFields:JSON.stringify(a.pageFilterFields),pageApiData:JSON.stringify(a.pageApiData)});case 5:o=n.sent,n.next=11;break;case 8:return n.prev=8,n.t0=n.catch(2),n.abrupt("return",n.t0);case 11:return r({type:G,payload:{layout:e,name:t,response:o}}),n.abrupt("return",!0);case 13:case"end":return n.stop()}}),n,null,[[2,8]])})));return function(e){return n.apply(this,arguments)}}()},oe=function(e,t){return function(){var a=Object(h.a)(m.a.mark((function a(n){var r;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("[action] saveHierarchyView"),null,r=w(e),a.prev=3,a.next=6,b.post("saveHierarchyView",{hierarchyJson:JSON.stringify(r),nodeSettingsJson:JSON.stringify(t)});case 6:a.sent,a.next=12;break;case 9:return a.prev=9,a.t0=a.catch(3),a.abrupt("return",a.t0);case 12:return n({type:"SAVE_HIERARCHYVIEW",payload:{hierarchyData:e,userSettings:t}}),a.abrupt("return",!0);case 14:case"end":return a.stop()}}),a,null,[[3,9]])})));return function(e){return a.apply(this,arguments)}}()},ie=function(e){return function(){var t=Object(h.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,t.prev=1,t.next=4,b.post("createPdf",Object(d.a)({},e),{responseType:"arraybuffer",headers:{"Content-Type":"application/json",Accept:"application/pdf"}});case 4:n=t.sent,t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(1),console.log("[requestDownloadReport][ERROR]",t.t0),t.abrupt("return",t.t0);case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},le=function(e){return{type:"UPDATE_CONTROL_PROPS",payload:e}},ce=function(e){return{type:"UPDATE_LAYOUT_PROPS",payload:e}},se=function(e){return{type:"DELETE_CONTROL",payload:e}};function ue(e){return{type:"SELECT_DASHBOARD_TREE",payload:{selectedNodeKey:e}}}function de(e,t,a,n,r){return{type:"CLICK_CHART_SLICE",payload:{sliceInfo:e,seriesInfo:t,groupingStackStr:a,datasetId:n,controlId:r}}}function pe(e,t){return{type:"SELECT_CHART_GROUP",payload:{groupVal:e,controlData:t}}}var me,he=function(e){return{type:"CLICK_PAGE_LINK",payload:{controlData:e}}},ge={name:"PRM APR",server:"http://10.48.100.175:5001/api/isae/device",requestTypes:[{name:"GetKpi",description:"For fetching Organization/Site/Plant/PRM Level KPI's"},{name:"GetDeviceList",description:"For querying device details only, without groupings/aggregations"},{name:"GetDeviceCounts",description:"For performing aggregations on Device properties like Vendor/Model"},{name:"GetAlarmTypeCounts",description:"For querying the count of alarms per day"},{name:"GetComments",description:"For getting the comments (text string) of the given alarm type"},{name:"GetAlarmTypeRateFrequencyWithLatestStatus",description:"For showing the alarm type rate of devices (e.g. Communication Error)"},{name:"GetAlarmRateFrequencyWithLatestStatus",description:"For showing the alarm rate of devices (e.g. PV Out of Limits)"},{name:"GetAlarmOccurrenceRatio",description:"For getting the alarm occurrence ratio of a particular alarm during the given Analysis Period"},{name:"GetAlarmTypeOccurrenceRatio",description:"For getting the alarm type occurrence ratio of a particular alarm during the given Analysis Period"},{name:"GetPlantInfo",description:"For getting the plant info like PRM Station, Name, Revision etc."},{name:"GetAchievement",description:"For getting the Achievement data of the Plant for a particular phase"}],requestParams:[{name:"AnalysisPeriod",dataType:"Date Range",enumValues:["Latest value only","Last 1 day","Last 7 days","Last 30 days","Custom Range"],defaultValue:"Last 30 days"}],dimensions:[{name:"Device Properties",dataType:"group",items:[{name:"Device_Id",dataType:"string",aggregations:["count"]},{name:"Device_Tag",dataType:"string",aggregations:["count"]},{name:"Comm_Type",dataType:"string",aggregations:["count"]},{name:"Device_Path",dataType:"string",aggregations:["count"]},{name:"Category",dataType:"string",aggregations:["count"]},{name:"Plant_Hierarchy",dataType:"string",aggregations:["count"]},{name:"Priority",dataType:"enum",enumValues:["Low","Medium","High","High+"],aggregations:["count"]},{name:"Vendor Model Info",dataType:"group",aggregations:[],items:[{name:"Vendor",dataType:"string",aggregations:["count"],items:[{name:"Model",dataType:"string",aggregations:["count"],items:[{name:"Revision",dataType:"string",aggregations:["count"]}]}]}]}]},{name:"Device KPI's",dataType:"group",items:[{name:"PRM Device Status",dataType:"string",aggregations:["count"]},{name:"Rate (%)",dataType:"string",aggregations:["count"]},{name:"Frequency",dataType:"string",aggregations:["count"]},{name:"LatestStatus",dataType:"string",aggregations:["count"]},{name:"Status",dataType:"string",aggregations:["count"]}]},{name:"Device Summaries",dataType:"group",items:[{name:"Device Count",dataType:"number",aggregations:[]}]},{name:"Alarm Info",dataType:"group",items:[{name:"Alarm Type",dataType:"string",aggregations:["count"]},{name:"Alarm_Name",dataType:"string",aggregations:["count"]},{name:"Alarm",dataType:"string",aggregations:["count"]}]},{name:"Alarm Summaries",dataType:"group",items:[{name:"Alarm Count",dataType:"number",aggregations:[]},{name:"Alarm Occurrence Ratio",dataType:"number",aggregations:[]}]},{name:"Plant Info",dataType:"group",items:[{name:"Hierarchy",dataType:"group",aggregations:[],items:[{name:"Organization",dataType:"string",aggregations:["count"],items:[{name:"Site",dataType:"string",aggregations:["count"],items:[{name:"Plant",dataType:"string",aggregations:["count"],items:[{name:"PRM Id",dataType:"string",aggregations:["count"]}]}]}]}]}]},{name:"Plant KPI",dataType:"group",items:[{name:"Phase",dataType:"string",aggregations:["count"]}]},{name:"Timestamp",dataType:"group",items:[{name:"Year",dataType:"string"},{name:"Month",dataType:"string"},{name:"Day",dataType:"datetime"}]}]},fe={activeMenu:"mapView",tabIndex:0,draggingToolItem:null,toolPanelTreeSelected:null,masterHierarchy:null,masterAvailableData:null,masterLayouts:[],masterHierarchyViews:null,masterMetadata:ge,masterImages:[]},ye={mapView:0,analysisView:1,home:2,downloadCenter:3,formsDesigner:4,hierarchyDesigner:5,affiliate:6,settings:7},ve=function(e,t){var a=e.findIndex((function(e){return e.name===t.name}));a<0?e.push(t):e.splice(a,1,t)},be=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},Ee=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)},Ce=function(e){var t=new Date(e);return function(e){return e instanceof Date&&!isNaN(e)}(t)?new Date(t.getFullYear(),t.getMonth()):null},ke={toolPanelTreeSelected:null,resizingControlId:null,layout:(me=ge,me?[{i:"ctrl-section0-"+be(),x:0,y:0,w:12,h:1,ctrlType:"section",data:{title:"Default Section",level:1}}]:[]),layoutData:{columns:12,rows:20,pageFilterFields:[],pageApiData:"https://0kwuefbg37.execute-api.ap-south-1.amazonaws.com/Initial/execsummary"},dashLayout:[{i:"ctrl-section0",x:0,y:0,w:12,h:2,ctrlType:"section",data:{title:"Plant Overall Status",level:1}},{i:"ctrl-pie0",x:0,y:2,w:4,h:8,ctrlType:"pie",data:{}},{i:"ctrl-barchart0",x:4,y:2,w:4,h:8,ctrlType:"barchart",data:{}},{i:"ctrl-combo0",x:8,y:2,w:4,h:2,ctrlType:"combo",data:{}},{i:"ctrl-combo1",x:8,y:4,w:4,h:2,ctrlType:"combo",data:{}}],dashLayoutData:{},metadata:{name:"Device Metadata",dataKey:"DeviceId",RequestParams:[{name:"AnalysisPeriod",dataTypes:["Date Range"],enumValues:["Latest value only","Last 1 day","Last 7 days","Last 30 days","Custom Range"]}],Dimensions:[{name:"Device Info",dataTypes:["group"],items:[{name:"Device ID",dataTypes:["string"]},{name:"Device Tag",dataTypes:["string"]},{name:"Priority",dataTypes:["Enum"],enumValues:["Low","Medium","High","High+"],measures:[{name:"Count",expression:"count"}]},{name:"Category",dataTypes:["string"]},{name:"FullPath",dataTypes:["string"]}]},{name:"VendorModel Info",dataTypes:["group"],items:[{name:"Vendor",dataTypes:["string","group"],items:[{name:"Model",dataTypes:["string"],items:[{name:"Revision",dataTypes:["string"]}]}]}]},{name:"Device Status",dataTypes:["group"],items:[{name:"PRM Device Status",enumValues:["Abnormal","Warning","Communication Error","Uncertain","Normal"],dataTypes:["Enum"]},{name:"NE107 Device Status",enumValues:["Failure","Check Function","Out of Specification","Maintenance Required","Communication Error","Unknown,Normal"],dataTypes:["Enum"]}]},{name:"Device Status Timing Breakdown",dataTypes:["group"],items:[{name:"Good%",dataTypes:["Percent"]},{name:"Bad%",dataTypes:["Percent"]},{name:"Fair%",dataTypes:["Percent"]},{name:"Uncertain%",dataTypes:["Percent"]}]},{name:"Device Availability",value:"Device Availability",items:[{name:"ODE",items:[{name:"Status",dataTypes:["Enum"],enumValues:[1,2,3,4,5]},{name:"Value",dataTypes:["Number"]}]},{name:"TA",items:[{name:"Status",dataTypes:["Enum"],enumValues:[1,2,3,4,5]},{name:"Value",dataTypes:["Number"]}]},{name:"PA",items:[{name:"Status",dataTypes:["Enum"],enumValues:[1,2,3,4,5]},{name:"Value",dataTypes:["Number"]}]}]},{name:"Alarm Info",value:"Alarm Info",items:[{name:"Alarm Frequency",dataTypes:["Number"]},{name:"AE Occurring",dataTypes:["Boolean"]},{name:"Raw Alarms",dataTypes:["Annotation"]}]},{name:"Path",value:"Path",items:[{name:"Plant",dataTypes:["string","group"],items:[{name:"Site",dataTypes:["string","group"],items:[{name:"Area",dataTypes:["string","group"],items:[{name:"Unit",dataTypes:["string"]}]}]}]}]}]},pageSelected:!1},Oe={section:{title:"New Section",level:1},richtext:{label:"Rich Text:",apiFieldName:null,placeholder:"Enter value...",richTextData:null,dataProps:{datasetId:1,requestType:null,filterName:null,filterValue:null}},combo:{placeholder:"Please select...",options:[{key:"apple",text:"Apple",value:"apple"},{key:"banana",text:"Banana",value:"banana"},{key:"carrot",text:"Carrot",value:"carrot"},{key:"dolphin",text:"Dolphin",value:"dolphin"},{key:"elephant",text:"Elephant",value:"elephant"},{key:"fish",text:"Fish",value:"fish"},{key:"grapefruit",text:"Grapefruit",value:"grapefruit"},{key:"hummingbird",text:"Humming Bird",value:"hummingbird"},{key:"iguana",text:"Iguana",value:"iguana"}],label:"Combobox:"},textbox:{placeholder:"Enter value...",label:"Textbox:"},table:{label:"Table:",showFilters:!0,showPaginator:!0,showFooter:!0,dataProps:{datasetId:"0",requestType:"GetDeviceList",specifyColumns:!0,columns:[],categories:null,seriesName:null,filterName:null,filterValue:null}},pie:{label:"Pie:",dataProps:{datasetId:"0",requestType:"GetDeviceCounts",categories:""}},barchart:{label:"Bar:",stacked:!1,dataProps:{datasetId:"0",requestType:"GetDeviceCounts",categories:"",seriesName:""}},label:{label:"New Label",apiFieldName:null,icon:"lightbulb",backgroundColor:"khaki",color:"black",fontSize:"14",alignment:"",linkedPage:null},gauge:{label:"New Gauge:",dataProps:{datasetId:"2",requestType:"GetKpi",groupings:[],filtersList:{}}},pagebreak:{},imageMap:{label:"Image Map:",dataProps:{datasetId:1,requestType:"GetKpi",groupings:[]},imageProps:{image:"",map:{name:"",areas:[]}}},line:{label:"Line Chart",unit:null,dataProps:{datasetId:2,requestType:"GetAlarmOccurrenceRatio",categories:null,seriesName:null,filterName:null,filterValue:null}},frame:{url:"https://www.youtube.com/embed/cde9qNtaoog"}},Se=function(e,t){if(e.ctrlType){e.data||(e.data=Oe[e.ctrlType]);var a=function(){var a="ctrl-"+e.ctrlType+"-"+be();return t.find((function(e){return e.i===a}))?"continue":(e.i=a,"break")};e:for(;;){switch(a()){case"continue":continue;case"break":break e}}}},De=function(e,t){if(!e||!t)return e;t.forEach((function(t){var a=e.findIndex((function(e){return e.i===t.i}));-1===a?(Se(t,e),e.push(t)):(t.data||Se(t,e),e[a]=t)}))},xe=function(e,t){var a=[];t.forEach((function(t){t.selected?t.i!==e&&a.push(Object(d.a)({},t,{selected:!1})):t.i===e&&a.push(Object(d.a)({},t,{selected:!0}))})),a.forEach((function(e){var a=t.findIndex((function(t){return t.i===e.i}));t.splice(a,1),t.push(e)}))},we=function(e){var t=[];e.forEach((function(e){e.selected&&t.push(Object(d.a)({},e,{selected:!1}))})),t.forEach((function(t){var a=e.findIndex((function(e){return e.i===t.i}));e.splice(a,1),e.push(t)}))},Te=function(e,t){var a=t.findIndex((function(t){return t.i===e.i}));if(!(a<0)){var n=Object(d.a)({},t[a],{data:e.data});t.splice(a,1),t.push(n)}},je=function(e,t){var a=e.image,n=e.newMap,r=e.updatedControl,o=t.findIndex((function(e){return e.i===r.i}));if(!(o<0)){var i=Object(d.a)({},t[o],{data:r.data});i.data.imageProps={image:a,map:n},t.splice(o,1),t.push(i)}},Ne=function(e){return Object(d.a)({},e,{rows:parseInt(e.rows)})},Pe=function(e,t){var a=t.findIndex((function(t){return t.i===e.i}));a<0||t.splice(a,1)},Ae={hierarchyMaster:null,hierarchyTree:[],selectedNode:null,userSettings:[]},Ie=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;for(var r=0;r<t.length;r++){var o=t[r];o.hierStack=[].concat(Object(u.a)(a),[r]),o.parent=n,e(o.children,o.hierStack,o)}return t},Fe=function(e){if(e&&e.hierarchyTree){e.hierarchyTree=Object(u.a)(e.hierarchyTree);var t={key:"hier-"+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),title:"new page",nodeType:"page",category:null,children:[]};if(e.selectedNode&&e.selectedNode.key){var a=x(e.hierarchyTree,e.selectedNode.key);if(a){if(a.item.children.length>0){var n=a.item.children.length;t.hierStack=a.item.children[0].hierStack,t.hierStack[t.hierStack.length-1]=n}else a.item.children=[],t.hierStack=[].concat(Object(u.a)(a.item.hierStack),[0]);t.parent=a.item,a.item.children.push(t)}}else t.parent=null,t.hierStack=[e.hierarchyTree.length],e.hierarchyTree.push(t);return t}},Le=function(e,t){var a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O;return e.reduce((function(e,n){return e.concat(D(n,t,a))}),[])}(t.hierarchyTree,e);console.log("handleFilter",e,a),t.hierarchyTree=Object(u.a)(a)},Re=function(e,t){e.userSettings=e.userSettings||[];var a=e.userSettings.findIndex((function(e){return e.key===t.key}));a>=0&&e.userSettings.splice(a,1),e.userSettings.push(Object(d.a)({},t))},Me=[{key:"angular",text:"Angular",value:"angular"},{key:"css",text:"CSS",value:"css"},{key:"design",text:"Graphic Design",value:"design"},{key:"ember",text:"Ember",value:"ember"},{key:"html",text:"HTML",value:"html"},{key:"ia",text:"Information Architecture",value:"ia"},{key:"javascript",text:"Javascript",value:"javascript"},{key:"mech",text:"Mechanical Engineering",value:"mech"},{key:"meteor",text:"Meteor",value:"meteor"},{key:"node",text:"NodeJS",value:"node"},{key:"plumbing",text:"Plumbing",value:"plumbing"},{key:"python",text:"Python",value:"python"},{key:"rails",text:"Rails",value:"rails"},{key:"react",text:"React",value:"react"},{key:"repair",text:"Kitchen Repair",value:"repair"},{key:"ruby",text:"Ruby",value:"ruby"},{key:"ui",text:"UI Design",value:"ui"},{key:"ux",text:"User Experience",value:"ux"},{key:"test1",text:"A quick brown fox jumps over the lazy dog",value:"test1"},{key:"test2",text:"ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!@#$%^&*()_+",value:"test2"},{key:"test3",text:"\u6625\u7720\u4e0d\u89c9\u6653\uff0c\u5904\u5904\u95fb\u557c\u9e1f\u3002\u591c\u6765\u98ce\u96e8\u58f0\uff0c\u82b1\u843d\u77e5\u591a\u5c11\u3002",value:"test3"}],Ve=function(e){var t=0;return e.forEach((function(e){var a=e.y+e.h-1;a>t&&(t=a)})),t},ze={layout:function(){var e=[],t=0,a=function(e,t){var a=t,n=[{i:"ctrl-section".concat(e),x:0,y:a+0,w:12,h:1,ctrlType:"section",data:{title:"Scenario1: Table, own row, no Page break after last control",level:1}},{i:"ctrl-gauge".concat(e),x:0,y:a+1,w:3,h:4,ctrlType:"dcbar",data:{label:"Gauge:",percent:e/100}},{i:"ctrl-pie".concat(e),x:6,y:a+1,w:3,h:4,ctrlType:"pie",data:{label:"Pie:"}},{i:"ctrl-imageMap".concat(e),x:3,y:a+1,w:3,h:4,ctrlType:"imageMap",data:{label:"ImageMap:"}},{i:"ctrl-combo".concat(e),x:9,y:a+3,w:3,h:1,ctrlType:"combo",data:{placeholder:"Please select...",options:Me,label:"Courses:"}},{i:"ctrl-label".concat(e),x:9,y:a+1,w:3,h:1,ctrlType:"label",data:{label:e%2===0?"I am a label":"The quick brown fox jumps over the lazy dog. Honesty is the best policy. Time is gold. The early birdy catches the worm.",color:"blue",backgroundColor:"khaki",fontSize:"18",icon:"lightbulb"}},{i:"ctrl-textbox".concat(e),x:9,y:a+4,w:3,h:1,ctrlType:"textbox",data:{placeholder:"Input Remarks...",label:"Remarks:"}},{i:"ctrl-table0",x:0,y:a+5,w:12,h:2,ctrlType:"table",data:{label:"Table:"}}];return{endIndex:Ve(n),data:n}}(0,t);return e=[].concat(Object(u.a)(e),Object(u.a)(a.data)),t=a.endIndex+1,e}(),layoutData:{columns:12,rows:200}},He=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var a=[];for(var n in t)if(n!==e){var r=t[n],o=Object.keys(r),i=o.reduce((function(e,t){return e.length<t.length?t:e}),""),l=r[i];if(l){var c=l.sliceInfo;for(var s in c.origObj)a.push({Name:s,Value:c.origObj[s]});var u=l.seriesInfo;if(u)for(var d in u)a.push({Name:d,Value:u[d]})}}return a},We=function(e,t,a){var n=[];if(!a)return n;var r=JSON.stringify(a);for(var o in t)if(o===e){var i=t[o];for(var l in i)if(!(l.length>=r.length)){var c=i[l];if(c){var s=c.sliceInfo;for(var u in s.origObj)n.push({Name:u,Value:s.origObj[u]});var d=c.seriesInfo;if(d)for(var p in d)n.push({Name:p,Value:d[p]})}}}return n},Be=function(e){if(e.filterName&&e.filterValue&&Array.isArray(e.parameters)&&e.parameters.push({name:e.filterName,value:e.filterValue}),delete e.filterName,delete e.filterValue,e.filtersList){for(var t in e.filtersList){var a=e.filtersList[t];!a.filterName||a.filterValue,e.parameters.push({name:a.filterName,value:a.filterValue})}delete e.filtersList}},Ge=function(){var e=Object(h.a)(m.a.mark((function e(t,a,n,r,o,i,l){var c,s,p,h;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("[DEBUG] fetchData ReportControl",t.i),t.data.dataProps.requestType){e.next=3;break}return e.abrupt("return");case 3:return a(!0),c=Object(d.a)({},t.data.dataProps),o?c.Grouping=Object(u.a)(o):t.data.dataProps.categories?c.Grouping=[t.data.dataProps.categories]:Array.isArray(c.groupings)?(c.Grouping=c.groupings,delete c.groupings):c.Grouping=[],t.data.dataProps.seriesName&&c.Grouping.push(t.data.dataProps.seriesName),Array.isArray(c.parameters)||(c.parameters=[]),Be(c),r&&(s=He(t.i,r),p=We(t.i,r,o||null),c.parameters=c.parameters.concat(s),c.parameters=c.parameters.concat(p)),Array.isArray(l)&&(c.parameters=c.parameters.concat(l)),e.next=13,f.a.post(i.server,c).catch((function(e){console.error("Error fetching control data",t.i,e)}));case 13:(h=e.sent)&&h.data&&n(h.data),a(!1);case 16:case"end":return e.stop()}}),e)})));return function(t,a,n,r,o,i,l){return e.apply(this,arguments)}}(),_e={selectedNodeKey:null,chartClickFilters:{},chartTempGroupings:{}},Ue=function(e,t){var a=t.sliceInfo,n=t.seriesInfo,r=t.groupingStackStr,o=t.datasetId,i=t.controlId;e[o]||(e[o]={});var l=e[o],c=l[i];c||(c={},l[i]=c);var s=Object(d.a)({},a);c[r]={sliceInfo:s,seriesInfo:n},e[o]=Object(d.a)({},l)},Ke=function(e,t){var a=t.controlData,n=t.groupVal;e[a.i]=n},qe=function(e,t){var a=e.controlData,n=e.groupVal,r=JSON.stringify(n);if(!a||!a.i||!a.data.dataProps)return null;var o=t[a.data.dataProps.datasetId];if(!o)return null;var i=o[a.i];if(!i)return null;var l=Object.keys(i).filter((function(e){return e.length>r.length}));return l.length>0?(l.forEach((function(e){delete i[e]})),t[a.data.dataProps.datasetId]=Object(d.a)({},o),t):null},Je={hierarchyConso:null,dimensions:null,hierarchyKpi:null},Ye=function e(t){return t?t.map((function(t){var a=t.fullPath,n=t.nodeName,r=t.children,o=Object(k.a)(t,["fullPath","nodeName","children"]);return Object(d.a)({key:a,value:a,title:n,children:e(r)},o)})):[]},Xe=function(e){return e?e.map((function(e){return{key:e.columnName,text:e.columnName,value:e.columnName,datatype:e.dataType}})):[]},$e=Object(l.c)({mainApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch([j,N,P,R,V,G,z,B].includes(t.type)&&console.log("[DEBUG] reducer_mainApp",t,e),t.type){case j:return Object(d.a)({},e,{activeMenu:t.payload,tabIndex:ye[t.payload]});case N:return Object(d.a)({},e,{draggingToolItem:t.payload});case R:return Object(d.a)({},e,{masterHierarchy:t.payload.data});case V:return Object(d.a)({},e,{masterAvailableData:t.payload.data});case"FETCH_SAVEDLAYOUTS":return Object(d.a)({},e,{masterLayouts:t.payload.data});case G:var a=t.payload.response.data,n=Object(u.a)(e.masterLayouts);return ve(n,a),Object(d.a)({},e,{masterLayouts:n});case z:return Object(d.a)({},e,{masterHierarchyViews:t.payload.data});case B:return Object(d.a)({},e,{masterImages:t.payload.data})}return e},designer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(d.a)({},e,{toolPanelTreeSelected:t.payload});case"SELECT_CONTROL":var a=Object(d.a)({},e);return a.pageSelected=!1,xe(t.payload,a.layout),a;case"SELECT_PAGE":var n=Object(d.a)({},e);return n.pageSelected=!0,we(n.layout),n;case"UPDATE_DESIGNER_LAYOUT":var r=t.payload,o=Object(d.a)({},e);return o.layout=Object(u.a)(e.layout),De(o.layout,r),o;case"UPDATE_CONTROL_PROPS":var i=Object(d.a)({},e);return Te(t.payload,i.layout),i;case"APPLY_IMAGEMAP_PROPS":var l=Object(d.a)({},e);return je(t.payload,l.layout),l;case"UPDATE_LAYOUT_PROPS":var c=Object(d.a)({},e);return c.layoutData=Ne(t.payload),c;case"DELETE_CONTROL":var s=Object(d.a)({},e);return s.layout=Object(u.a)(e.layout),Pe(t.payload,s.layout),s;case G:break;case"OPEN_LAYOUT":return Object(d.a)({},e,{layout:Object(u.a)(t.payload.controls),layoutData:t.payload.layoutData})}return e},hierarchyDesigner:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch([R,I,A,F,L,_].includes(t.type)&&console.log("[DEBUG] reducer_hierarchyDesigner",t,e),t.type){case R:return Object(d.a)({},e,{hierarchyMaster:t.payload.data});case I:var a=Ie(t.payload);return Object(d.a)({},e,{hierarchyTree:a});case A:return Object(d.a)({},e,{selectedNode:t.payload});case F:var n=Object(d.a)({},e),r=Fe(n);return n.selectedNode=r,n;case L:var o=Object(d.a)({},e),i=t.payload;return Le(i,o),o;case _:var l=Object(d.a)({},e);return l.userSettings=Object(u.a)(e.userSettings),Re(l,t.payload),l;case z:var c=Object(d.a)({},e);return t.payload.data&&t.payload.data.length>0&&(c.hierarchyTree=Ie(JSON.parse(t.payload.data[0].hierarchyJson)),c.userSettings=JSON.parse(t.payload.data[0].nodeSettingsJson)),c}return e},reportApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze;arguments.length>1&&arguments[1];return e},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_DASHBOARD_TREE":return Object(d.a)({},e,{selectedNodeKey:t.payload.selectedNodeKey,chartClickFilters:{},chartTempGroupings:{}});case z:var a=t.payload.data&&t.payload.data[0];if(!a)return e;var n=JSON.parse(a.hierarchyJson),r=n&&n[0];return Object(d.a)({},e,{selectedNodeKey:r.key});case"CLICK_CHART_SLICE":var o=Object(d.a)({},e.chartClickFilters);return Ue(o,t.payload),Object(d.a)({},e,{chartClickFilters:o});case"SELECT_CHART_GROUP":var i=qe(t.payload,Object(d.a)({},e.chartClickFilters)),l=Object(d.a)({},e.chartTempGroupings);return Ke(l,t.payload),Object(d.a)({},e,{chartTempGroupings:l,chartClickFilters:i||e.chartClickFilters});case"CLICK_PAGE_LINK":var c=t.payload&&t.payload.controlData&&t.payload.controlData.data&&t.payload.controlData.data.linkedPage;if(c)return Object(d.a)({},e,{selectedNodeKey:c,chartClickFilters:{},chartTempGroupings:{}})}return e},dataDesigner:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch([M,H,W].includes(t.type)&&console.log("[DEBUG] reducer_datadesigner",t,e),t.type){case M:return Object(d.a)({},e,{hierarchyConso:Ye(t.payload.data)});case H:return Object(d.a)({},e,{dimensions:Xe(t.payload.data)});case W:return Object(d.a)({},e,{hierarchyKpi:t.payload.data})}return e}}),Ze=a(27),Qe=a(28),et=a(31),tt=a(29),at=a(30),nt=a(47),rt=a(1258),ot=a(658),it=a(1260),lt=function(e){function t(e){var a;return Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).handleMenuClick=function(e){a.props.menuClickDispatcher(e),a.handleSidebarToggle()},a.handleSidebarHide=a.handleSidebarHide.bind(Object(nt.a)(a)),a.handleSidebarToggle=a.handleSidebarToggle.bind(Object(nt.a)(a)),a.state={burgerPushed:!1},a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"handleSidebarHide",value:function(){this.state.burgerPushed&&this.setState({burgerPushed:!1})}},{key:"handleSidebarToggle",value:function(){this.setState({burgerPushed:!this.state.burgerPushed})}},{key:"render",value:function(){return r.a.createElement(rt.a.Pushable,null,r.a.createElement(rt.a,{as:ot.a,animation:"overlay",inverted:!0,vertical:!0,visible:this.state.burgerPushed,width:"thin",direction:"right",icon:"labeled",size:"mini"},st(this.handleMenuClick,this.props.activeItem,!1)),r.a.createElement(rt.a.Pusher,{dimmed:this.state.burgerPushed,style:{height:"100vh"},onClick:this.handleSidebarHide},r.a.createElement("div",{className:"ui menu inverted fixed top"},r.a.createElement("div",{className:"header item"}),r.a.createElement("a",{className:"item right",onClick:this.handleSidebarToggle},r.a.createElement("i",{className:"icon sidebar"}))),this.props.children))}}]),t}(n.Component),ct=function(e){return r.a.createElement("div",{className:"ui menu inverted fixed top",style:{backgroundImage:"linear-gradient(#454545, black)"}},r.a.createElement("div",{className:"header item"}),st(e.menuClickDispatcher,e.activeItem,!0))},st=function(e,t,a){return dt.map((function(n){var o="item";return a&&"right"===n.alignment&&(o+=" right"),t==n.name&&(o+=" active"),r.a.createElement("a",{key:"".concat(n.name),className:o,onClick:function(t){return function(e,t){t(e)}(n.name,e)}},r.a.createElement("i",{className:"icon ".concat(n.icon)}),n.title)}))},ut=function(e){return r.a.createElement("div",null,e)},dt=[{name:"mapView",title:"Map View",icon:"map marker alternate",alignment:""},{name:"analysisView",title:"Analysis",icon:"list alternate",alignment:""},{name:"home",title:"Plant Manager View",icon:"home",alignment:""},{name:"downloadCenter",title:"Download Center",icon:"cloud donwload",alignment:""},{name:"formsDesigner",title:"Page Designer",icon:"edit",alignment:""},{name:"hierarchyDesigner",title:"Hierarchy Designer",icon:"list",alignment:""},{name:"affiliate",title:"Affiliate Input",icon:"users",alignment:""},{name:"settings",title:"Settings",icon:"cog",alignment:"right"}];var pt=Object(c.b)((function(e){return{activeMenu:e.mainApp.activeMenu}}),(function(e){return Object(l.b)({menuClicked:U},e)}))((function(e){var t=e.activeMenu;return r.a.createElement("div",null,r.a.createElement(it.a,it.a.onlyMobile,r.a.createElement(lt,{menuClickDispatcher:e.menuClicked,activeItem:t},ut(e.children))),r.a.createElement(it.a,{minWidth:it.a.onlyTablet.minWidth},r.a.createElement(ct,{menuClickDispatcher:e.menuClicked,activeItem:t}),ut(e.children)))})),mt=(a(488),a(796),a(324)),ht=(a(489),[15,85]),gt=function(e){function t(e){var a;return Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).getCurrentPixels=function(e){return e/100*window.innerWidth},a.isVerySmall=function(e){return e<10||e-a.getMinsize()<10},a.state={sizes:a.getDefaultSizes(),id:e.id},a.onSplitDragEnd=a.onSplitDragEnd.bind(Object(nt.a)(a)),a.onSplitDragStart=a.onSplitDragStart.bind(Object(nt.a)(a)),a.handleSplitterBtnClick=a.handleSplitterBtnClick.bind(Object(nt.a)(a)),a.createGutter=a.createGutter.bind(Object(nt.a)(a)),a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"getDefaultSizes",value:function(){return this.props&&this.props.defaultSize?this.props.defaultSize:ht}},{key:"handleSplitterBtnClick",value:function(){this.addRemoveContentTransition(!0);var e=this.getCurrentPixels(this.state.sizes[0]);console.log("handleSplitterBtnClick",e,"small? "+this.isVerySmall(e));var t=null;this.isVerySmall(e)?(this.setState({sizes:this.getDefaultSizes()}),this.showCollapseArrow(),t=this.getDefaultSizes()):(this.setState({sizes:[0,100]}),this.showExpandArrow(),t=[0,100]),this.props.onDragEnd&&this.props.onDragEnd(t)}},{key:"showExpandArrow",value:function(){var e=document.getElementById("noobSplitterGutterArrow"+this.state.id);e.classList.remove("arrow-left"),e.classList.add("arrow-right")}},{key:"showCollapseArrow",value:function(){var e=document.getElementById("noobSplitterGutterArrow"+this.state.id);e.classList.remove("arrow-right"),e.classList.add("arrow-left")}},{key:"onSplitDragEnd",value:function(e){this.setState({sizes:e});var t=this.getCurrentPixels(this.state.sizes[0]);this.isVerySmall(t)?this.showExpandArrow():this.showCollapseArrow(),this.addRemoveContentTransition(!1),this.props.onDragEnd&&this.props.onDragEnd(e)}},{key:"onSplitDragStart",value:function(e){this.addRemoveContentTransition(!1)}},{key:"addRemoveContentTransition",value:function(e){for(var t=document.getElementsByClassName("splitContent"),a=0;a<t.length;a++){var n=t[a];n.style.transition=e?"0.5s":"0.0s"}}},{key:"createGutter",value:function(){var e=document.createElement("div");e.classList.add("gutter"),e.classList.add("gutter-horizontal");var t=document.createElement("div");t.classList.add("gutterBtn");var a=document.createElement("div");return a.classList.add("arrow-left"),a.id="noobSplitterGutterArrow"+this.state.id,t.appendChild(a),e.appendChild(t),t.addEventListener("click",this.handleSplitterBtnClick),t.addEventListener("touchend",this.handleSplitterBtnClick),e}},{key:"getMinsize",value:function(){return this.props.minSize?this.props.minSize:0}},{key:"render",value:function(){console.log("[noobSplitter][render()] ",this.props.children);var e=r.a.createElement("div",null),t=r.a.createElement("div",null);return this.props.children&&(Array.isArray(this.props.children)?this.props.children.length>1&&(e=this.props.children[0],t=this.props.children[1]):e=this.props.children),r.a.createElement(mt.a,{className:"split",id:"noobSplitter"+this.state.id,direction:"horizontal",sizes:this.state.sizes,minSize:this.getMinsize(),gutterSize:8,onDragEnd:this.onSplitDragEnd,onDragStart:this.onSplitDragStart,snapOffset:0,cursor:"col-resize",gutter:this.createGutter},r.a.createElement("div",{className:"content-left splitContent"},e),r.a.createElement("div",{className:"splitContent",style:{width:"100%",overflow:"auto"}},t))}}]),t}(n.Component),ft=[15,85],yt=function(e){function t(e){var a;return Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).onWindowResize=function(){var e=a.state.currRightPercent/100*(window.innerWidth-8);a.setState({rightPixels:e,leftPixels:window.innerWidth-e})},a.onSplitDragEnd=function(e){var t=e[1]/100*(window.innerWidth-8);console.log("onSplitDragEnd designerContent callback"),a.setState({rightPixels:t,currRightPercent:e[1],leftPixels:window.innerWidth-t-8})},a.defaultSizes=e.defaultSizes?e.defaultSizes:ft,window.addEventListener("resize",a.onWindowResize),a.state={leftPixels:a.defaultSizes[0]*(window.innerWidth-8)/100,rightPixels:a.defaultSizes[1]*(window.innerWidth-8)/100,currRightPercent:a.defaultSizes[1]},a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"componentDidMount",value:function(){console.log("[designerContentBase] componentDidMount, rightixels supposedly:",this.defaultSizes,this.defaultSizes[1]*window.innerWidth/100)}}]),t}(r.a.Component),vt=a(101),bt=(a(503),a(504),function(e){function t(e){var a;Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).componentDidMount=function(){var e=a.getFirstLevelKeys();console.log("[DEBUG][Tree] componentDidMount...",e),e&&e.length&&a.setState({expandedKeys:[].concat(Object(u.a)(a.state.expandedKeys),Object(u.a)(e))})},a.componentDidUpdate=function(e){if(console.log("tree componentDidUpdate"),!a.props.selectedNodeKey||a.props.selectedNodeKey!==e.selectedNodeKey){var t=x(a.props.treeData,a.props.selectedNodeKey);if(t){var n=t.parentArr[t.index];a.state.expandedKeys.includes(n.key)||a.setState({expandedKeys:[].concat(Object(u.a)(a.state.expandedKeys),[n.key])})}}},a.onExpand=function(e){a.setState({expandedKeys:e})},a.Icon=function(e){return"Plant"===e.nodeType||"Folder"===e.nodeType||e.children&&e.children.length>0?r.a.createElement("i",{className:"ui icon folder outline"}):r.a.createElement("i",{className:"ui icon genderless"})},a.getSwitcherIcon=function(e){return e.isLeaf?null:e.expanded?r.a.createElement("i",{className:"ui icon angle down"}):r.a.createElement("i",{className:"ui icon angle right"})},a.onDrop=function(e){console.log("[tree] onDrop",e);var t=!0,n=e.node.props.eventKey,r=e.dragNode.props.eventKey,o=a.getParentPosStr(e.dragNode.props.pos),i=e.node.props.pos.split("-"),l=1===e.dropPosition-Number(i[i.length-1]),c=(a.getParentPosStr(e.node.props.pos),Object(u.a)(a.props.treeData)),s=x(c,r),d=x(c,n);if(!0===e.dropToGap){s.parentArr.splice(s.index,1);var p=d.parentArr.findIndex((function(e){return e.key===n}));l&&p++,d.parentArr.splice(p,0,s.item)}else e.node.props.pos===o?(console.log("Dropped to the same folder: do nothing"),t=!1):(s.parentArr.splice(s.index,1),d.item.children=d.item.children||[],d.item.children.push(s.item));t&&a.props.onHierarchyChanged(c)};var n=e.keys;return a.state={defaultExpandedKeys:n,defaultSelectedKeys:[],defaultCheckedKeys:n,treeData:null,expandedKeys:[]},a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"onDragStart",value:function(e){}},{key:"onDragEnter",value:function(e){}},{key:"getParentPosStr",value:function(e){e.split("-");var t=e.lastIndexOf("-");return t<0?null:e.substr(0,t)}},{key:"satisfiesFilter",value:function(e){if(!this.props.searchText||e.title.includes(this.props.searchText))return!0;if(!e.children)return!1;for(var t=0;t<e.children.length;t++){var a=e.children[t];if(this.satisfiesFilter(a))return!0}return!1}},{key:"getFirstLevelKeys",value:function(){return this.props.treeData?this.props.treeData.map((function(e){return e.key})):[]}},{key:"shouldHide",value:function(e,t){if(!Array.isArray(e))return!1;for(var a=0;a<e.length;a++){if(!0===t[e[a]])return!0}return!1}},{key:"renderTreeNodes",value:function(e){var t=this,a=[];if(!e)return null;for(var n=function(n){var o=e[n];if(!t.satisfiesFilter(o))return"continue";var i=!!t.props.userSettings&&t.props.userSettings.find((function(e){return e.key===o.key}));if(i){if(t.shouldHide(t.props.hiddenNodesSettings,i))return"continue";var l=Object(d.a)({},o);l.title=i.dispName,a.push(r.a.createElement(vt.a,l,t.renderTreeNodes(o.children)))}else a.push(r.a.createElement(vt.a,o,t.renderTreeNodes(o.children)))},o=0;o<e.length;o++)n(o);return a}},{key:"render",value:function(){return console.log("rendering tree",this.props.userSettings),this.props.treeData?r.a.createElement(vt.b,{style:{overflow:"auto",height:"100%",width:"100%",padding:"0 0 20 0"},className:"hierarchyTree",showLine:!0,selectable:!0,draggable:this.props.draggable,onDragStart:this.onDragStart,onDragEnter:this.onDragEnter,onDrop:this.onDrop,checkable:!1,defaultExpandAll:this.props.defaultExpandAll,onExpand:this.onExpand,selectedKeys:this.props.selectedNodeKey?[this.props.selectedNodeKey]:[],onSelect:this.props.onSelectCb,onCheck:this.onCheck,icon:this.Icon,switcherIcon:this.getSwitcherIcon},this.renderTreeNodes(this.props.treeData)):r.a.createElement("div",null,"Loading...")}}]),t}(r.a.Component));bt.defaultProps={keys:["//PLANT"]};var Et=bt,Ct=a(12);a(505),a(362),a(836),a(115);function kt(e){return function(t){function a(){var e,t;Object(Ze.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(et.a)(this,(e=Object(tt.a)(a)).call.apply(e,[this].concat(r)))).onClick=function(e){console.log("[noobControlHoc] onClick"),e.stopPropagation()},t.onMouseDown=function(e){console.log("[noobControlHoc] onMouseDown"),t.props.controlSelected&&t.props.controlSelected(t.props)},t}return Object(at.a)(a,t),Object(Qe.a)(a,[{key:"componentDidMount",value:function(){var e=i.a.findDOMNode(this);e&&e.addEventListener("mousedown",this.onMouseDown)}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),a}(r.a.Component)}var Ot=kt((function(e){console.log("section render",e.style);var t,a={fontSize:(t=e.data.level,t?26-2*t:20)},n="section";!0===e.selected&&(n+=" ctrl-selected");var o=Object(d.a)({},e.style,{},a);return r.a.createElement("div",{className:n,style:o},e.data.title)})),St=[{name:"level",propType:"combo",options:[{key:"level-1",text:"1",value:1},{key:"level-2",text:"2",value:2},{key:"level-3",text:"3",value:3},{key:"level-4",text:"4",value:4}]}],Dt=(a(837),a(363),a(656)),xt=a(39),wt={CODE:{backgroundColor:"rgba(0, 0, 0, 0.05)",fontFamily:'"Inconsolata", "Menlo", "Consolas", monospace',fontSize:16,padding:2}};function Tt(e){switch(e.getType()){case"blockquote":return"RichEditor-blockquote";default:return null}}var jt=kt((function(e){var t,a=e.apiData&&e.apiData.data&&Array.isArray(e.apiData.data)&&e.apiData.data.length>0;if(e.pageApiData&&e.data.apiFieldName){var o=e.pageApiData[e.data.apiFieldName];t=xt.EditorState.createWithContent(xt.ContentState.createFromText(o))}else if(a){var i=function(e){if(!e)return"";var t="<div>";for(var a in e)t+='<div style="padding: 10px">',t+="<div><b>".concat(a,"</b></div>"),t+="<div>".concat(e[a],"</div>"),t+="</div>",t+="<div><br/></div>";return t+="</div>"}(e.apiData.data[0]);t=xt.EditorState.createWithContent(Object(Dt.a)(i))}else t=e.data.richTextData?xt.EditorState.createWithContent(Object(xt.convertFromRaw)(e.data.richTextData)):xt.EditorState.createWithContent(xt.ContentState.createFromText("Hello\r\nworld"));var l=Object(n.useState)(t),c=Object(Ct.a)(l,2),s=c[0],u=c[1];Object(n.useEffect)((function(){u(t)}),[e.data.richTextData,a,e.pageApiData]);var d="richTextMainContainer ";!0===e.selected&&(d+=" ctrl-selected");var p="RichEditor-editor",m=s.getCurrentContent();return m.hasText()||"unstyled"!==m.getBlockMap().first().getType()&&(p+=" RichEditor-hidePlaceholder"),r.a.createElement("div",{className:d},r.a.createElement("div",{className:"controlLabel"},e.data.label),r.a.createElement("div",{className:"RichEditor-root designerRichTextEditor"},r.a.createElement("div",{className:p},r.a.createElement(xt.Editor,{blockStyleFn:Tt,customStyleMap:wt,editorState:s,placeholder:e.data.placeholder,spellCheck:!0,readOnly:!0}))))})),Nt=[{name:"richTextData",propType:"richText",toolTip:"Optional. This data will not be shown if this control is configured to show contents from API."},{name:"dataProps",propType:"section"},{name:"datasetId",propType:"number"},{name:"requestType",propType:"metadata",metadataField:"requestTypes",metadataPropType:"dropdown"},{name:"filterName",propType:"metadata",metadataField:"dimensions",metadataPropType:"treeDropdown"}],Pt=a(1250),At=(a(930),kt((function(e){console.log("render combo: ",e.data.label);var t="dropdownContainer ";return!0===e.selected&&(t+=" ctrl-selected"),r.a.createElement("div",{className:t},r.a.createElement("div",{className:"controlLabel"},e.data.label),r.a.createElement(Pt.a,{placeholder:e.data.placeholder,fluid:!0,multiple:!0,selection:!0,search:!0,options:e.data.options,onMouseDown:function(e){console.log("[Dropdown] onMouseDown!")},button:!0,className:"icon small",style:{fontWeight:"normal",color:"gray",right:"0",left:"auto"}}))}))),It=a(1243),Ft=kt((function(e){console.log("textbox render",e.data.label);var t="";return!0===e.selected&&(t+=" ctrl-selected"),r.a.createElement("div",{className:t,style:{width:"100%"}},r.a.createElement("div",{className:"controlLabel"},e.data.label),r.a.createElement(It.a,{key:e.data.i,size:"small",fluid:!0,placeholder:e.data.placeholder}))})),Lt=(a(545),a(163)),Rt=function(e){return e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").replace(/^./,(function(e){return e.toUpperCase()}))},Mt=["Good","Bad","Fair","Uncertain"],Vt=function(e,t){var a=t.data.length,n=t.data.filter((function(t){return"Good"===t[e]})).length;return"".concat(n/a*100,"%")},zt=[{Header:"Target Info",Footer:"Target Summary",TestCustomProp:"helllo",width:200,columns:[{Header:"Name",accessor:"targetName",Footer:function(e){return"Footer Target Names: "+e.rows.length+" Records"},FooterColSpan:2},{Header:"Full Path",accessor:"fullPath",customColSpan:3}]},{Header:"KPIs",Footer:"KPI Summary",columns:[{Header:"Time in Control",accessor:"timeInControl",Footer:function(e){return Vt("timeInControl",e)},colType:"kpi"},{Header:"Time in Alarm",accessor:"timeInAlarm",Footer:function(e){return Vt("timeInAlarm",e)},colType:"kpi"},{Header:"Time MV Out of Limits",accessor:"timeMvOutOfLimits",Footer:function(e){return Vt("timeMvOutOfLimits",e)},colType:"kpi"}]}];function Ht(e){var t=e.column,a=t.filterValue,n=t.preFilteredRows,o=t.setFilter;n.length;return r.a.createElement("input",{value:a||"",onChange:function(e){o(e.target.value||void 0)},placeholder:"Filter...",onClick:function(e){e.stopPropagation()},style:{width:"100%"}})}var Wt=function(e){var t,a,o="noobTableContainer ";!0===e.selected&&(o+=" ctrl-selected"),e.designMode?(t=zt,a=function(){for(var e=[],t=0;t<10;t++)for(var a=0;a<2;a++)e.push({targetName:"FIC_".concat(t,"_").concat(a),fullPath:"//PLANT/AREA_".concat(t,"/FIC_").concat(a),timeInControl:Mt[(a+1)%Mt.length],timeInAlarm:Mt[(a+2)%Mt.length],timeMvOutOfLimits:Mt[a%Mt.length],kpi1:Mt[a%Mt.length],kpi2:Mt[a%Mt.length],kpi3:Mt[a%Mt.length],kpi4:Mt[a%Mt.length],kpi5:Mt[a%Mt.length],kpi6:Mt[a%Mt.length],kpi7:Mt[a%Mt.length],kpi8:Mt[a%Mt.length],kpi9:Mt[a%Mt.length],kpi10:Mt[a%Mt.length],subRows:void 0});return e}()):(a=e.apiData?e.apiData.data:[],t=e.apiData?function(e){if(!Array.isArray(e))return[];var t=e[0],a=[];for(var n in t)a.push({Header:Rt(n),accessor:n});return a}(e.apiData.data):[]);var i=function e(t){return t?t.reduce((function(t,a,n,r){var o=t+e(a.columns);return a.accessor?a.customColSpan?o+a.customColSpan:o+1:o}),0):0}(t),l=r.a.useMemo((function(){return t}),[e.apiData]),c=r.a.useMemo((function(){return a}),[e.apiData]),s=r.a.useMemo((function(){return{text:function(e,t,a){return e.filter((function(e){var n=e.values[t];return void 0===n||String(n).toLowerCase().startsWith(String(a).toLowerCase())}))}}}),[]),u=function(){return e.data.showPaginator||0===a.length?10:a.length},d=r.a.useMemo((function(){return{Filter:Ht}}),[]),p=Object(Lt.d)({columns:l,data:c,defaultColumn:d,filterTypes:s,initialState:{pageIndex:0,pageSize:u()}},Lt.a,Lt.c,Lt.b),m=p.getTableProps,h=p.getTableBodyProps,g=p.headerGroups,f=(p.footerGroups,p.rows),y=p.prepareRow,v=p.page,b=p.canPreviousPage,E=p.canNextPage,C=p.pageOptions,k=p.pageCount,O=p.gotoPage,S=p.nextPage,D=p.previousPage,x=p.setPageSize,w=p.state,T=w.pageIndex,j=w.pageSize;return Object(n.useEffect)((function(){x(u())}),[e.data.showPaginator,a.length]),g.forEach((function(e){e.headers.forEach((function(e){}))})),a?r.a.createElement("div",{className:o},r.a.createElement("div",{className:"controlLabel"},e.data.label),r.a.createElement("table",Object.assign({className:"noobTable"},m()),r.a.createElement("thead",null,g.map((function(t,a){return r.a.createElement(n.Fragment,{key:"headerGroup_".concat(a)},r.a.createElement("tr",t.getHeaderGroupProps(),t.headers.map((function(e){var t=100/i;e.customColSpan&&(t*=e.customColSpan);var a={width:t+"%"};return r.a.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),a),e.render("Header"),r.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""))}))),e.data.showFilters&&function(e){return!!e.headers.find((function(e){return e.canFilter}))}(t)&&r.a.createElement("tr",{key:"headerGroupFilter_".concat(a)},t.headers.map((function(e){return r.a.createElement("th",{key:"headerGroupFilter_".concat(a,"_").concat(e.id)},r.a.createElement("div",{className:"colFilter"},e.canFilter?e.render("Filter"):null))}))))}))),r.a.createElement("tbody",h(),v.map((function(e,t){return y(e),r.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return r.a.createElement("td",e.getCellProps(function(e){return"kpi"!==e.column.colType?{}:"Bad"===e.value?{style:{backgroundColor:"pink"}}:"Good"===e.value?{style:{backgroundColor:"lime"}}:"Uncertain"===e.value?{style:{backgroundColor:"lightgray"}}:"Fair"===e.value?{style:{backgroundColor:"gold"}}:{}}(e)),e.render("Cell"))})))})),r.a.createElement("tr",null,e.data.showFooter&&r.a.createElement("td",{colSpan:"20",style:{backgroundColor:"#ccddee"}},"Total of ",f.length," records")))),e.data.showPaginator&&k>0&&r.a.createElement("div",{className:"pagination"},r.a.createElement("button",{onClick:function(){return O(0)},disabled:!b},"<<")," ",r.a.createElement("button",{onClick:function(){return D()},disabled:!b},"<")," ",r.a.createElement("button",{onClick:function(){return S()},disabled:!E},">")," ",r.a.createElement("button",{onClick:function(){return O(k-1)},disabled:!E},">>")," ",r.a.createElement("span",null,"Page"," ",r.a.createElement("strong",null,T+1," of ",C.length)," "),r.a.createElement("span",null,"\xa0 \xa0 Go to page:"," ","\xa0",r.a.createElement("input",{type:"number",defaultValue:T+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;O(t)},style:{width:"80px"}}))," ",r.a.createElement("select",{value:j,onChange:function(e){x(Number(e.target.value))}},[5,10,20,30,40].map((function(e){return r.a.createElement("option",{key:e,value:e},"Show ",e)}))))):r.a.createElement("div",null,"Loading data...")},Bt=kt(Wt),Gt=[{name:"showFilters",propType:"bool"},{name:"showPaginator",propType:"bool"},{name:"showFooter",propType:"bool"},{name:"dataProps",propType:"section"},{name:"datasetId",propType:"number"},{name:"requestType",propType:"metadata",metadataField:"requestTypes",metadataPropType:"dropdown"},{name:"columns",propType:"metadata",metadataField:"dimensions",metadataPropType:"treeDropdown",multiple:!0,watchedField:"specifyColumns",watchedValue:!0},{name:"aggregation",propType:"metadata",metadataField:null,metadataPropType:"textbox",toolTip:"Only count is supported in this version. Also, aggregation may not be applicable, depending on Request Type.",readOnly:!0},{name:"specifyColumns",propType:"bool",watchableField:!0,toolTip:"If [Specify Columns] is ticked, select the [Columns] you wish to include. Otherwise, specify [Categories] and/or [Series Name] just like configuring a piechart/barchart."},{name:"categories",propType:"metadata",metadataField:"dimensions",metadataPropType:"treeDropdown",watchedField:"specifyColumns",watchedValue:!1},{name:"seriesName",propType:"metadata",metadataField:"dimensions",metadataPropType:"treeDropdown",watchedField:"specifyColumns",watchedValue:!1},{name:"filterName",propType:"metadata",metadataField:"dimensions",metadataPropType:"treeDropdown"},{name:"filtersList",propType:"dynamicFilter",metadataField:"dimensions",metadataPropType:"treeDropdown",multiple:!0,toolTip:"Select one or more filters by clicking the Add Parameter button"}],_t=(a(949),a(950),kt((function(e){console.log("textbox render",e.data.label);var t="ctrlLabel ctrlLabel-report";!0===e.selected&&(t+=" ctrl-selected");var a,n={height:"100%"};e.data.color&&(n.color=e.data.color),e.data.backgroundColor&&(n.backgroundColor=e.data.backgroundColor),e.data.fontSize&&(n.fontSize=e.data.fontSize+"px"),e.data.linkedPage&&(n.cursor="pointer"),e.data.alignment&&(n.justifyContent=e.data.alignment),a=e.pageApiData&&e.data.apiFieldName?e.pageApiData[e.data.apiFieldName]:e.data.label;return r.a.createElement("div",{className:t,style:n,onClick:function(){e.data.linkedPage&&e.data.handleLinkClick&&e.data.handleLinkClick(e)}},e.data.icon&&r.a.createElement("span",null,r.a.createElement("i",{className:"ui icon ".concat(e.data.icon),style:{paddingLeft:"5px"}})),r.a.createElement("span",{style:{marginLeft:"5px"}},a))}))),Ut=[{name:"icon",propType:"icon"},{name:"color",propType:"color"},{name:"backgroundColor",propType:"color"},{name:"fontSize",propType:"number",toolTip:"in pixels unit"},{name:"linkedPage",propType:"pageLinks"},{name:"alignment",propType:"alignment",toolTip:"Specify CSS justify-content value, e.g. left, center"}],Kt=(a(951),a(952),a(309)),qt=a.n(Kt),Jt="default",Yt="success",Xt="danger",$t="warning",Zt="info",Qt={type:"default",insert:"top",container:"top-center",animationIn:["animated","slideInDown"],animationOut:["animated","slideOutUp"],width:400,dismiss:{duration:1200,onScreen:!1,pauseOnHover:!0,showIcon:!0}},ea=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";a||(a=" "),Kt.store.addNotification(Object(d.a)({},Qt,{title:e,message:a,type:t}))},ta=ea,aa=a(320),na=(a(954),a(955),a(17)),ra=a(1033),oa=kt(function(e){function t(e){var a;return Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).componentDidMount=function(){var e=Object(aa.a)(function(){for(var e={"Loop Controllability":["Time in Control","Time in Preferred Mode"],"Valve Controllability":["Time in Control","Total Deviation Time"]},t=["Good","Bad","Fair","Uncertain"],a=[],n=0;n<10;n++)for(var r=Object.keys(e),o=0;o<r.length;o++)for(var i=e[r[o]],l=0;l<i.length;l++)a.push({targetName:"Target_".concat(n),diagName:r[o],kpiname:i[l],kpiStatus:t[n%t.length],kpiValue:n+o+l});return a}()).dimension((function(e){return e.kpiStatus})),t=e.group();a.theChart=ra.rowChart(a.myRefChart.current).dimension(e).group(t).ordinalColors(["#00aa00","#aa2222","#999900","#555555"]).elasticX(!0).render()},a.componentDidUpdate=function(e){console.log("DC JS componentDidUpdate"),e.w===a.props.w&&e.h===a.props.h||a.theChart.render()},a.myRefChart=r.a.createRef(),a.theChart=null,a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){var e="";return!0===this.props.selected&&(e+=" ctrl-selected"),console.log("DC JS",this.props.w),r.a.createElement("div",{style:{width:"100%",height:"100%"},className:e},r.a.createElement("div",{id:"myDcBarChart",style:{width:"100%",height:"100%"},ref:this.myRefChart}))}}]),t}(r.a.Component)),ia=a(1255),la=(a(283),a(396),a(42)),ca=a(313),sa=a(1247),ua=(a(582),a(1048),"toolItem"),da=function(e){var t=Object(ia.a)({item:{type:ua,minW:e.controlType.minW,minH:e.controlType.minH,toolItemTypeName:e.controlType.name},end:function(e,t){return function(e,t){t.didDrop()||ta("Control was not added",Zt,"Please drop the control into an empty cell, or make sure there is sufficient space for larger controls.")}(0,t)},collect:function(e){return{isDragging:!!e.isDragging()}}}),a=Object(Ct.a)(t,2),n=a[0].isDragging,o=a[1],i="icon ".concat(e.controlType.icon);return r.a.createElement("div",{className:"toolItem",ref:o,style:{backgroundColor:n?"lightblue":"#cacaca"}},r.a.createElement("i",{className:i}),e.controlType.displayName)},pa=[{name:"section",displayName:"Section",icon:"wpforms",category:"common",minW:12,minH:1},{name:"richtext",displayName:"Rich Text",icon:"paint brush",category:"forms",minW:3,minH:3},{name:"label",displayName:"Label",icon:"info",category:"common"},{name:"barchart",displayName:"Bar Chart",icon:"chart bar",category:"common",minW:4,minH:5},{name:"pie",displayName:"Pie Chart",icon:"chart pie",category:"common",minW:4,minH:5},{name:"gauge",displayName:"Gauge",icon:"check circle outline",category:"common",minW:2,minH:3},{name:"line",displayName:"Line Chart",icon:"chart line",category:"common",minW:4,minH:5},{name:"table",displayName:"Table",icon:"table",category:"common",minW:5,minH:1},{name:"frame",displayName:"Frame",icon:"window maximize outline",category:"common",minW:3,minH:4},{name:"imageMap",displayName:"Image Map",icon:"map pin",category:"common",minW:3,minH:3},{name:"pagebreak",displayName:"Page Break",icon:"window minimize",category:"common",minW:12,minH:1}],ma=function(e){return pa.find((function(t){return t.name===e}))},ha=function(e){var t=e.containerWidth,a="toolBox";return a+=t<200?" toolBox-1row":" toolBox-2rows",console.log("toolBox containerWidth",t),r.a.createElement("div",{className:a},pa.map((function(e){return r.a.createElement(da,{controlType:e,key:e.name})})))},ga=a(50),fa=a(1253);var ya=function(e){var t=e.name,a=e.rules,o=e.label,i=e.numeric,l=e.toolTip,c=e.small,s=Object(k.a)(e,["name","rules","label","numeric","toolTip","small"]),u=Object(n.useContext)(Ba),d=u.register,p=u.setValue,m=u.unregister,h=c?{paddingTop:"6px",paddingBottom:"6px"}:{};return r.a.createElement(sa.a.Field,null,o&&r.a.createElement("label",null,r.a.createElement("span",{key:"label-"+t},o),"\xa0",!!l&&r.a.createElement(fa.a,{inverted:!0,basic:!0,size:"tiny",style:{opacity:"0.8"},content:l,trigger:r.a.createElement("div",{style:{display:"inline-block",color:"gray"}},r.a.createElement("i",{className:"ui icon info circle"}))})),r.a.createElement(ga.a,{as:r.a.createElement("input",Object.assign({key:"text-"+t,type:i?"number":"text",style:h},s)),name:t,register:d,unregister:m,setValue:p,rules:a}))};var va=function(e){var t=e.name,a=e.label,o=e.toolTip,i=Object(k.a)(e,["name","label","toolTip"]),l=Object(n.useContext)(Ba),c=l.register,s=l.setValue,u=l.unregister;return r.a.createElement(sa.a.Field,null,a&&r.a.createElement("label",null,r.a.createElement("span",{key:"label-"+t},a),"\xa0",!!o&&r.a.createElement(fa.a,{inverted:!0,basic:!0,size:"tiny",style:{opacity:"0.8"},content:o,trigger:r.a.createElement("div",{style:{display:"inline-block",color:"gray"}},r.a.createElement("i",{className:"ui icon info circle"}))})),r.a.createElement(ga.a,{as:r.a.createElement(sa.a.Checkbox,i),name:t,type:"checkbox",register:c,unregister:u,setValue:s,onChangeEvent:function(e){return{checked:Object(Ct.a)(e,2)[1].checked}}}))};var ba=function(e){var t=e.name,a=e.label,o=e.multiple,i=e.isRequired,l=e.fluid,c=Object(k.a)(e,["name","label","multiple","isRequired","fluid"]),s=Object(n.useContext)(Ba),u=s.register,d=s.setValue,p=s.unregister;return r.a.createElement(sa.a.Field,null,r.a.createElement("label",{key:"label-"+t},a),r.a.createElement(ga.a,{as:r.a.createElement(sa.a.Dropdown,Object.assign({key:t,fluid:l,multiple:o,search:!0,selection:!0,style:{fontWeight:"normal",color:"black",right:"0",left:"auto"}},c)),name:t,register:u,unregister:p,setValue:d,rules:{required:i},onChangeEvent:function(e){return{value:Object(Ct.a)(e,2)[1].value}}}))},Ea={display:"inline-block"};var Ca=function(e){var t=e.name,a=e.rules,o=e.label,i=e.intialicon,l=Object(k.a)(e,["name","rules","label","intialicon"]),c=Object(n.useContext)(Ba),s=c.register,u=c.setValue,d=c.unregister,p=Object(n.useState)({currVal:i}),m=Object(Ct.a)(p,2),h=m[0],g=m[1];return console.log("FormIconSelector render",i),r.a.createElement(sa.a.Field,null,r.a.createElement("label",{key:"label-"+t},r.a.createElement("span",null,o),"\xa0",r.a.createElement(fa.a,{inverted:!0,basic:!0,size:"tiny",style:{opacity:"0.8"},content:'Semantic UI Icon, e.g. "home", "warning"',trigger:r.a.createElement("div",{style:{display:"inline-block",color:"gray"}},r.a.createElement("i",{className:"ui icon info circle"}))})),r.a.createElement("div",{className:"ui icon input fluid"},r.a.createElement(ga.a,{as:r.a.createElement("input",Object.assign({key:t,style:Ea,onInput:function(e){console.log("FormIconSelector onInput!"),g({currVal:e.target.value})}},l)),defaultValue:"",name:t,register:s,unregister:d,setValue:u,rules:a}),r.a.createElement("i",{className:"ui icon large ".concat(h.currVal)})))},ka={display:"inline-block"};var Oa=function(e){var t=e.name,a=e.rules,o=e.label,i=e.intialcolor,l=Object(k.a)(e,["name","rules","label","intialcolor"]),c=Object(n.useContext)(Ba),s=c.register,u=c.setValue,d=c.unregister,p=Object(n.useState)({currVal:i}),m=Object(Ct.a)(p,2),h=m[0],g=m[1];return console.log("FormColorSelector render",i),r.a.createElement(sa.a.Field,null,r.a.createElement("label",{key:"label-"+t},r.a.createElement("span",null,o),"\xa0",r.a.createElement(fa.a,{inverted:!0,basic:!0,size:"tiny",style:{opacity:"0.8"},content:'CSS color, e.g. "red", "#abcdef"',trigger:r.a.createElement("div",{style:{display:"inline-block",color:"gray"}},r.a.createElement("i",{className:"ui icon info circle"}))})),r.a.createElement("div",{className:"ui icon input fluid"},r.a.createElement(ga.a,{as:r.a.createElement("input",Object.assign({key:t,style:ka,onInput:function(e){console.log("FormIconSelector onInput!"),g({currVal:e.target.value})}},l)),defaultValue:"",name:t,register:s,unregister:d,setValue:u,rules:a}),r.a.createElement("i",{className:"ui icon large square",style:{color:h.currVal}})))};a(1072);a(286);var Sa=a(139),Da=a.n(Sa),xa=(a(401),[{key:"Latest value only",text:"Latest value only",value:"Latest value only",disabled:!0},{key:"Last 1 day",text:"Last 1 day",value:"Last 1 day",disabled:!0},{key:"Last 7 days",text:"Last 7 days",value:"Last 7 days",disabled:!0},{key:"Last 30 days",text:"Last 30 days",value:"Last 30 days",disabled:!0},{key:"Custom Range",text:"Custom Range",value:"CustomRange"}]),wa=function(e){var t=e.name,a=e.label,o=e.initialValue,i=e.alwaysCustomRange,l=e.showMonthYearPicker,c=e.dateFormat,s=(Object(k.a)(e,["name","label","initialValue","alwaysCustomRange","showMonthYearPicker","dateFormat"]),Object(n.useState)(null)),u=Object(Ct.a)(s,2),d=u[0],p=u[1],m=Object(n.useState)(null),h=Object(Ct.a)(m,2),g=h[0],f=h[1],y=Object(n.useState)(!i),v=Object(Ct.a)(y,2),b=v[0],E=v[1],C=Object(n.useContext)(Ba),O=C.register,S=C.setValue,D=C.unregister,x=(C.errors,c||"yyyy / MMM / dd");return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("div",{className:"dateLabel"},a),r.a.createElement(ga.a,{as:i?r.a.createElement("div",{style:{display:"none"}}):r.a.createElement(Pt.a,{fluid:!0,selection:!0,options:xa,defaultValue:o||xa[0].value}),name:t+".value",register:O,unregister:D,setValue:S,onChangeEvent:function(e){var t=Object(Ct.a)(e,2)[1];return"CustomRange"===t.value?E(!1):(p(null),f(null)),{value:t.value}}}),r.a.createElement("div",{className:"dateLabel"},"Start:"),r.a.createElement("div",{className:"datepickerWrapper"},r.a.createElement(ga.a,{as:r.a.createElement(Da.a,{selected:d,selectsStart:!0,startDate:d,endDate:g,disabled:b,showMonthYearPicker:l,dateFormat:x}),name:t+".start",register:O,unregister:D,setValue:S,onChangeEvent:function(e){var t=Object(Ct.a)(e,2),a=t[0];return t[1],p(a),{value:a}}})),r.a.createElement("div",{className:"dateLabel"},"End:"),r.a.createElement("div",{className:"datepickerWrapper datepickerWrapperEnd"},r.a.createElement(ga.a,{as:r.a.createElement(Da.a,{selected:g,selectsEnd:!0,startDate:d,endDate:g,minDate:d,disabled:b,showMonthYearPicker:l,dateFormat:x}),name:t+".end",register:O,unregister:D,setValue:S,onChangeEvent:function(e){var t=Object(Ct.a)(e,2),a=t[0];return t[1],f(a),{value:a}}})))},Ta=[{key:"Equal",text:"=",value:"Equal"},{key:"Greater",text:">",value:"Greater",disabled:!0},{key:"LessThan",text:"<",value:"LessThan",disabled:!0},{key:"In",text:"In",value:"In",disabled:!0},{key:"NotIn",text:"Not In",value:"NotIn",disabled:!0}],ja=function(e){var t=e.name,a=(e.label,e.initialValue),o=Object(k.a)(e,["name","label","initialValue"]),i=Object(n.useContext)(Ba),l=i.register,c=i.setValue,s=i.unregister;i.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"dateLabel"},"Parameter:"),r.a.createElement(ga.a,{as:r.a.createElement("input",Object.assign({key:t,className:"ui small",defaultValue:t,readOnly:!0},o)),register:l,unregister:s,setValue:c}),r.a.createElement("div",{className:"dateLabel"},"Condition:"),r.a.createElement("div",{className:"datepickerWrapper"},r.a.createElement(ga.a,{as:r.a.createElement(Pt.a,{fluid:!0,selection:!0,options:Ta,defaultValue:a||Ta[0].value}),name:t+"Condition",register:l,unregister:s,setValue:c})),r.a.createElement("div",{className:"dateLabel"},"Value:"),r.a.createElement("div",{className:"datepickerWrapper datepickerWrapperEnd"},r.a.createElement(ga.a,{as:r.a.createElement("input",Object.assign({key:t,className:"ui small"},o)),defaultValue:"",name:t,register:l,unregister:s,setValue:c})))},Na=function(e){var t=e.name,a=(e.x,e.y,e.color),o=Object(k.a)(e,["name","x","y","color"]),i=Object(n.useContext)(Ba),l=i.register,c=i.setValue,s=i.unregister,u=(i.errors,Object(n.useState)(a)),d=Object(Ct.a)(u,2),p=d[0],m=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"dateLabel"},"Name:"),r.a.createElement(ga.a,{as:r.a.createElement("input",Object.assign({key:t,className:"ui small"},o)),name:t+".name",register:l,unregister:s,setValue:c,onChangeEvent:function(e){return function(e,t){return{value:e[0].target.value}}(e)}}),r.a.createElement("div",{className:"dateLabel"},"X:"),r.a.createElement(ga.a,{as:r.a.createElement("input",Object.assign({key:t,className:"ui small",readOnly:!0},o)),name:t+".x",register:l,unregister:s,setValue:c}),r.a.createElement("div",{className:"dateLabel"},"Y:"),r.a.createElement(ga.a,{as:r.a.createElement("input",Object.assign({key:t,className:"ui small",readOnly:!0},o)),name:t+".y",register:l,unregister:s,setValue:c}),r.a.createElement("div",{className:"dateLabel"},"Color:"),r.a.createElement("div",{className:"ui icon input fluid"},r.a.createElement(ga.a,{as:r.a.createElement("input",Object.assign({key:t,className:"ui small"},o)),name:t+".color",register:l,unregister:s,setValue:c,onChangeEvent:function(e){return function(e){var t=Object(Ct.a)(e,1)[0];return m(t.target.value),{value:t.target.value}}(e)}}),r.a.createElement("i",{className:"ui icon large square",style:{color:p}})),r.a.createElement("i",{className:"ui icon trash alternate btnImageFormCoordDelete",onClick:function(e){return ta("Sorry, not yet implemented!",Xt)}}))},Pa=(a(1115),{CODE:{backgroundColor:"rgba(0, 0, 0, 0.05)",fontFamily:'"Inconsolata", "Menlo", "Consolas", monospace',fontSize:16,padding:2}});function Aa(e){switch(e.getType()){case"blockquote":return"RichEditor-blockquote";default:return null}}var Ia=function(e){function t(){var e;return Object(Ze.a)(this,t),(e=Object(et.a)(this,Object(tt.a)(t).call(this))).onToggle=function(t){t.preventDefault(),e.props.onToggle(e.props.style)},e}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){var e="RichEditor-styleButton";return this.props.active&&(e+=" RichEditor-activeButton"),r.a.createElement("span",{className:e,onMouseDown:this.onToggle},this.props.label)}}]),t}(r.a.Component),Fa=[{label:"H1",style:"header-one"},{label:"H2",style:"header-two"},{label:"H3",style:"header-three"},{label:"Blockquote",style:"blockquote"},{label:"UL",style:"unordered-list-item"},{label:"OL",style:"ordered-list-item"},{label:"Code",style:"code-block"}],La=function(e){var t=e.editorState,a=t.getSelection(),n=t.getCurrentContent().getBlockForKey(a.getStartKey()).getType();return r.a.createElement("div",{className:"RichEditor-controls"},Fa.map((function(t){return r.a.createElement(Ia,{key:t.label,active:t.style===n,label:t.label,onToggle:e.onToggle,style:t.style})})))},Ra=[{label:"Bold",style:"BOLD"},{label:"Italic",style:"ITALIC"},{label:"Underline",style:"UNDERLINE"},{label:"Monospace",style:"CODE"}],Ma=function(e){var t=e.editorState.getCurrentInlineStyle();return r.a.createElement("div",{className:"RichEditor-controls"},Ra.map((function(a){return r.a.createElement(Ia,{key:a.label,active:t.has(a.style),label:a.label,onToggle:e.onToggle,style:a.style})})))};var Va=function(e){var t=e.name,a=e.rules,o=e.label,i=e.toolTip,l=e.initialData,c=e.controlId,s=Object(k.a)(e,["name","rules","label","toolTip","initialData","controlId"]),u=Object(n.useContext)(Ba),d=u.register,p=u.setValue,m=u.unregister,h=Object(n.useRef)(null),g=function(){return l?xt.EditorState.createWithContent(Object(xt.convertFromRaw)(l)):xt.EditorState.createWithContent(xt.ContentState.createFromText("Hello\r\nworld"))},f=g(),y=Object(n.useState)(f),v=Object(Ct.a)(y,2),b=v[0],E=v[1],C=function(e){E(e)};Object(n.useEffect)((function(){console.log("FormRichText id changed",c),E(g())}),[c]);var O="RichEditor-editor",S=b.getCurrentContent();return S.hasText()||"unstyled"!==S.getBlockMap().first().getType()&&(O+=" RichEditor-hidePlaceholder"),console.log("FormRichText",t,l),r.a.createElement(sa.a.Field,null,o&&r.a.createElement("label",null,r.a.createElement("span",{key:"label-"+t},o),"\xa0",!!i&&r.a.createElement(fa.a,{inverted:!0,basic:!0,size:"tiny",style:{opacity:"0.8"},content:i,trigger:r.a.createElement("div",{style:{display:"inline-block",color:"gray"}},r.a.createElement("i",{className:"ui icon info circle"}))})),r.a.createElement("div",{className:"RichEditor-root"},r.a.createElement("div",{className:"toolBarStrip"},r.a.createElement(Ma,{editorState:b,onToggle:function(e){C(xt.RichUtils.toggleInlineStyle(b,e))}}),r.a.createElement(La,{editorState:b,onToggle:function(e){C(xt.RichUtils.toggleBlockType(b,e))}})),r.a.createElement("div",{className:O,onClick:function(){h&&h.current.focus()}},r.a.createElement(ga.a,{as:r.a.createElement(xt.Editor,Object.assign({key:t,editorState:b,ref:h,blockStyleFn:Aa,customStyleMap:Pa,handleKeyCommand:function(e){var t=xt.RichUtils.handleKeyCommand(b,e);return!!t&&(C(t),!0)},onTab:function(e){C(xt.RichUtils.onTab(e,b,4))}},s)),defaultValue:"",name:t,register:d,unregister:m,setValue:p,rules:a,onChangeEvent:function(e){var t=Object(Ct.a)(e,1)[0],a=b.getCurrentContent(),n=Object(xt.convertToRaw)(a);return E(t),{value:n}}}))))},za=a(182),Ha=a(1232),Wa=(a(1130),function(e){var t=e.name,a=e.label,o=(e.initialValue,e.toolTip),i=e.filterFieldOptions,l=e.initialFilters,c=e.parentId,s=(Object(k.a)(e,["name","label","initialValue","toolTip","filterFieldOptions","initialFilters","parentId"]),Object(n.useContext)(Ba)),u=(s.register,s.setValue,s.unregister,s.errors,Object(n.useState)(l||{})),p=Object(Ct.a)(u,2),m=p[0],h=p[1],g=Object(n.useState)(c),f=Object(Ct.a)(g,2),y=f[0],v=f[1];return Object(n.useEffect)((function(){h(l||{}),v(c)}),[l,c]),r.a.createElement(sa.a.Field,null,a&&r.a.createElement("label",null,r.a.createElement("span",{key:"label-"+t},a),"\xa0",!!o&&r.a.createElement(fa.a,{inverted:!0,basic:!0,size:"tiny",style:{opacity:"0.8"},content:o,trigger:r.a.createElement("div",{style:{display:"inline-block",color:"gray"}},r.a.createElement("i",{className:"ui icon info circle"}))})),r.a.createElement("div",null,r.a.createElement(Ha.a,{type:"button",size:"tiny",primary:!0,onClick:function(){h(Object(d.a)({},m,Object(la.a)({},be(),{filterName:null,filterValue:null})))}},"Add Parameter")),r.a.createElement("div",{className:"dynamicFiltersContainer"},function(){var e=y===c?m:l,a=[];for(var n in e)a.push(r.a.createElement("div",{className:"dynamicFilterRow",key:"dynamicFilterRow-".concat(n)},r.a.createElement(Ya,{name:"".concat(t,".").concat(n,".filterName"),treeData:i,isRequired:!1}),r.a.createElement(ya,{small:!0,name:"".concat(t,".").concat(n,".filterValue")}),r.a.createElement("i",{className:"ui icon trash alternate btnImageFormCoordDelete",onClick:function(e){return ea("Sorry, not yet implemented!",Xt)}})));return a}()))}),Ba=Object(n.createContext)();var Ga=function(e){var t=e.children,a=e.onSubmit,o=e.inputObj,i=e.inputObjId,l=e.setControlValues,c=e.watchedField,s=e.setStateCb,d=e.setStateHook,p=Object(k.a)(e,["children","onSubmit","inputObj","inputObjId","setControlValues","watchedField","setStateCb","setStateHook"]),m=Object(ca.a)(),h=m.register,g=m.setValue,f=m.handleSubmit,y=m.unregister,v=m.watch,b=m.errors,E=c?v(c):null;return o&&Object(u.a)(Object.values(o)),console.log("Form rerenders",o,E),Object(n.useEffect)((function(){console.log("Form useEffect (inputObj Id changed)",i),l&&l(g,o)}),[i]),Object(n.useEffect)((function(){console.log("Form useEffect watchedValue changed",E),d?d(E):s&&(Array.isArray(c)?s(function(e){if(e)return Object.keys(e).forEach((function(t){return void 0===e[t]&&delete e[t]})),e}(E)):s(Object(la.a)({},c,E)))}),Array.isArray(c)?Object.values(E):[E]),r.a.createElement(Ba.Provider,{value:{register:h,setValue:g,handleSubmit:f,unregister:y,errors:b}},a&&r.a.createElement(sa.a,Object.assign({onSubmit:f(a)},p),t),!a&&r.a.createElement(sa.a,p,t))},_a=a(239);function Ua(e){var t=Object(Ct.a)(e,3),a=t[0];t[1],t[2];return{value:void 0===a?null:a}}var Ka=function(e){return e.isLeaf?null:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.a.createElement("i",{style:t},r.a.createElement("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor",style:Object(d.a)({verticalAlign:"-.125em"},a)},r.a.createElement("path",{d:e})))}("M765.7 486.8L314.9 134.7c-5.3-4.1-12.9-0.4-12.9 6.3v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1c16.4-12.8 16.4-37.6 0-50.4z",{cursor:"pointer",backgroundColor:"white"},{transform:"rotate(".concat(e.expanded?90:0,"deg)")})},qa={switcherIcon:Ka},Ja={switcherIcon:Ka};var Ya=function(e){var t=e.name,a=e.label,o=e.treeData,i=e.isRequired,l=e.multiple,c=e.defaultValue,s=(e.value,e.disabled),u=Object(k.a)(e,["name","label","treeData","isRequired","multiple","defaultValue","value","disabled"]),d=Object(n.useContext)(Ba),p=d.register,m=d.setValue,h=d.unregister,g=d.errors,f=s?"formLabel-disabled":"";return r.a.createElement(sa.a.Field,null,a&&r.a.createElement("label",{key:"label-"+t,className:f},a),r.a.createElement(ga.a,{as:r.a.createElement(za.a,Object.assign({style:{width:"100%"},placeholder:r.a.createElement("div",{style:{color:"gray"}},"Please select..."),searchPlaceholder:"Search...",showSearch:!l,allowClear:!0,maxTagTextLength:10,treeData:o,treeNodeFilterProp:"title",multiple:l,treeIcon:!0,defaultValue:c,treeCheckStrictly:!0,disabled:s},Ja,u)),name:t,register:p,unregister:h,setValue:m,onChangeEvent:Ua,rules:{required:i}}),g[t]&&r.a.createElement("div",null,r.a.createElement(_a.a,{basic:!0,color:"red",pointing:!0},"Please select a value")))},Xa=function(e){var t=e.treeData,a=e.multiple,n=e.value,o=e.onSelect,i=Object(k.a)(e,["treeData","multiple","value","onSelect"]);return r.a.createElement(za.a,Object.assign({style:{width:"100%"},dropdownStyle:{maxHeight:300,overflow:"auto"},dropdownPopupAlign:{overflow:{adjustY:0,adjustX:0},offset:[0,2]},placeholder:r.a.createElement("div",{style:{color:"gray"}},"Please select..."),searchPlaceholder:"Search...",showSearch:!a,allowClear:!0,maxTagTextLength:10,treeData:t,treeNodeFilterProp:"title",multiple:a,treeIcon:!0,treeCheckStrictly:!0,value:n,onSelect:o},qa,i))},$a=(a(1131),a(287),function(e,t){return e.map((function(e){return t[e]})).join(" / ")}),Za=function(e,t){return C.a.pick(e,t)},Qa=a(1256),en=function(e,t){return e[t].map((function(e){var t=e.description&&r.a.createElement(Qa.a,{content:e.name,as:"h5",subheader:e.description});return{key:e.name,text:e.name,value:e.name,content:t}}))},tn=function(e,t){var a=[];return Array.isArray(t)?(t.forEach((function(t){var n=e[t],r=an(n);a=a.concat(r)})),a):a},an=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t.map((function(t){var n=t.name,r=t.items,o=t.dataType,i=Object(k.a)(t,["name","items","dataType"]),l=Object(d.a)({name:a?"".concat(a.name,".").concat(n):n,value:n,title:n,parent:a,stackValue:a?[].concat(Object(u.a)(a.stackValue),[n]):[n],disabled:"group"===o},i);return l.children=e(r,l),l})):null},nn=function(e,t){var a=function e(t,a){if(!Array.isArray(t))return null;for(var n=0;n<t.length;n++){var r=t[n];if(r.name===a)return r;var o=e(r.items,a);if(o)return o}return null}(t.dimensions,e);return a?an([a]):[]},rn=[{name:"Category 1",value:400},{name:"Category 2",value:300},{name:"Category 3",value:300},{name:"Category 4",value:200}],on=[{key:"status",value:"status",title:"Status"}],ln=["#106b21","#e71837","gold","gray","#669999","#8b008b","black","lime","teal","pink","#a47eb6","#fc9303","#0e4bef","#4b0082"],cn=(Math.PI,function(e){var t=Object(n.useRef)(),a=Object(n.useState)({height:0,width:0}),o=Object(Ct.a)(a,2),i=o[0],l=o[1];return Object(n.useEffect)((function(){if(console.log("[DEBUG] useEffect pie",t),t&&t.current){var e=t.current.getClientRects()[0];l({height:e.height,width:e.width})}}),[]),r.a.createElement("div",{className:"reChartContainer",ref:t},r.a.createElement("div",{className:"controlLabel"},e.data.label+" width: "+i.width),r.a.createElement(na.j,{margin:{top:20,right:15,left:15,bottom:0},height:i.height,width:i.width},mn(),hn()))}),sn=function(e){var t=Math.PI/180,a=e.cx,n=e.cy,o=e.midAngle,i=e.innerRadius,l=e.outerRadius,c=e.startAngle,s=e.endAngle,u=e.fill;e.payload,e.percent,e.value,Math.sin(-t*o),Math.cos(-t*o);return r.a.createElement("g",null,r.a.createElement(na.l,{cx:a,cy:n,innerRadius:i,outerRadius:l,startAngle:c,endAngle:s,fill:u}),r.a.createElement(na.l,{cx:a,cy:n,startAngle:c,endAngle:s,innerRadius:l+3,outerRadius:l+10,fill:u}))},un=function(e){function t(e){var a;Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).onPieClick=function(e,t){if(a.setState({activeIndex:t}),a.props.handleChartClick){var n=a.getGroupingStackStr();a.props.handleChartClick(e,null,n)}},a.getGroupingStackStr=function(){var e=a.props.currControlGrouping?a.props.currControlGrouping:[a.state.groupingBoundVal];return JSON.stringify(e)},a.renderPieWithData=function(e){var t=null;if(e.designMode)t=rn;else if(e.data.dataProps){if(!e.apiData||!e.metadata)return null;t=a.formatApiData(e.apiData.data,e.data.dataProps,e.currControlGrouping)}var n=function(e,t,a,n){if(!e)return null;var r=e[a];if(!r)return null;var o=r[n];if(!o)return null;var i=o.sliceInfo,l=t.findIndex((function(e){for(var t in i.origObj){var a=i.origObj[t];if(e.origObj[t]!==a)return!1}return!0}));return l>=0?l:null}(e.datasetFilters,t,e.i,a.getGroupingStackStr());return r.a.createElement(na.i,{data:t,labelLine:!0,label:!0,fill:"#8884d8",dataKey:"value",isAnimationActive:!1,onClick:a.onPieClick,activeIndex:n,activeShape:sn},t&&t.length>0&&t.map((function(e,t){return r.a.createElement(na.d,{key:"cell-".concat(t),fill:ln[t%ln.length]})})))},a.onGroupSelect=a.onGroupSelect.bind(Object(nt.a)(a));var n=e.data.dataProps?e.data.dataProps.categories:null;return console.log("[pieChart] constructor...initialGroupingVal",n),a.state={activeIndex:e.activeIndex,groupingBoundVal:n},a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"onGroupSelect",value:function(e,t){console.log("[Piechart] onGroupSelect",e,t.props),this.setState({groupingBoundVal:e}),this.props.handleGroupSelect&&this.props.handleGroupSelect(t.props.stackValue)}},{key:"formatApiData",value:function(e,t,a){var n=a||[t.categories];return e.map((function(e){return{name:$a(n,e),value:parseInt(e.value),origObj:Za(e,n)}}))}},{key:"componentDidUpdate",value:function(e,t){if(e.layoutName!==this.props.layoutName){var a=this.props.data.dataProps?this.props.data.dataProps.categories:null;this.setState({groupingBoundVal:a}),console.log("piechart, componentDidUpdate, initialGroupingVal: ",a,"previousProps.layoutName",e.layoutName,"this.props.layoutName",this.props.layoutName)}}},{key:"render",value:function(){var e="reChartContainer";return!0===this.props.selected&&(e+=" ctrl-selected"),console.log("[pieChart] render, group:",this.state.groupingBoundVal),r.a.createElement("div",{id:"pieContainer1",className:e},r.a.createElement("div",{className:"controlLabel"},this.props.data.label),r.a.createElement("div",null,!this.props.designMode&&this.props.data.dataProps&&this.props.metadata&&r.a.createElement(Xa,{treeData:nn(this.props.data.dataProps.categories,this.props.metadata),value:this.state.groupingBoundVal,onSelect:this.onGroupSelect,treeDefaultExpandAll:!0,key:"treedropdown-".concat(this.props.i)}),this.props.designMode&&r.a.createElement(Xa,{treeData:on,value:on[0].key,treeDefaultExpandAll:!0,disabled:!0})),r.a.createElement(na.k,{width:"100%",height:"100%"},r.a.createElement(na.j,{margin:{top:20,right:20,left:20,bottom:45}},this.renderPieWithData(this.props),hn(),r.a.createElement(na.m,null))))}}]),t}(r.a.Component),dn=kt(un),pn=function(e){function t(e){var a;return Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).onPieClick=function(e,t){a.setState({activeIndex:t}),a.props.pieClickCallback&&a.props.pieClickCallback(e)},a.renderPieWithData=function(e){var t=e.apiData||rn;return e.dataProps&&(t=a.formatApiData(e.data.data,e.dataProps)),r.a.createElement(na.i,{data:t,labelLine:!0,label:!0,fill:"#8884d8",dataKey:"value",isAnimationActive:!1,onClick:a.onPieClick,activeIndex:a.props.activeIndex,activeShape:sn},t&&t.length>0&&t.map((function(e,t){return r.a.createElement(na.d,{key:"cell-".concat(t),fill:ln[t%ln.length]})})))},a.state={activeIndex:e.activeIndex},a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"componentDidUpdate",value:function(e,t){}},{key:"extractName",value:function(e,t){return e.map((function(e){return t[e]})).join(" / ")}},{key:"formatApiData",value:function(e,t){var a=this,n=t.grouping;return e.map((function(e){return{name:a.extractName(n,e),value:e.value}}))}},{key:"render",value:function(){return r.a.createElement(na.j,{margin:{top:20,right:20,left:20,bottom:25},width:400,height:400},this.renderPieWithData(this.props),hn(),r.a.createElement(na.m,null))}}]),t}(r.a.Component),mn=function(){return r.a.createElement(na.i,{data:rn,labelLine:!0,label:!0,fill:"#8884d8",dataKey:"value",isAnimationActive:!1},rn.map((function(e,t){return r.a.createElement(na.d,{key:"cell-".concat(t),fill:ln[t%ln.length]})})))},hn=function(){return r.a.createElement(na.f,{wrapperStyle:{overflow:"auto",height:"65px"},margin:{top:0,right:0,left:0,bottom:0},verticalAlign:"bottom"})},gn=kt((function(e){var t="reChartContainer";!0===e.selected&&(t+=" ctrl-selected");e.containerWidth&&e.containerWidth;return r.a.createElement("div",{id:"pieContainer1",className:t},r.a.createElement("div",{className:"controlLabel"},e.data.label),r.a.createElement(na.k,{width:"100%",height:"100%"},r.a.createElement(na.j,{margin:{top:20,right:20,left:20,bottom:40}},mn(),hn())))})),fn=[{name:"dataProps",propType:"section"},{name:"datasetId",propType:"number",toolTip:"Put the same datasetId for all controls that are linked. When a filter is applied in one control, other linked controls will also be filtered."},{name:"requestType",propType:"metadata",metadataField:"requestTypes",metadataPropType:"dropdown"},{name:"categories",propType:"metadata",metadataField:"dimensions",metadataPropType:"treeDropdown"},{name:"aggregation",propType:"metadata",metadataField:null,metadataPropType:"textbox",toolTip:"Only count is supported in this version",readOnly:!0}],yn=(a(1132),["#106b21","#e71837","gold","gray","cyan","magenta","black","lime","teal","pink","violet","orange","blue","indigo"]),vn=[{date:"Category A","Series 3":4e3,"Series 1":2400,"Series 2":2400},{date:"Category B","Series 3":3e3,"Series 1":1398,"Series 2":2210},{date:"Category C","Series 3":2e3,"Series 1":9800,"Series 2":2290},{date:"Category D","Series 3":2780,"Series 1":3908,"Series 2":2e3},{date:"Category E","Series 3":1890,"Series 1":4800,"Series 2":2181},{date:"Category F","Series 3":2390,"Series 1":3800,"Series 2":2500}],bn=[{key:"month",value:"month",title:"Month"}],En=function(e){var t=Object(n.useRef)(),a=Object(n.useState)({height:0,width:0}),o=Object(Ct.a)(a,2),i=o[0],l=o[1];return Object(n.useEffect)((function(){if(console.log("[DEBUG] useEffect bar",t),t&&t.current){var e=t.current.getClientRects()[0];l({height:e.height,width:e.width})}}),[]),r.a.createElement("div",{className:"reChartContainer",ref:t},r.a.createElement("div",{className:"controlLabel"},e.data.label),Cn(!0,i.width,i.height,vn))},Cn=function(e,t,a,n,o){var i=!0===o?"a":null;return r.a.createElement(na.b,{width:t,height:a,data:n,margin:{top:0,right:10,left:5,bottom:50}},r.a.createElement(na.c,{vertical:!1}),r.a.createElement(na.n,{dataKey:"date",tick:r.a.createElement(kn,null),height:100,interval:0}),r.a.createElement(na.o,{axisLine:!1}),r.a.createElement(na.m,null),r.a.createElement(na.f,{verticalAlign:"top",wrapperStyle:{paddingBottom:"20px"}}),r.a.createElement(na.a,{dataKey:"Series 1",fill:"green",stackId:i,isAnimationActive:!1}),r.a.createElement(na.a,{isAnimationActive:e,dataKey:"Series 3",fill:"gold",stackId:i}),r.a.createElement(na.a,{isAnimationActive:e,dataKey:"Series 2",fill:"gray",stackId:i}))},kn=function(e){function t(){return Object(Ze.a)(this,t),Object(et.a)(this,Object(tt.a)(t).apply(this,arguments))}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){var e=this.props,t=e.x,a=e.y,n=(e.stroke,e.payload);return r.a.createElement("g",{transform:"translate(".concat(t,",").concat(a,")")},r.a.createElement("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(-35)"},n.value))}}]),t}(n.PureComponent),On=function(e){function t(){return Object(Ze.a)(this,t),Object(et.a)(this,Object(tt.a)(t).apply(this,arguments))}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){var e=this.props,t=e.x,a=e.y,n=(e.stroke,e.payload),o=JSON.parse(n.value);return r.a.createElement("g",{transform:"translate(".concat(t,",").concat(a,")")},r.a.createElement("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(-35)"},Object.values(o).join(" / ")))}}]),t}(n.PureComponent),Sn=function(e){function t(e){var a;return Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).state={},a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){return e=600,t=400,a=this.props.apiData,n=this.props.primary,o=this.props.secondaryList,r.a.createElement(na.b,{width:e,height:t,data:a,margin:{top:20,right:10,left:5,bottom:30}},r.a.createElement(na.c,{vertical:!1}),r.a.createElement(na.n,{height:100,dataKey:n,tick:r.a.createElement(On,null),interval:0}),r.a.createElement(na.o,{axisLine:!1}),r.a.createElement(na.m,null),r.a.createElement(na.f,{verticalAlign:"top",wrapperStyle:{paddingTop:"10px"}}),r.a.createElement(na.a,{dataKey:o[0],fill:"green",strokeWidth:4,isAnimationActive:!0,onClick:function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];(e=console).log.apply(e,["Bar clicked first cat"].concat(a))}}),r.a.createElement(na.a,{dataKey:o[1],fill:"gold"}));var e,t,a,n,o}}]),t}(r.a.Component);var Dn=kt(function(e){function t(e){var a;Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).handleClick=function(e,t,n){console.log("Bar clicked ",t,n),a.setState({activeCategoryIndex:t,activeSeries:n});var r=Object(d.a)({},e.origCatObj),o=Object(la.a)({},e.origSeriesName,n);if(a.props.handleChartClick){var i=a.getGroupingStackStr();a.props.handleChartClick({origObj:r},o,i)}},a.getGroupingStackStr=function(){var e=a.props.currControlGrouping?a.props.currControlGrouping:[a.state.groupingBoundVal];return JSON.stringify(e)},a.renderBars=function(e,t,n){var o=!0===a.props.data.stacked?"a":null;return e.map((function(e,i){return r.a.createElement(na.a,{key:"bar-".concat(e,"-").concat(i),dataKey:e,fill:yn[i%yn.length],isAnimationActive:!1,stackId:o,onClick:function(t,n){return a.handleClick(t,n,e)}},r.a.createElement(na.e,{dataKey:"name",content:function(e){return a.renderCustomizedLabel(e,t,n)},mySeriesName:e}))}))},a.renderCustomizedLabel=function(e,t,n){var o=e.x,i=e.y,l=e.width,c=e.height,s=(e.value,e.mySeriesName),u=e.index;if(t!==u||n!==s)return null;var d;return d=a.props.data.stacked?"".concat(o-1," ").concat(i+c/2,", ").concat(o-1-8," ").concat(i+c/2-4,", ").concat(o-1-8," ").concat(i+c/2+4):"".concat(o+l/2-4," ").concat(i-1-8,", ").concat(o+l/2+4," ").concat(i-1-8,", ").concat(o+l/2," ").concat(i-1),console.log("renderCustomizedLabel",s,u,d),r.a.createElement("g",null,r.a.createElement("polygon",{id:"e1_polygon",points:d,fill:"rgba(0, 0, 0, 0.7)"}))},a.getDataIndex=function(e,t){return e.findIndex((function(e){var a=e.origCatObj;for(var n in t){var r=t[n];if(a[n]!==r)return!1}return!0}))},a.renderChartContentsUngroupedData=function(e,t,n,o){var i,l,c=function(e,t){return C.a.uniq(e.map((function(e){return e[t]})))}(e,n),s=function(e,t,a){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"value",r=[],o=function(o){var i=e[o],l=$a(t,i),c=Za(i,t),s=r.find((function(e){return e.name===l}));s||(s={name:l,origCatObj:c,origSeriesName:a},r.push(s)),s[i[a]]=parseInt(i[n])},i=0;i<e.length;i++)o(i);return r}(e,t,n,o),u=a.getGroupingStackStr(),d=a.findFilterAtGroup(u);return d&&d.sliceInfo&&d.sliceInfo.origObj&&(i=a.getDataIndex(s,d.sliceInfo.origObj),l=d.seriesInfo&&Object.values(d.seriesInfo)[0]),r.a.createElement(na.b,{data:s,margin:{top:0,right:10,left:5,bottom:50}},r.a.createElement(na.c,{vertical:!1}),r.a.createElement(na.n,{height:100,dataKey:"name",tick:r.a.createElement(kn,null),interval:0}),r.a.createElement(na.o,{axisLine:!1}),r.a.createElement(na.m,null),r.a.createElement(na.f,{verticalAlign:"top",wrapperStyle:{paddingBottom:"20px"}}),a.renderBars(c,i,l))},a.findFilterAtGroup=function(e){if(!a.props.datasetFilters)return null;var t=a.props.datasetFilters[a.props.i];return t?t[e]:null},a.getChartContents=function(){if(a.props.designMode)return Cn(!0,null,null,vn,a.props.data.stacked);if(!a.props.apiData)return r.a.createElement("div",null);var e=a.props.currControlGrouping?a.props.currControlGrouping:[a.props.data.dataProps.categories];return a.renderChartContentsUngroupedData(a.props.apiData.data,e,a.props.data.dataProps.seriesName,a.props.data.dataProps.aggregation)};var n=e.data.dataProps?e.data.dataProps.categories:null;return a.state={activeCategoryIndex:null,activeSeries:null,groupingBoundVal:n},a.onGroupSelect=a.onGroupSelect.bind(Object(nt.a)(a)),a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"onGroupSelect",value:function(e,t){if(console.log("[Barchart] onGroupSelect",e,t.props),this.setState({groupingBoundVal:e}),this.props.handleGroupSelect){var a=t.props.stackValue;this.props.handleGroupSelect(a)}}},{key:"componentDidUpdate",value:function(e,t){if(e.layoutName!==this.props.layoutName){var a=this.props.data.dataProps?this.props.data.dataProps.categories:null;this.setState({groupingBoundVal:a})}}},{key:"render",value:function(){var e="reChartContainer";return!0===this.props.selected&&(e+=" ctrl-selected"),r.a.createElement("div",{className:e},r.a.createElement("div",{className:"controlLabel"},this.props.data.label),r.a.createElement("div",null,!this.props.designMode&&this.props.data.dataProps&&this.props.metadata&&r.a.createElement(Xa,{treeData:nn(this.props.data.dataProps.categories,this.props.metadata),value:this.state.groupingBoundVal,onSelect:this.onGroupSelect,treeDefaultExpandAll:!0}),this.props.designMode&&!this.props.dataProps&&r.a.createElement(Xa,{treeData:bn,value:bn[0].key,treeDefaultExpandAll:!0,disabled:!0})),r.a.createElement(na.k,{width:"100%",height:"100%"},this.getChartContents(this.props)))}}]),t}(r.a.Component)),xn=kt((function(e){var t="reChartContainer";return!0===e.selected&&(t+=" ctrl-selected"),r.a.createElement("div",{className:t},r.a.createElement("div",{className:"controlLabel"},e.data.label),r.a.createElement(na.k,{width:"100%",height:"100%"},Cn(!0,null,null,vn,e.stacked)))})),wn=[{name:"stacked",propType:"bool"},{name:"dataProps",propType:"section"},{name:"datasetId",propType:"number"},{name:"requestType",propType:"metadata",metadataField:"requestTypes",metadataPropType:"dropdown"},{name:"categories",propType:"metadata",metadataField:"dimensions",metadataPropType:"treeDropdown"},{name:"seriesName",propType:"metadata",metadataField:"dimensions",metadataPropType:"treeDropdown"},{name:"aggregation",propType:"metadata",metadataField:null,metadataPropType:"textbox",toolTip:"Only count is supported in this version",readOnly:!0}],Tn=(a(1133),[{name:"Category A",Series1:5.5},{name:"Category B",Series1:3.5},{name:"Category C",Series1:9.8},{name:"Category D",Series1:7.7}]),jn=function(e){var t=e.x,a=e.y,n=e.stroke,o=e.value;return r.a.createElement("text",{x:t,y:a,dy:-10,fill:n,fontSize:14,textAnchor:"middle"},o)},Nn=function(e){var t=e.x,a=e.y,n=(e.stroke,e.payload),o=e.category,i=n.value;if("Day"===o){var l=Date.parse(n.value);if(l){var c=new Date(l);c&&(i=c.toLocaleDateString())}}return r.a.createElement("g",{transform:"translate(".concat(t,",").concat(a,")")},r.a.createElement("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(-35)"},i))},Pn=kt((function(e){var t=function(){return r.a.createElement(na.h,{data:d,margin:{top:20,right:30,left:0,bottom:25},height:l.height,width:l.width},r.a.createElement(na.c,{strokeDasharray:"3 3"}),r.a.createElement(na.n,{dataKey:u,height:60,tick:r.a.createElement(Nn,{category:u}),padding:{left:50},interval:0}),r.a.createElement(na.o,{unit:e.data.unit}),r.a.createElement(na.m,null),r.a.createElement(na.f,null),r.a.createElement(na.g,{type:"monotone",dataKey:s,stroke:"blue",label:r.a.createElement(jn,{stroke:"blue"}),dot:{stroke:"blue",strokeWidth:10},animationDuration:500}))},a=Object(n.useRef)(),o=Object(n.useState)({height:0,width:0}),i=Object(Ct.a)(o,2),l=i[0],c=i[1];Object(n.useEffect)((function(){if(console.log("[DEBUG] useEffect gauge",a),a&&a.current&&a.current.getClientRects()){var e=a.current.getClientRects()[0];e&&c({height:e.height,width:e.width})}}),[]);e.designMode;var s=e.designMode?"Series1":e.data.dataProps.seriesName,u=e.designMode?"name":e.data.dataProps.categories,d=[];if(e.designMode)d=Tn;else if(e.apiData){d=function(t){for(var a=[],n=e.data.dataProps.categories,r=e.data.dataProps.seriesName,o=function(e){var o=t[e],i=o[n],l=o[r],c=o.value,s=a.find((function(e){return e[n]===i}));s||(s=Object(la.a)({},n,i),a.push(s)),s[l]=c},i=0;i<t.length;i++)o(i);return a}(e.apiData.data);var p=function(e,t){return C.a.uniq(e.map((function(e){return e[t]})))}(e.apiData.data,e.data.dataProps.seriesName);Array.isArray(p)&&p.length>0&&(s=p[0])}console.log("linechart render",d);var m="reChartContainer ";return e.selected&&(m+="ctrl-selected"),r.a.createElement("div",{className:m,ref:a},r.a.createElement("div",{className:"controlLabel"},e.data.label),e.reportMode?t():r.a.createElement(na.k,{width:"100%",height:"100%"},t()))})),An=[{name:"dataProps",propType:"section"},{name:"datasetId",propType:"number"},{name:"requestType",propType:"metadata",metadataField:"requestTypes",metadataPropType:"dropdown"},{name:"categories",propType:"metadata",metadataField:"dimensions",metadataPropType:"treeDropdown"},{name:"seriesName",propType:"metadata",metadataField:"dimensions",metadataPropType:"treeDropdown"},{name:"filterName",propType:"metadata",metadataField:"dimensions",metadataPropType:"treeDropdown"}],In=(a(593),a(642)),Fn=a.n(In),Ln=(kt((function(e){console.log("gauge render",e.h);var t="gauge";return!0===e.selected&&(t+=" ctrl-selected"),r.a.createElement("div",{className:t},r.a.createElement("div",{className:"controlLabel"},e.data.label),r.a.createElement(na.k,{width:"100%",height:"90%"},r.a.createElement(Fn.a,{id:e.i,nrOfLevels:20,percent:e.data.percent,textColor:"black",colors:["red","gold","green"],marginInPercent:.055,style:{width:"100%"}})))})),kt((function(e){console.log("[DEBUG] render GaugeChart",e);var t=parseInt(e.maxWidth)?parseInt(e.maxWidth):300,a=e.apiData&&Array.isArray(e.apiData.data)&&e.apiData.data.length>0?parseFloat(e.apiData.data[0].value):0,o=[{value:20,color:"#e71837"},{value:60,color:"#fce903"},{value:20,color:"#106b21"}],i=o.map((function(e,t,n){var r=Object(u.a)(n).splice(0,t+1).reduce((function(e,t){return{value:e.value+t.value}})).value;return a>r-e.value&&a<=r})).findIndex((function(e){return e})),l=o.map((function(e){return e.value})).reduce((function(e,t){return e+t})),c=[{value:a},{value:0},{value:l-a}],s={startAngle:180,endAngle:0,cx:"50%",cy:e.data.label&&e.data.label.length>0?"55%":"65%"},d={innerRadius:"90%",outerRadius:"100%"},p=function(e){var n=e.cx,o=e.cy,i=e.midAngle,l=e.outerRadius,c=Math.PI/180,s=Math.sin(-c*i),u=n+l*Math.cos(-c*i),d=o+l*s;return r.a.createElement("g",null,r.a.createElement("circle",{cx:n,cy:o,r:.03*t,fill:"#666",stroke:"none"}),r.a.createElement("path",{d:"M".concat(n,",").concat(o,"L").concat(u,",").concat(d),strokeWidth:"6",stroke:"#666",fill:"none",strokeLinecap:"round"}),r.a.createElement("text",{x:n,y:o+t/8,textAnchor:"middle",fontSize:t/13},a,"%"))},m=function(e){var t=e.cx,a=e.cy,n=e.innerRadius,o=e.outerRadius,i=e.startAngle,l=e.endAngle,c=e.fill;return r.a.createElement("g",null,r.a.createElement(na.l,{cx:t,cy:a,innerRadius:n,outerRadius:1*o,startAngle:i,endAngle:l,fill:c}))},h=function(){return r.a.createElement(na.i,Object.assign({activeIndex:i,activeShape:m,data:o,fill:"#8884d8",isAnimationActive:!1,dataKey:"value"},d,s),o.map((function(e,t){return r.a.createElement(na.d,{key:"cell-".concat(t),fill:o[t].color})})))},g=function(){return r.a.createElement(na.i,Object.assign({stroke:"none",activeIndex:1,activeShape:p,data:c,outerRadius:d.outerRadius,fill:"none",dataKey:"value",isAnimationActive:!1},s))},f="reChartContainer ";e.selected&&(f+="ctrl-selected");var y=Object(n.useRef)(),v=Object(n.useState)({height:0,width:0}),b=Object(Ct.a)(v,2),E=b[0],C=b[1];return Object(n.useEffect)((function(){if(console.log("[DEBUG] useEffect gauge",y),y&&y.current&&y.current.getClientRects()){var e=y.current.getClientRects()[0];e&&C({height:e.height,width:e.width})}}),[]),r.a.createElement("div",{className:f,ref:y},e.data.label&&e.data.label.length>0&&r.a.createElement("div",{className:"controlLabel"},e.data.label),e.reportMode?r.a.createElement(na.j,{margin:{top:0,right:0,left:0,bottom:0},height:E.height,width:E.width},h(),g()):r.a.createElement(na.k,{width:"100%",height:"100%"},r.a.createElement(na.j,{margin:{top:0,right:0,left:0,bottom:0}},h(),g())))}))),Rn=[{name:"dataProps",propType:"section"},{name:"datasetId",propType:"number",toolTip:"Put the same datasetId for all controls that are linked. When a filter is applied in one control, other linked controls will also be filtered."},{name:"requestType",propType:"metadata",metadataField:"requestTypes",metadataPropType:"dropdown"},{name:"groupings",propType:"metadata",metadataField:"dimensions",metadataPropType:"treeDropdown",multiple:!0},{name:"filtersList",propType:"dynamicFilter",metadataField:"dimensions",metadataPropType:"treeDropdown",multiple:!0,toolTip:"Select one or more filters by clicking the Add Parameter button"}],Mn=a(328),Vn=function(e){function t(e){var a;return Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).state={resizingControlId:null},a.onMouseLeave=a.onMouseLeave.bind(Object(nt.a)(a)),a.onMouseMove=a.onMouseMove.bind(Object(nt.a)(a)),a.onResizerMouseDown=a.onResizerMouseDown.bind(Object(nt.a)(a)),a.onMouseUp=a.onMouseUp.bind(Object(nt.a)(a)),a.onDropControl=a.onDropControl.bind(Object(nt.a)(a)),a.checkDroppable=a.checkDroppable.bind(Object(nt.a)(a)),a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"onMouseMove",value:function(e,t){if(null!=this.state.resizingControlId){var a=this.findControlDomById(this.state.resizingControlId);if(null!==a){var n=a.container.getClientRects()[0],r=e.touches?e.touches[0].clientY-n.bottom:e.clientY-n.bottom,o=e.touches?e.touches[0].clientX-n.right:e.clientX-n.right;a.container.classList.contains("resizingControl")||(a.container.classList.add("resizingControl"),a.content.classList.add("resizingContent")),a.placeholder.style.height="".concat(this.state.origHeight-2,"px"),a.placeholder.style.width="".concat(this.state.origWidth-2,"px"),a.content.style.width="".concat(n.width+o,"px"),a.content.style.height="".concat(n.height+r,"px");var i=a.content.getClientRects()[0];this.checkOverlaps(this.state.resizingControlId,i,t),this.checkLandingPadOverlap(this.state.resizingControlId,n,i)}}}},{key:"checkLandingPadOverlap",value:function(e,t,a){var n=this;this.findLandingPadsByParentControl(e).forEach((function(e){var t=e.getClientRects()[0];n.hasOverlap(a,t)?e.classList.add("landingPadPotentialDrop"):e.classList.contains("landingPadPotentialDrop")&&e.classList.remove("landingPadPotentialDrop")}))}},{key:"removeAllLandingPadPotentialDrops",value:function(){var e=document.getElementsByClassName("landingPadPotentialDrop");for(e.length;e.length>0;){e[0].classList.remove("landingPadPotentialDrop")}}},{key:"findLandingPadsByParentControl",value:function(e){var t='[parentctrlid="ctrl'.concat(e,'"]');return document.querySelectorAll(t)}},{key:"hasOverlapComplicated",value:function(e,t){var a=t.right<e.left||t.left>e.right,n=t.bot<e.top||t.top>e.bottom;return console.log("   [DEBUG] NoHorz: ".concat(a,", NoVert: ").concat(n,", FINAL: ").concat(a||n)),!a&&!n}},{key:"hasOverlap",value:function(e,t){return!(t.right<e.left||t.left>e.right)&&!(t.bottom<e.top||t.top>e.bottom)}},{key:"hasOverlapStrict",value:function(e,t){return!(t.right<=e.left||t.left>=e.right)&&!(t.bottom<=e.top||t.top>=e.bottom)}},{key:"checkOverlaps",value:function(e,t,a){var n=this,r=!1,o=[];a.forEach((function(a){if(e!==a){var i=n.findControlDomById(a);if(null!==i){var l=i.container.getClientRects()[0];n.hasOverlap(t,l)?(i.container.classList.add("potentialResizeDrop"),o.push(i),(i.container.dataset.controltype||parseInt(i.container.dataset.layoutw)>1||parseInt(i.container.dataset.layouth)>1)&&(r=!0)):i.container.classList.contains("potentialResizeDrop")&&(i.container.classList.remove("potentialResizeDrop"),i.container.classList.remove("potentialResizeDrop-invalid"))}}})),r?o.forEach((function(e){e.container.classList.add("potentialResizeDrop-invalid")})):o.forEach((function(e){e.container.classList.remove("potentialResizeDrop-invalid")}))}},{key:"onMouseLeave",value:function(e,t){this.state.resizingControlId&&(console.log("onMouseLeave while resizing"),this.clearAllTemporaryClasses(t),this.setState({resizingControlId:null,origHeight:null,origWidth:null}))}},{key:"onResizerMouseDown",value:function(e,t){console.log("mouse down resizer...",t,e);var a=this.findControlDomById(t);this.setState({resizingControlId:t,origHeight:a.container.getClientRects()[0].height,origWidth:a.container.getClientRects()[0].width})}},{key:"clearAllTemporaryClasses",value:function(e){var t=this;e.forEach((function(e){var a=t.findControlDomById(e);null!==a&&(a.container.classList.remove("potentialResizeDrop"),a.container.classList.remove("potentialResizeDrop-invalid"),a.container.classList.remove("controlPotentialDrop"),e===t.state.resizingControlId&&(a.container.classList.remove("resizingControl"),a.content.classList.remove("resizingContent"),a.content.style.height=a.container.style.height,a.content.style.width=a.container.style.width),a.placeholder.style.height=null,a.placeholder.style.width=null)}))}},{key:"onMouseUp",value:function(e,t){if(this.state.resizingControlId){if(console.log("mouseup while resizing"),document.getElementById("noobForm").getElementsByClassName("potentialResizeDrop-invalid").length>0)return console.log("hasInvalidOverlaps...cancelling resize operation"),this.clearAllTemporaryClasses(t),void this.setState({resizingControlId:null});var a=this.calculateNewSize(this.state.resizingControlId);if(this.clearAllTemporaryClasses(t),this.setState({resizingControlId:null}),a){var n=this.findControlPojo(this.state.resizingControlId);if(n)n.w=a.w,n.h=a.h,this.props.updateLayout([n]);else{var r=document.getElementById("ctrl"+this.state.resizingControlId);this.props.updateLayout([{i:this.state.resizingControlId,x:parseInt(r.dataset.layoutx),y:parseInt(r.dataset.layouty),w:a.w,h:a.h}])}}}else this.clearAllTemporaryClasses(t)}},{key:"findControlPojo",value:function(e){if(!this||!this.props||!this.props.controls)return console.log("findControlPojo: props is empty"),null;var t=this.props.controls.find((function(t){return t.i===e}));return t||console.log("findControlPojo: did not find the control with ID",e),t}},{key:"findPotentialDrops",value:function(){var e=[];return e.push.apply(e,Object(u.a)(Array.from(document.getElementsByClassName("potentialResizeDrop")))),e.push.apply(e,Object(u.a)(Array.from(document.getElementsByClassName("landingPadPotentialDrop")))),e}},{key:"calculateNewSize",value:function(e){if(null===e)return null;console.log("[DEBUG][calculateNewSize]"+e);var t=this.findControlDomById(e),a=this.findPotentialDrops();if(!a||!t||0===a.length)return console.log("[DEBUG][calculateNewSize] Cannot find potential drops. Maybe the control was not resized"),null;for(var n=0,r=0,o=0;o<a.length;o++){var i=a[o],l=parseInt(i.dataset.layoutx),c=parseInt(i.dataset.layouty);l&&l>n&&(n=l),c&&c>r&&(r=c)}return{w:n-t.container.dataset.layoutx+1,h:r-t.container.dataset.layouty+1}}},{key:"findControlDomById",value:function(e){var t={},a='[id="ctrl'.concat(e,'"]'),n=document.querySelectorAll(a);return 1!==n.length?null:(t.container=n[0],t.landingPad=t.container.firstChild,t.content=t.landingPad.nextSibling,t.placeholder=t.content.nextSibling,t.resizer=t.placeholder.nextSibling,t)}},{key:"createEmptyControl",value:function(e,t,a){return{w:1,h:1,i:a,x:e,y:t}}},{key:"checkDroppable",value:function(e,t,a){return t.type==ir.CONTROL?a?this.checkDroppableControlLandingPad(e,t,a):this.checkDroppableControl(e,t):this.checkDroppableToolItem(e,t)}},{key:"checkDroppableControlLandingPad",value:function(e,t,a){var n=!0,r=a.layoutPos["data-layoutx"],o=a.layoutPos["data-layouty"],i=this.findLandingPadsByParentControl(e.i),l=this.findCoveredLandingPads(i,r,o),c=this.findCoveredControls(r,o,e);0===c.length&&(n=!1),i.forEach((function(e){l.indexOf(e)<0?(e.classList.remove("landingPadPotentialDrop"),e.classList.remove("potentialResizeDrop-invalid")):n?(e.classList.remove("potentialResizeDrop-invalid"),e.classList.add("landingPadPotentialDrop")):e.classList.add("potentialResizeDrop-invalid")})),c.forEach((function(e){e.classList.add("controlPotentialDrop")}));var s=document.getElementById("noobForm").getElementsByClassName("controlPotentialDrop");return this.removePreviousPotentialDrops(s,c),n}},{key:"findCoveredControls",value:function(e,t,a){for(var n=[],r=e-a.x,o=t-a.y,i=document.getElementById("noobForm"),l=0;l<r;l++)for(var c=0;c<a.h;c++){var s=i.querySelector('div[data-layouty="'.concat(c+t,'"][data-layoutx="').concat(l+a.w+a.x,'"]'));if(!s||s.dataset.controltype)return[];n.push(s)}for(var u=0;u<o;u++)for(var d=0;d<a.w;d++){var p=i.querySelector('div[data-layouty="'.concat(u+a.h+a.y,'"][data-layoutx="').concat(d+e,'"]'));if(!p||p.dataset.controltype)return[];n.push(p)}return n}},{key:"findCoveredLandingPads",value:function(e,t,a){for(var n=[],r=0;r<e.length;r++){var o=e[r];o.dataset.layoutx>=t&&o.dataset.layouty>=a&&n.push(o)}return n}},{key:"checkDroppableControl",value:function(e,t){if(e.i===t.i)return this.clearAllTemporaryClasses([e.i]),!1;var a=!0;t.i===e.i||!e.ctrlType||t.w===e.w&&t.h===e.h||(a=!1,console.log("checkDroppableControl: false agad",e.i));var n=a?this.getPotentialDropsForMoving(e,t):[];a=n.length>0,n.forEach((function(e){e.classList.add("controlPotentialDrop")}));var r=document.getElementById("noobForm").getElementsByClassName("controlPotentialDrop");return this.removePreviousPotentialDrops(r,n),a}},{key:"checkDroppableToolItem",value:function(e,t){var a=!e.ctrlType,n=t.minH?t.minH:1,r=t.minW?t.minW:1,o=a?this.getPotentialDropsForNewItem(e,r,n):[];o.forEach((function(e){e.classList.add("controlPotentialDrop")})),a=o.length>0;var i=document.getElementById("noobForm").getElementsByClassName("controlPotentialDrop");return this.removePreviousPotentialDrops(i,o),a}},{key:"getPotentialDropsForNewItem",value:function(e,t,a){var n=document.getElementById("noobForm");if(e.w===t&&e.h===a)return[document.getElementById("ctrl"+e.i)];for(var r=[],o=t-1;o>=0;o--)for(var i=a-1;i>=0;i--){var l=n.querySelector('div[data-layouty="'.concat(i+e.y,'"][data-layoutx="').concat(o+e.x,'"]'));if(!l)return[];r.push(l)}return r}},{key:"getPotentialDropsForMoving",value:function(e,t){var a=document.getElementById("noobForm");if(e.w===t.w&&e.h===t.h)return[document.getElementById("ctrl"+e.i)];for(var n={top:t.y,bottom:t.y+t.h,left:t.x,right:t.x+t.w},r=[],o=!1,i=t.w-1;i>=0;i--)for(var l=t.h-1;l>=0;l--){var c={top:e.y+l,bottom:e.y+l+1,left:e.x+i,right:e.x+i+1};if(this.hasOverlapStrict(c,n)){if(!o){var s=document.getElementById("ctrl"+t.i);r.push(s),o=!0}}else{var u=a.querySelector('div[data-layouty="'.concat(l+e.y,'"][data-layoutx="').concat(i+e.x,'"]'));if(!u||u.dataset.controltype)return[];r.push(u)}}return r}},{key:"removePreviousPotentialDrops",value:function(e,t){for(var a=0;a<e.length;a++){var n=e[a];t.indexOf(n)>=0||n.classList.remove("controlPotentialDrop")}}},{key:"onDropControl",value:function(e,t,a){"toolItem"===t.type?this.handleToolItemDrop(e,t):a?this.handleControlMoveWithLandingPad(e,t,a):this.handleControlMove(e,t),this.clearAllTemporaryClasses([e.i,t.i])}},{key:"handleControlMoveWithLandingPad",value:function(e,t,a){console.log("handleControlMoveWithLandingPad",e,t,a);var n=a["data-layoutx"],r=a["data-layouty"],o=Object(d.a)({},e,{x:n,y:r});this.props.updateLayout([o])}},{key:"handleToolItemDrop",value:function(e,t){console.log("handleToolItemDrop",e,t);var a=new Date;this.props.updateLayout([{i:e.i+a.toString(),ctrlType:t.toolItemTypeName,x:e.x,y:e.y,w:t.minW?t.minW:1,h:t.minH?t.minH:1}])}},{key:"handleControlMove",value:function(e,t){console.log("handleControlDrop",e,t);var a=[],n=Object(d.a)({},t,{x:e.x,y:e.y});if(a.push(n),e.ctrlType){var r=Object(d.a)({},e,{x:t.x,y:t.y});a.push(r)}this.props.updateLayout(a)}},{key:"renderControl",value:function(e,t,a){return r.a.createElement(qn,{key:"ctrl"+e.i,controlData:Object(d.a)({},e),parentDropCallback:this.onDropControl,resizerMouseDown:this.onResizerMouseDown,resizingControlId:this.state.resizingControlId,parentCheckDroppable:this.checkDroppable,isSelected:!1,containerWidth:t,numCols:a})}},{key:"getFills",value:function(e,t){for(var a=[],n=0;n<e.h;n++)for(var r=0;r<e.w;r++){var o=r+e.x,i=n+e.y;a.push(i*t+o)}return a}},{key:"renderControlsWithLayout",value:function(e,t,a){for(var n=this,r=[],o=[],i=0;i<e.rows;i++)for(var l=function(){var l=i*e.columns+c;if(o.find((function(e){return e===l})))return"continue";var s=t.find((function(e){return e.x==c&&e.y==i}));if(s){console.log("renderControlsWithLayout",s.i,s.x,s.y,s.w,s.h);var u=n.renderControl(s,a,e.columns);r.push({id:s.i,jsx:u});var d=n.getFills(s,e.columns);o=o.concat(d)}else{var p=n.createEmptyControl(c,i,l),m=n.renderControl(p,a,e.columns);r.push({id:p.i,jsx:m})}},c=0;c<e.columns;c++)l();return r}},{key:"renderControlsAsSingleCol",value:function(e,t,a){for(var n=[],r=0;r<e.rows;r++)for(var o=0;o<e.columns;o++){e.columns;var i=t.find((function(e){return e.x==o&&e.y==r}));if(i){var l=this.renderControl(i,a,1);n.push({id:i.i,jsx:l})}}return n}},{key:"renderControls",value:function(e,t,a){return a>600?this.renderControlsWithLayout(e,t,a):this.renderControlsAsSingleCol(e,t,a)}},{key:"render",value:function(){var e=this;console.log("render NoobForm...",this.props.selectedPage);var t=this.props,a=t.controls,n=t.layoutData,o=this.renderControls(n,a,this.props.containerWidth),i=o.map((function(e){return e.id})),l=o.map((function(e){return e.jsx})),c=this.props.containerWidth>600?{gridTemplateColumns:"repeat(".concat(n.columns,", 1fr)")}:{gridTemplateColumns:"1fr"},s="noobForm ";return this.props.selectedPage&&(s+="page-selected"),r.a.createElement("div",{id:"noobForm",className:s,onMouseLeave:function(t){e.onMouseLeave(t,i)},onMouseUp:function(t){e.onMouseUp(t,i)},onTouchEnd:function(t){e.onMouseUp(t,i)},onMouseMove:function(t){e.onMouseMove(t,i)},onTouchMove:function(t){e.onMouseMove(t,i)},style:c},l)}}]),t}(r.a.Component),zn=Object(c.b)((function(e){return{selectedPage:e.designer.pageSelected}}),(function(e){return Object(l.b)({updateLayout:ae},e)}))(Vn),Hn=a(1254);var Wn=function(e,t){try{return!!e.canDrop()}catch(a){console.log("[collect] canDrop landingPad exception for (note: this exception is expected)",t,"exception:",a.name,a.message)}return!1},Bn=function(e){var t=e.domParentCtrlId,a=e.layoutPos,n=e.keyLandingPad,o=e.canDropParentCallback,i=e.dropParentCallback,l=Object(Hn.a)({accept:[ir.CONTROL],canDrop:function(e,t){return function(e,t,a,n,r){return!!t.isOver()&&r(e,{key:a,layoutPos:n})}(e,t,n,a,o)},drop:function(e){return i(e,a)},collect:function(e){return{isOver:!!e.isOver({shallow:!0}),canDrop:Wn(e,n)}}}),c=Object(Ct.a)(l,2),s=c[0],u=s.isOver,d=s.canDrop,p=c[1],m={};return u&&(d||(m.backgroundColor="red")),r.a.createElement("div",Object.assign({className:"landingPadCell",parentctrlid:t,key:n,ref:p,style:m},a))},Gn=function(e){var t=e.controlData,a=e.resizingControlId,n=e.droppingItemType,o=e.droppingItem,i=e.noobControlCanDropCallback,l=e.noobControlDropCallback;if(a!==t.i&&n!==ir.CONTROL)return null;if(n===ir.CONTROL&&t.i!==o.i)return null;console.log("renderLandingPads for ",t);var c={gridTemplateColumns:"repeat(".concat(t.w,", 1fr)"),gridTemplateRows:"repeat(".concat(t.h,", 1fr)")};return r.a.createElement("div",{className:"landingPadContainer",style:c},function(e,t,a){for(var n=[],o=0;o<e.h;o++)for(var i=0;i<e.w;i++){var l={"data-layoutx":i+e.x,"data-layouty":o+e.y};n.push(r.a.createElement(Bn,{domParentCtrlId:"ctrl"+e.i,layoutPos:l,key:"landingpadcontainer"+(o*e.w+i),keyLandingPad:"landingpad"+(o*e.w+i),canDropParentCallback:t,dropParentCallback:a}))}return n}(t,i,l))},_n=a(1248),Un=(a(1137),{}),Kn=function(e){function t(){return Object(Ze.a)(this,t),Object(et.a)(this,Object(tt.a)(t).apply(this,arguments))}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){var e=this.props.controlInfo;return r.a.createElement(_n.a,{closeIcon:!0,closeOnDimmerClick:!0,trigger:r.a.createElement("i",{className:"ui icon cog editBtn",style:Un})},r.a.createElement(_n.a.Header,null,"Edit Control Dialog for ",e.i),r.a.createElement(_n.a.Content,null,r.a.createElement(_n.a.Description,null,r.a.createElement(Qa.a,null,"Under Construction..."),r.a.createElement("p",null,"Will be available soon"))))}}]),t}(r.a.Component),qn=Object(c.b)((function(e,t){var a=t.controlData.i,n=e.designer&&e.designer.layout&&e.designer.layout.find((function(e){return e.i===a}));return n?{controlData:n}:{}}),(function(e){return Object(l.b)({selectedControl:ee},e)}))((function(e){var t=e.controlData,a=e.resizerMouseDown,n=e.resizingControlId,o=e.parentCheckDroppable,i=e.parentDropCallback,l=e.selectedControl,c=e.containerWidth,s=e.numCols,u=Object(Hn.a)({accept:[ua,ir.CONTROL],canDrop:function(e,a){return function(e,t,a,n){return!!a.isOver({shallow:!0})&&n(e,t)}(t,e,a,o)},drop:function(e){return i(t,e)},collect:function(e){return{isOverShallow:!!e.isOver({shallow:!0}),canDrop:!!e.canDrop(),droppingItemType:e.isOver()?e.getItemType():null,droppingItem:e.isOver()?e.getItem():null}}}),d=Object(Ct.a)(u,2),p=d[0],m=p.isOverShallow,h=p.canDrop,g=p.droppingItemType,f=p.droppingItem,y=d[1],v={minHeight:40*t.h};if(s>1){var b=(c-20)*t.w/12-5;v.gridRowEnd="span "+t.h,v.gridColumnEnd="span "+t.w,document.URL.toLowerCase().includes("reporting")||(v.maxWidth="".concat(b,"px"))}else v.maxWidth="".concat(c-20-5,"px");m&&!h&&(v.backgroundColor="pink");var E,C,k={"data-layoutx":t.x,"data-layouty":t.y,"data-layouth":t.h,"data-layoutw":t.w,"data-controltype":t.ctrlType},O="ctrl"+t.i;return console.log("render NoobControl",t.i,v.maxWidth,"containerWidth",c),r.a.createElement("div",Object.assign({id:O,className:"noobControl",style:v,ref:y,onMouseUp:function(){console.log("onMouseUp control level")}},k),r.a.createElement(Gn,{controlData:t,resizingControlId:n,droppingItemType:g,droppingItem:f,noobControlCanDropCallback:function(e,a){return o(t,e,a)},noobControlDropCallback:function(e,a){i(t,e,a)}}),r.a.createElement(cr,Object.assign({controlSelected:function(){return l(t.i)}},t,{maxWidth:v.maxWidth})),r.a.createElement("div",{className:"resizePlaceholder"}),(E=t.i,C=a,r.a.createElement("div",{className:"resizer",id:"ctrlResizer"+E,onMouseDown:function(e){C(e,E),e.preventDefault()},onTouchStart:function(e){C(e,E),e.preventDefault()}})))}));function Jn(e){var t=Object(n.useRef)(),a=Object(n.useRef)(),o=Object(n.useRef)();Object(n.useEffect)((function(){var t=new MutationObserver((function(t,n){e.textChangeHandler(a.current.innerText)}));return t.observe(a.current,{characterData:!0,attributes:!0,childList:!0,subtree:!0}),function(){t.disconnect()}}),[]),Object(n.useEffect)((function(){o.current=e.donut?new Mn.Donut(t.current):new Mn.Gauge(t.current),o.current.setTextField(a.current),o.current.setOptions(e.options),o.current.maxValue=e.maxValue,o.current.setMinValue(e.minValue),o.current.animationSpeed=e.animationSpeed,o.current.set(e.value)}),[e.donut]),Object(n.useEffect)((function(){o.current.setOptions(e.options)}),[e.options]),Object(n.useEffect)((function(){o.current.maxValue=e.maxValue}),[e.maxValue]),Object(n.useEffect)((function(){o.current.setMinValue(e.minValue)}),[e.minValue]),Object(n.useEffect)((function(){o.current.animationSpeed=e.animationSpeed}),[e.animationSpeed]),Object(n.useEffect)((function(){o.current.set(e.data.percent);var t=new Mn.TextRenderer(a.current);t.render=function(e){var t=e.displayedValue/e.maxValue;this.el.innerHTML=(100*t).toFixed(2)+"%"},o.current.setTextField(t)}),[e.data.percent]);e.maxValue,e.minValue,e.animationSpeed,e.options,e.donut,e.value,e.textChangeHandler,Object(k.a)(e,["maxValue","minValue","animationSpeed","options","donut","value","textChangeHandler"]);var i="gauge";!0===e.selected&&(i+=" ctrl-selected");var l=40*e.h-50,c=2*l;if(e.maxWidth){var s=parseInt(e.maxWidth);c>s&&(l=(c=s)/2)}var u="".concat(l,"px"),d="".concat(2*l,"px");return r.a.createElement("div",{className:i},r.a.createElement("div",{className:"controlLabel"},e.data.label),r.a.createElement("div",{className:"gauge-svgContainer"},r.a.createElement("div",{className:"gauge-svgContainer2"},r.a.createElement("canvas",{ref:t,style:{width:d,height:u},className:"canvas-preview"}),r.a.createElement("div",{ref:a,className:"preview-textfield gauge-label"}))))}Jn.defaultProps={maxValue:100,minValue:0,animationSpeed:1e5,options:{angle:0,lineWidth:.15,radiusScale:.9,pointer:{length:.5,strokeWidth:.05,color:"black"},limitMax:!1,limitMin:!1,strokeColor:"#ff0000",generateGradient:!0,highDpiSupport:!0,staticZones:[{strokeStyle:"red",min:0,max:20},{strokeStyle:"gold",min:20,max:80},{strokeStyle:"green",min:80,max:100}],staticLabels:{font:"15px",labels:[0,20,80,100],color:"#000000",fractionDigits:0},fractionDigits:2},donut:!1,textChangeHandler:function(){},value:85.5};kt(Jn);var Yn=kt((function(e){var t=!0===e.selected?"ctrl-selected":"";return r.a.createElement("div",{style:{width:"100%",height:"100%",backgroundColor:"lightyellow"},className:t})})),Xn=a(329),$n=a.n(Xn),Zn=function(e){function t(e){var a;Object(Ze.a)(this,t),a=Object(et.a)(this,Object(tt.a)(t).call(this,e)),["drawrect","drawcircle","drawpoly","initCanvas","renderPrefilledAreas"].forEach((function(e){return a[e]=a[e].bind(Object(nt.a)(a))}));var n={position:"absolute",top:0,left:0};return a.styles={container:{position:"relative"},canvas:Object(d.a)({},n,{pointerEvents:"none",zIndex:2}),img:Object(d.a)({},n,{zIndex:1,userSelect:"none"}),map:e.onClick&&{cursor:"pointer"}||void 0},a.watchedProps=["active","fillColor","height","imgWidth","lineWidth","src","strokeColor","width"],a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=this,a=this.watchedProps.some((function(a){return t.props[a]!==e[a]}));return!$n()(this.props.map,this.state.map)||a||!$n()(this.props.map.name,e.map.name)||!$n()(this.props.map.areas,e.map.areas)}},{key:"componentWillMount",value:function(){this.updateCacheMap()}},{key:"updateCacheMap",value:function(){this.setState({map:JSON.parse(JSON.stringify(this.props.map))},this.initCanvas)}},{key:"componentDidUpdate",value:function(){this.updateCacheMap(),this.initCanvas()}},{key:"drawrect",value:function(e,t,a,n){var r=Object(Ct.a)(e,4),o=r[0],i=r[1],l=r[2],c=r[3];this.ctx.fillStyle=t,this.ctx.lineWidth=a,this.ctx.strokeStyle=n,this.ctx.strokeRect(o,i,l-o,c-i),this.ctx.fillRect(o,i,l-o,c-i),this.ctx.fillStyle=this.props.fillColor}},{key:"drawcircle",value:function(e,t,a,n){this.ctx.fillStyle=t,this.ctx.beginPath(),this.ctx.lineWidth=a,this.ctx.strokeStyle=n,this.ctx.arc(e[0],e[1],e[2],0,2*Math.PI),this.ctx.closePath(),this.ctx.stroke(),this.ctx.fill(),this.ctx.fillStyle=this.props.fillColor}},{key:"drawpoly",value:function(e,t,a,n){var r=this;e=e.reduce((function(e,t,a,n){return a%2?e:[].concat(Object(u.a)(e),[n.slice(a,a+2)])}),[]),this.ctx.fillStyle=t,this.ctx.beginPath(),this.ctx.lineWidth=a,this.ctx.strokeStyle=n;var o=e.unshift();this.ctx.moveTo(o[0],o[1]),e.forEach((function(e){return r.ctx.lineTo(e[0],e[1])})),this.ctx.closePath(),this.ctx.stroke(),this.ctx.fill(),this.ctx.fillStyle=this.props.fillColor}},{key:"initCanvas",value:function(){this.props.width&&(this.img.width=this.props.width),this.props.height&&(this.img.height=this.props.height),this.canvas.width=this.props.width||this.img.clientWidth,this.canvas.height=this.props.height||this.img.clientHeight,this.container.style.width=(this.props.width||this.img.clientWidth)+"px",this.container.style.height=(this.props.height||this.img.clientHeight)+"px",this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle=this.props.fillColor,this.props.onLoad&&this.props.onLoad(),this.renderPrefilledAreas()}},{key:"hoverOn",value:function(e,t,a){var n=a.target.getAttribute("shape");this.props.active&&this["draw"+n]&&this["draw"+n](a.target.getAttribute("coords").split(","),e.fillColor,e.lineWidth||this.props.lineWidth,e.strokeColor||this.props.strokeColor),this.props.onMouseEnter&&this.props.onMouseEnter(e,t,a)}},{key:"hoverOff",value:function(e,t,a){this.props.active&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderPrefilledAreas()),this.props.onMouseLeave&&this.props.onMouseLeave(e,t,a)}},{key:"click",value:function(e,t,a){this.props.onClick&&(a.preventDefault(),this.props.onClick(e,t,a))}},{key:"imageClick",value:function(e){this.props.onImageClick&&(e.preventDefault(),this.props.onImageClick(e))}},{key:"mouseMove",value:function(e,t,a){this.props.onMouseMove&&this.props.onMouseMove(e,t,a)}},{key:"imageMouseMove",value:function(e,t,a){this.props.onImageMouseMove&&this.props.onImageMouseMove(e,t,a)}},{key:"scaleCoords",value:function(e){var t=this.props,a=t.imgWidth,n=t.width,r=n&&a&&a>0?n/a:1;return e.map((function(e){return e*r}))}},{key:"renderPrefilledAreas",value:function(){var e=this;this.state.map.areas.map((function(t){t.preFillColor&&e["draw"+t.shape](e.scaleCoords(t.coords),t.preFillColor,t.lineWidth||e.props.lineWidth,t.strokeColor||e.props.strokeColor)}))}},{key:"computeCenter",value:function(e){if(!e)return[0,0];var t=this.scaleCoords(e.coords);switch(e.shape){case"circle":return[t[0],t[1]];case"poly":case"rect":default:var a=t.length/2,n=t.reduce((function(e,t,n){var r=e.y,o=e.x;return n%2?{y:r+t/a,x:o}:{y:r,x:o+t/a}}),{y:0,x:0}),r=n.y;return[n.x,r]}}},{key:"renderAreas",value:function(){var e=this;return this.state.map.areas.map((function(t,a){var n=e.scaleCoords(t.coords),o=e.computeCenter(t),i=Object(d.a)({},t,{scaledCoords:n,center:o});return r.a.createElement("area",{key:t._id||a,shape:t.shape,coords:n.join(","),onMouseOver:e.hoverOn.bind(e,i,a),onMouseOut:e.hoverOff.bind(e,i,a),onMouseMove:e.mouseMove.bind(e,i,a),onClick:e.click.bind(e,i,a),href:t.href})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:this.styles.container,ref:function(t){return e.container=t}},r.a.createElement("img",{style:this.styles.img,src:this.props.src,useMap:"#".concat(this.state.map.name),alt:"",ref:function(t){return e.img=t},onLoad:this.initCanvas,onClick:this.imageClick.bind(this),onMouseMove:this.imageMouseMove.bind(this)}),r.a.createElement("canvas",{ref:function(t){return e.canvas=t},style:this.styles.canvas}),r.a.createElement("map",{name:this.state.map.name,style:this.styles.map},this.renderAreas()))}}]),t}(n.Component);Zn.defaultProps={active:!0,fillColor:"rgba(255, 255, 255, 0.5)",lineWidth:1,map:{areas:[],name:"image-map-"+Math.random()},strokeColor:"rgba(0, 0, 0, 0.5)"};a(1181);var Qn={name:"myMap",areas:[{name:"Room 1",shape:"circle",coords:[170,20,15],preFillColor:"blue"},{name:"Room 2",shape:"circle",coords:[400,120,15],preFillColor:"#ffcf0c"},{name:"Room 3",shape:"circle",coords:[70,100,15],preFillColor:"green"}]},er={name:"myMap2",areas:[{name:"Room A",shape:"circle",coords:[140,20,15],preFillColor:"red"},{name:"Room B",shape:"circle",coords:[200,150,15],preFillColor:"#ffcf0c"},{name:"Room C",shape:"circle",coords:[90,120,15],preFillColor:"magenta"},{name:"Room D",shape:"circle",coords:[40,180,15],preFillColor:"cyan"},{name:"Room E",shape:"circle",coords:[390,25,15],preFillColor:"orange"},{name:"Room F",shape:"circle",coords:[380,190,15],preFillColor:"maroon"}]},tr=kt(function(e){function t(e){var a;return Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).state={imageLoaded:!1,scaledImgW:null,scaledImgH:null,hoveredArea:null},a.imageLoadHandler=a.imageLoadHandler.bind(Object(nt.a)(a)),a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"imageLoadHandler",value:function(e){var t=e.srcElement.width,a=e.srcElement.height;this.props.maxWidth,this.setState({imageLoaded:!0,origImgW:t,origImgH:a})}},{key:"componentDidMount",value:function(){var e=new Image;e.onload=this.imageLoadHandler,e.src=this.getImageUrl()}},{key:"enterArea",value:function(e){console.log("enterArea",e),this.setState({hoveredArea:e})}},{key:"leaveArea",value:function(e){this.setState({hoveredArea:null})}},{key:"getTipPosition",value:function(e){return console.log("[getTipPosition]",e.center[1],e.center[0]),{top:"".concat(e.center[1],"px"),left:"".concat(e.center[0],"px")}}},{key:"computeWidthHeight",value:function(e,t,a){if(a){var n=parseFloat(a)-5;return{w:n,h:n/e*t}}return{w:e,h:t}}},{key:"getImageUrl",value:function(){return this.props.data&&this.props.data.imageProps&&this.props.data.imageProps.image?"".concat(v(),"/files/").concat(this.props.data.imageProps.image):"layout.gif"}},{key:"getMapToUse",value:function(){return this.props.data&&this.props.data.imageProps&&this.props.data.imageProps.image?this.props.data&&this.props.data.imageProps&&this.props.data.imageProps.map:this.props.useOther?er:Qn}},{key:"getLastGroupingItem",value:function(){return this.props&&this.props.data&&this.props.data.dataProps&&Array.isArray(this.props.data.dataProps.groupings)&&0!==this.props.data.dataProps.groupings.length?this.props.data.dataProps.groupings[this.props.data.dataProps.groupings.length-1]:null}},{key:"getTooltip",value:function(e){var t=this.getLastGroupingItem();if(!this.props.apiData||!this.props.apiData.data||!t)return e;var a=this.props.apiData.data.find((function(a){return a[t]===e}));if(!a)return e;var n=[];for(var r in a)r===t?n.push("".concat(r,": ").concat(a[r])):"value"===r&&n.push("KPI Score: ".concat(a[r]));return n.join(", ")}},{key:"render",value:function(){var e=this,t=this.getImageUrl(),a=this.getMapToUse();if(!this.state.imageLoaded)return r.a.createElement("div",null,"Loading Image...");var n=!0===this.props.selected?"ctrl-selected":"",o=this.computeWidthHeight(this.state.origImgW,this.state.origImgH,this.props.maxWidth);return console.log("[ImageMap] Computed W, H: ",o,"max Width: ",this.props.maxWidth,this.props.apiData),r.a.createElement("div",{style:{position:"relative"},className:n},r.a.createElement(Zn,{src:t,map:a,onMouseEnter:function(t){return e.enterArea(t)},onMouseLeave:function(t){return e.leaveArea(t)},width:o.w,height:o.h,imgWidth:this.state.origImgW}),this.state.hoveredArea&&r.a.createElement("span",{className:"imageMapToolTip",style:Object(d.a)({},this.getTipPosition(this.state.hoveredArea))},this.getTooltip(this.state.hoveredArea.name)))}}]),t}(r.a.Component)),ar=[{name:"imageProps",propType:"popupConfig",buttonName:"Configure Image...",btnOnclick:function(){console.log("configBtnOnClick")}},{name:"dataProps",propType:"section"},{name:"datasetId",propType:"number",toolTip:"Put the same datasetId for all controls that are linked. When a filter is applied in one control, other linked controls will also be filtered."},{name:"requestType",propType:"metadata",metadataField:"requestTypes",metadataPropType:"dropdown"},{name:"groupings",propType:"metadata",metadataField:"dimensions",metadataPropType:"treeDropdown",multiple:!0}],nr=kt((function(e){var t=!0===e.selected?"ctrl-selected":"",a=Object(n.useState)(new Date),o=Object(Ct.a)(a,2),i=o[0],l=o[1],c=Object(n.useState)(new Date),s=Object(Ct.a)(c,2),u=s[0],d=s[1];return r.a.createElement("div",{className:t},r.a.createElement("div",{className:"controlLabel"},e.data.label),r.a.createElement("div",{className:"datepickerGrid"},r.a.createElement("div",Object(la.a)({className:!0},"className","dateLabel"),"Start:"),r.a.createElement("div",{className:"datepickerWrapper"},r.a.createElement(Da.a,{selected:i,onChange:function(e){return l(e)},selectsStart:!0,startDate:i,endDate:u})),r.a.createElement("div",{className:"dateLabel"},"End:"),r.a.createElement("div",{className:"datepickerWrapper datepickerWrapperEnd"},r.a.createElement(Da.a,{selected:u,onChange:function(e){return d(e)},selectsEnd:!0,startDate:i,endDate:u,minDate:i}))))})),rr=(a(1182),function(e){var t="externalContainer";return!0===e.selected&&(t+=" ctrl-selected"),r.a.createElement("div",{className:t},r.a.createElement("iframe",{className:"externalContainerContent",src:e&&e.data&&e.data.url?e.data.url:"http://localhost:3000/IsaeExecSummary/ExecutiveSummary_r1.html"}))}),or=kt(rr),ir={CONTROL:"Control"},lr=function(e,t){var a=null,n=document.URL.toLowerCase().includes("reporting"),o="dashboard"!==t;switch(e.ctrlType){case"section":a=r.a.createElement(Ot,e);break;case"richtext":a=r.a.createElement(jt,e);break;case"combo":a=r.a.createElement(At,e);break;case"textbox":a=r.a.createElement(Ft,e);break;case"table":a=n?r.a.createElement(Wt,Object.assign({},e,{showFilters:!1,showPaginator:!1,showFooter:!1})):o?r.a.createElement(Bt,Object.assign({},e,{designMode:o})):r.a.createElement(Wt,Object.assign({},e,{designMode:o}));break;case"label":a=r.a.createElement(_t,e);break;case"pie":a=n?r.a.createElement(cn,e):"dashboard"===t?r.a.createElement(un,e):r.a.createElement(dn,Object.assign({},e,{designMode:!0}));break;case"barchart":a=n?r.a.createElement(En,e):r.a.createElement(Dn,Object.assign({},e,{designMode:o}));break;case"gauge":a=r.a.createElement(Ln,Object.assign({},e,{designMode:o,reportMode:n}));break;case"pagebreak":a=r.a.createElement(Yn,e);break;case void 0:a=n||"dashboard"===t?r.a.createElement("div",{className:"emptyReportControl"}):r.a.createElement("div",{className:"emptyControl"});break;case"dcbar":a=r.a.createElement(oa,e);break;case"imageMap":a=r.a.createElement(tr,Object.assign({},e,{designMode:o}));break;case"date":a=r.a.createElement(nr,e);break;case"line":a=r.a.createElement(Pn,Object.assign({},e,{designMode:o,reportMode:n}));break;case"frame":a=o?r.a.createElement(or,Object.assign({},e,{designMode:o})):r.a.createElement(rr,Object.assign({},e,{designMode:o}));break;default:a=r.a.createElement("div",null,e.i)}return a},cr=function(e){var t=Object(ia.a)({item:Object(d.a)({},e,{type:ir.CONTROL}),canDrag:!!e.ctrlType,end:function(e,t){return function(e,t){t.didDrop()||ta("Control was not moved",Zt,"Please drop the control into an empty cell, or make sure there is sufficient space for larger controls.")}(0,t)},collect:function(e){return{isDragging:!!e.isDragging()}}}),a=Object(Ct.a)(t,2),n=a[0].isDragging,o=a[1],i={opacity:n?0:1};return r.a.createElement("div",{className:"contentWrapper",ref:o,style:i},lr(e,"designMode"))},sr=a(1257),ur=a(1244),dr=Object(c.b)((function(e,t){var a=t.controlData;return a&&a.data&&a.data.dataProps?{datasetFilters:e.dashboard.chartClickFilters[a.data.dataProps.datasetId],currControlGrouping:e.dashboard.chartTempGroupings[a.i]}:{}}),(function(e){return Object(l.b)({clickChartSlice:de,selectChartGroup:pe,clickPageLink:he},e)}))((function(e){var t=e.layoutName,a=e.controlData,o=e.containerWidth,i=e.clickChartSlice,l=e.selectChartGroup,c=e.clickPageLink,s=e.datasetFilters,u=e.currControlGrouping,p=e.metadata,m=e.pageFilters,h=e.pageApiData,g=Object(n.useState)(),f=Object(Ct.a)(g,2),y=f[0],v=f[1],b=Object(n.useState)(!!a.dataProps),E=Object(Ct.a)(b,2),C=E[0],k=E[1];Object(n.useEffect)((function(){a.data&&a.data.dataProps&&Ge(a,k,v,s,u,p,m)}),[s,u,t,m]);var O=Object(d.a)({},a);O.data&&O.data.dataProps&&!C&&(O.apiData=y,O.datasetFilters=s,O.currControlGrouping=u,O.handleChartClick=function(e,t,n){return function(e,t,a,n,r){r(e,t,a,n.data.dataProps.datasetId,n.i)}(e,t,n,a,i)},O.handleGroupSelect=function(e){return function(e,t,a){a(e,t)}(e,a,l)},O.metadata=p),O.layoutName=t,h&&(O.pageApiData=h),O.data&&a.data.linkedPage&&(O.data.handleLinkClick=function(e){return function(e,t){console.log("handleLinkClick",e.i,e.data.linkedPage),t(e)}(e,c)});var S="reportControl";O.ctrlType&&(S+=" reportControl-withBorder");var D=o*a.w/12;O.w<12&&(D-=5);var x={minHeight:40*a.h};return x.gridRowEnd="span "+a.h,x.gridColumnEnd="span "+a.w,x.maxWidth="".concat(D,"px"),O.selected=!1,O.maxWidth="".concat(D,"px"),r.a.createElement("div",{className:S,style:x},C&&r.a.createElement(sr.a,{active:!0,inverted:!0},r.a.createElement(ur.a,null,"Fetching ".concat(O.ctrlType," data"))),lr(O,"dashboard"))})),pr=function(){var e=Object(h.a)(m.a.mark((function e(t,a,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,f.a.get(t).catch((function(e){console.error("Error fetching page data from url",t)}));case 3:r=e.sent,a(!1),n(r);case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),mr=function(){var e=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.a.get(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hr=["136a5d53-e9a8-4d29-a575-b90489df9f74"],gr=function(e,t){if(!e||!e.data||!t)return null;var a=t.analysisPeriod;if(!a)return null;var n=e.data.filter((function(e){return!hr.includes(e.uuid)}));n.sort((function(e,t){return new Date(e.aprStart)>new Date(e.aprEnd)}));var r=[],o=Ce(a.start),i=Ce(a.end);if(!o||!i)return null;var l=function(){var e=function(e,t){for(var a=0;a<t.length;a++){var n=t[a],r=Ce(n.aprStart);if(r&&r>=e)return n}}(o,n);if(!e)return"break";var t=Ce(e.aprEnd);if(t>i){var a=n.findIndex((function(t){return t.uuid===e.uuid}));return n.splice(a,1),"continue"}r.push(e),o=t;var l=n.findIndex((function(t){return t.uuid===e.uuid}));n.splice(l,1)};e:for(;;){switch(l()){case"break":break e;case"continue":continue}}return r},fr=function(e,t){if(!e||!Array.isArray(e.data))return null;var a=Array.isArray(t)&&t.find((function(e){return"uuid"===e.name}));return a?e.data.find((function(e){return e.uuid===a.value})):function(e){if(!Array.isArray(e))return null;var t=null,a=null;return e.forEach((function(e){if(!t)return t=e,void(a=new Date(e.aprEnd));new Date(e.aprEnd)>a&&(t=e,a=new Date(e.aprEnd))})),t}(e.data)},yr=function(e){var t=function(t,a,n){return r.a.createElement(dr,{key:"ctrl"+t.i,controlData:t,containerWidth:a,numCols:n,metadata:e.metadata,layoutName:e.layoutName,pageFilters:e.pageFilters,pageApiData:v})},a=function(e,t){for(var a=[],n=0;n<e.h;n++)for(var r=0;r<e.w;r++){var o=r+e.x,i=n+e.y;a.push(i*t+o)}return a},o=function(e,t){return!t.find((function(t){return t.i!==e.i&&!(t.y+t.h-1<e.y||t.y>e.y+e.h-1)}))},i=e.controls,l=e.layoutData,c=e.metadata,s=Object(n.useState)(),u=Object(Ct.a)(s,2),p=u[0],m=u[1],h=Object(n.useState)(l&&l.pageApiData),g=Object(Ct.a)(h,2),f=g[0],y=g[1];Object(n.useEffect)((function(){l&&l.pageApiData&&pr(l.pageApiData,y,m)}),[l&&l.pageApiData]);var v=fr(p,e.pageFilters);if(!l||!i||!c)return console.log("render ReportForm...return null beacuse layout/controls/metadata is not yet fetched"),null;console.log("render ReportForm...",l);var b=document.URL.toLowerCase().includes("reporting")?window.innerWidth-50:e.containerWidth,E=function(e,n,r){var i=[];if(!e||!e)return i;for(var l=[],c=function(e,t){for(var a=t.rows-1;a>=0;a--){var n=e.find((function(e){return e.y===a}));if(n&&"pagebreak"!==n.ctrlType)return a}return 0}(n,e),s=[],u=!1,d=!1,p=0;p<=c;p++)for(var m=function(){var c=p*e.columns+h;if(l.find((function(e){return e===c})))return"continue";d&&0===h&&(s.length>0&&i.push({groupType:"section",pageBreak:u,items:s}),s=[],d=!1,u=!0);var m=n.find((function(e){return e.x==h&&e.y==p}));if(m)if("pagebreak"===m.ctrlType){d=!0;var g=a(m,e.columns);l=l.concat(g)}else if("table"===m.ctrlType&&o(m,n)){s.length>0&&(i.push({groupType:"section",pageBreak:u,items:s}),u=!1),s=[],m.w=12;var f=t(m,r,e.columns);i.push({groupType:"table",pageBreak:u,items:[{id:m.i,jsx:f}]}),u=!1;var y=a(m,e.columns);l=l.concat(y)}else{var v=t(m,r,e.columns);s.push({id:m.i,jsx:v});var b=a(m,e.columns);l=l.concat(b)}else{var E={w:1,h:1,i:c,x:h,y:p},C=t(E,r,e.columns);s.push({id:E.i,jsx:C})}},h=0;h<e.columns;h++)m();return s.length>0&&i.push({groupType:"section",pageBreak:u,items:s}),i}(l,i,b),C={gridTemplateColumns:"repeat(".concat(l.columns,", 1fr)")};return r.a.createElement("div",{className:"reportFormsContainer",style:{maxWidth:"".concat(b,"px")}},function(e,t){return e.map((function(e,a){var n=a>0&&e.pageBreak?Object(d.a)({},t,{pageBreakBefore:"always"}):t;return r.a.createElement("div",{className:"reportForm",style:n,key:"reportForm-".concat(e,"-").concat(a)},e.items.map((function(e){return e.jsx})))}))}(E,C),f&&r.a.createElement(sr.a,{active:!0,inverted:!0},r.a.createElement(ur.a,null,"Fetching Page Data")))},vr=(a(608),function(e){var t="toolbarButton";e.disabled&&(t+=" toolbarButton-disabled");var a=e.type||null,n=e.callback||null;return r.a.createElement("button",{key:e.key,className:t,type:a,onClick:n},r.a.createElement("i",{className:"ui icon "+e.icon}),e.text)}),br=function(e){var t=e.containerWidth,a=e.menuItems,n=e.title,o=e.titleTooltip;return t>600||!t?function(e,t,a){return r.a.createElement("div",{className:"designerToolbar"},r.a.createElement("div",{className:"left"},e.left.map((function(e){return vr(e)}))),r.a.createElement("div",{className:"center"},t&&r.a.createElement("div",{className:"title"},t),a&&r.a.createElement(fa.a,{inverted:!0,basic:!0,size:"tiny",style:{opacity:"0.8"},content:a,trigger:r.a.createElement("div",{className:"infoContainer"},r.a.createElement("i",{className:"ui icon info circle"}))})),e.right&&r.a.createElement("div",{className:"rightTb"},e.right.map((function(e){return vr(e)}))))}(a,n,o):function(e,t,a){return r.a.createElement("div",{className:"designerToolbar"},r.a.createElement("div",{className:"desginerDropdown"},r.a.createElement("i",{className:"desginerDropbtn ui icon th"}),r.a.createElement("div",{className:"desginerDropdown-content"},e.left.map((function(e){return r.a.createElement("div",{key:e.key,className:"desginerDropdown-item"},r.a.createElement("i",{className:"ui icon "+e.icon}),r.a.createElement("a",null,e.text))})))),"\xa0 \xa0",t&&r.a.createElement("div",{className:"title"},t),a&&r.a.createElement(fa.a,{inverted:!0,size:"tiny",style:{opacity:"0.8"},content:a,trigger:r.a.createElement("div",{className:"infoContainer"},r.a.createElement("i",{className:"ui icon info circle"}))}))}(a,n,o)},Er=(a(1183),{left:[{key:"designertb_save",icon:"check",text:"Apply",type:"submit"}]}),Cr=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.map((function(e){return{key:"option_".concat(e.name),text:e.name,value:e.name}}));return r.a.createElement(ba,{name:e,label:null,options:n,disabled:a})},kr=function(e,t){if(t&&t.selectedNode){e("key",t.selectedNode.key);var a=t.userSettings&&t.userSettings.find((function(e){return e.key===t.selectedNode.key}));a?(e("name",a.dispName),e("inherit",a.inherit),e("pageAssoc",a.pageAssoc),e("childDefaultPage",a.childDefaultPage),e("displayWeb",a.displayWeb),e("displayReport",a.displayReport),e("displayAsMapView",a.displayAsMapView||!1),e("displayAsAnalysisView",a.displayAsAnalysisView||!1)):(e("name",t.selectedNode.title),e("inherit",!0),e("pageAssoc",null),e("childDefaultPage",null),e("displayWeb",!0),e("displayReport",!1),e("displayAsMapView",!1),e("displayAsAnalysisView",!1)),t.selectedNode.parent||e("inherit",!1)}},Or=function(e,t){if(!e)return null;for(var a=e;a.parent;){var n=t.find((function(e){return e.key===a.parent.key}));if(n&&n.childDefaultPage)return n.childDefaultPage;a=a.parent}return"Not set"};var Sr=Object(c.b)((function(e){return{hierarchyTree:e.hierarchyDesigner.hierarchyTree,selectedNode:e.hierarchyDesigner.selectedNode,userSettings:e.hierarchyDesigner.userSettings,savedLayouts:e.mainApp.masterLayouts}}),(function(e){return Object(l.b)({saveNodeConfig:$},e)}))((function(e){var t=e.containerWidth,a=e.selectedNode,o=e.userSettings,i=e.saveNodeConfig,l=e.savedLayouts;console.log("render HierConfigPanel",o);var c=Object(n.useState)({inherit:!0}),s=Object(Ct.a)(c,2),u=s[0],d=s[1];return r.a.createElement(Ga,{className:"hierConfigPanelContainer",onSubmit:function(e){return t=e,a=i,console.log("hier config panel submit!",t,a),a({key:t.key,dispName:t.name,inherit:t.inherit,pageAssoc:t.pageAssoc,childDefaultPage:t.childDefaultPage,displayWeb:t.displayWeb,displayReport:t.displayReport,displayAsMapView:t.displayAsMapView,displayAsAnalysisView:t.displayAsAnalysisView}),void ta("Properties Applied!",Yt,"Please click Save to persist the settings to database");var t,a},inputObj:{selectedNode:a,userSettings:o},inputObjId:a&&a.key,setControlValues:kr,watchedField:"inherit",setStateCb:d},r.a.createElement(br,{containerWidth:t,menuItems:Er}),function(e,t,a,n){if(console.log("renderHierPanelContent",e),!e||!e.key)return r.a.createElement("div",{className:"ui message orange"},"No node is selected");var o=e.parent?{}:{display:"none"};a.inherit;return r.a.createElement("div",{className:"hierconfigPanelContent"},r.a.createElement("div",{className:"ui message"},"Showing properties for: ",r.a.createElement("b",null,e.key)),r.a.createElement("table",{className:"formTable"},r.a.createElement("tbody",null,r.a.createElement("tr",{style:{display:"none"}},r.a.createElement("th",null,"Key"),r.a.createElement("td",null,r.a.createElement(ya,{key:e.key+"_key",name:"key",label:null}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Display Name"),r.a.createElement("td",null,r.a.createElement(ya,{key:e.key+"_name",name:"name",label:null}))),r.a.createElement("tr",{style:o},r.a.createElement("th",null,"Inherit Default Page from Parent"),r.a.createElement("td",null,r.a.createElement(va,{name:"inherit"}),a.inherit&&r.a.createElement("span",null,"Inherited Page: "),a.inherit&&r.a.createElement("span",null,Or(e,t)))),r.a.createElement("tr",null,r.a.createElement("th",null,"Page Associated"),r.a.createElement("td",null,Cr("pageAssoc",n,a.inherit))),r.a.createElement("tr",null,r.a.createElement("th",null,"Children Default Page"),r.a.createElement("td",null,Cr("childDefaultPage",n))),r.a.createElement("tr",null,r.a.createElement("th",null,"Display in Web Browser"),r.a.createElement("td",null,r.a.createElement(va,{name:"displayWeb",disabled:!0}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Display in PDF Report"),r.a.createElement("td",null,r.a.createElement(va,{name:"displayReport"}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Display as Map View tab"),r.a.createElement("td",null,r.a.createElement(va,{name:"displayAsMapView"}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Display as Analysis View tab"),r.a.createElement("td",null,r.a.createElement(va,{name:"displayAsAnalysisView"}))))))}(a,o,u,l))})),Dr=(a(1184),[15,85]),xr=function(e){function t(e){var a;return Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).onSelect=function(e,t){console.log("dashboard tree onSelect...",e,t),e.length>0?a.props.selectDashboardTree(e[0]):a.props.selectDashboardTree(null),a.setState({pageFilters:[]})},a.getLayoutName=function(e,t){var n=a.props.selectedNodeKey;if(!n||!e)return null;var r=e.find((function(e){return e.key===n}));if(r&&!1===r.inherit)return r.pageAssoc;var o=x(t,n);return o&&o.item?Or(o.item,e):null},a.getLayoutObj=function(e){var t=a.props.masterLayouts&&a.props.masterLayouts.find((function(t){return t.name===e}));return{controls:t&&JSON.parse(t.layoutJson),layoutData:t&&{rows:t.numRows,columns:t.numCols,pageFilterFields:t.pageFilterFields&&JSON.parse(t.pageFilterFields),pageApiData:t.pageApiData&&JSON.parse(t.pageApiData)}}},a.renderDatasetFilters=function(){return!a.props.chartClickFilters||Object.keys(a.props.chartClickFilters).length<=0?null:r.a.createElement("table",{id:"dashboardFiltersTable"},r.a.createElement("thead",null,r.a.createElement("tr",{style:{border:"1px solid gray"}},r.a.createElement("td",null,"Dataset ID"),r.a.createElement("td",null,"Control ID"),r.a.createElement("td",null,"Stack ID"),r.a.createElement("td",null,"Own Filter"),r.a.createElement("td",null,"Own Series"))),r.a.createElement("tbody",null,Object.keys(a.props.chartClickFilters).map((function(e,t){var n=a.props.chartClickFilters[e];return Object.keys(n).map((function(t,a){var o=n[t];return Object.keys(o).map((function(a,n){var i=o[a],l=i.sliceInfo,c=i.seriesInfo;return r.a.createElement("tr",{key:"filterTable-".concat(n),style:{border:"1px solid gray"}},r.a.createElement("td",null,"Dataset: ",e,", "),r.a.createElement("td",null,"ControlId: ",t,", "),r.a.createElement("td",null,"Group: ",a,", "),r.a.createElement("td",null,JSON.stringify(l.origObj)),r.a.createElement("td",null,JSON.stringify(c)))}))}))}))))},a.onSubmitFilter=function(e,t){if(console.log("[dashboard filter submit]",e),Array.isArray(t.layoutData.pageFilterFields)){var n=[];t.layoutData.pageFilterFields.forEach((function(t){"analysisperiod"===t.toLocaleLowerCase()?n.push({name:"AnalysisPeriod",value:e.AnalysisPeriod.value,startDate:e.AnalysisPeriod.start,endDate:e.AnalysisPeriod.end}):e[t]&&e[t].length>0&&n.push({name:t,value:e[t]})})),a.setState({pageFilters:n})}},a.renderPageFilter=function(e,t){return"analysisperiod"===e.toLocaleLowerCase()?r.a.createElement(wa,{key:"pageFilter_"+e,name:e,label:"Analysis Period:"}):r.a.createElement(ja,{key:"pageFilter_"+e,name:e})},a.setPageFilterControlValues=function(e,t){Array.isArray(t)&&t.forEach((function(t){"analysisperiod"===t.toLocaleLowerCase()&&e("AnalysisPeriodValue",xa[0].value)}))},a.renderPageToolbar=function(e,t,n){return!e||!e.layoutData||!Array.isArray(e.layoutData.pageFilterFields)||e.layoutData.pageFilterFields.length<=0?null:r.a.createElement(Ga,{className:"pageToolbar",key:"formDataDesigner",onSubmit:function(t){a.onSubmitFilter(t,e)},setControlValues:a.setPageFilterControlValues,inputObj:e.layoutData.pageFilterFields,inputObjId:n},r.a.createElement("div",{className:"pageToolbarFieldContainer"},e.layoutData.pageFilterFields.map((function(e){return a.renderPageFilter(e,t)}))),r.a.createElement("div",{className:"toolbarButtonContainer"},r.a.createElement(Ha.a,{primary:!0,fluid:!1,size:"small"},"Apply Filter")))},a.renderForm=function(e,t,n){return a.props.selectedNodeKey?r.a.createElement("div",null,a.renderPageToolbar(t,n,e),r.a.createElement(yr,{containerWidth:a.state.rightPixels,layoutData:t.layoutData,controls:t.controls,metadata:n,layoutName:e,pageFilters:a.state.pageFilters})):r.a.createElement("div",{className:"ui message orange"},"Please select a node from the treeview on the left!")},a.state=Object(d.a)({},a.state,{pageFilters:[]}),a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){console.log("render dashboard...",this.props.selectedNodeKey);var e=this.props.hierarchyView&&T(JSON.parse(this.props.hierarchyView.hierarchyJson)),t=this.props.hierarchyView&&JSON.parse(this.props.hierarchyView.nodeSettingsJson),a=this.getLayoutName(t,e),n=this.getLayoutObj(a);return r.a.createElement(gt,{id:"hierarchyDesigner",onDragEnd:this.onSplitDragEnd,defaultSize:Dr,minSize:230},this.props.hierarchyView&&r.a.createElement(Et,{onSelectCb:this.onSelect,selectedNodeKey:this.props.selectedNodeKey,treeData:e,userSettings:t,controlledExpansion:!0,hiddenNodesSettings:["displayAsMapView","displayAsAnalysisView"],defaultExpandAll:!0}),this.renderForm(a,n,this.props.metadata))}}]),t}(yt);var wr=Object(c.b)((function(e){var t=e.mainApp.masterHierarchyViews;return{hierarchyView:t&&t[0],masterLayouts:e.mainApp.masterLayouts,selectedNodeKey:e.dashboard.selectedNodeKey,chartClickFilters:e.dashboard.chartClickFilters,metadata:e.mainApp.masterMetadata}}),(function(e){return Object(l.b)({selectDashboardTree:ue},e)}))(xr),Tr=(a(1185),function(e){function t(e){var a;Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).onExpand=function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];(e=console).log.apply(e,["onExpand"].concat(a))},a.onSelect=function(e,t){console.log("selected",e,t),a.selKey=t.node.props.eventKey,e.length>0?a.props.selectToolPanelTree(Object(d.a)({key:e[0]},t.selectedNodes[0].props)):a.props.selectToolPanelTree(null),a.tree&&console.log("Selected DOM node:",e.map((function(e){return i.a.findDOMNode(a.tree.domTreeNodes[e])})))},a.onCheck=function(e,t){console.log("onCheck",e,t)},a.onEdit=function(){setTimeout((function(){console.log("current key: ",a.selKey)}),0)},a.onDel=function(e){window.confirm("sure to delete?")&&e.stopPropagation()},a.setTreeRef=function(e){a.tree=e},a.Icon=function(e){return"Plant"===e.nodeType||"Folder"===e.nodeType||e.children.length>0?r.a.createElement("i",{className:"ui icon folder outline"}):r.a.createElement("i",{className:"ui icon genderless"})},a.Filterer=function(e){return!1},a.getSwitcherIcon=function(e){return e.isLeaf?null:e.expanded?r.a.createElement("i",{className:"ui icon angle down"}):r.a.createElement("i",{className:"ui icon angle right"})};var n=e.keys;return a.state={defaultExpandedKeys:n,defaultSelectedKeys:[],defaultCheckedKeys:n},a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){var e=jr(this.props.masterHierarchy);return e?(console.log("render demo tree...",this.props.masterHierarchy),r.a.createElement("div",null,r.a.createElement("div",{className:"ui icon input small",style:{margin:"5px",width:"calc(100% - 10px)"}},r.a.createElement("input",{type:"text",placeholder:"Search tree..."}),r.a.createElement("i",{className:"inverted circular filter icon"})),r.a.createElement(vt.b,{style:{overflow:"auto",height:"100%",width:"calc(100%)",padding:"0 0 20 0"},className:"myCls",showLine:!0,selectable:!0,checkable:!1,onExpand:this.onExpand,defaultExpandedKeys:this.state.defaultExpandedKeys,defaultSelectedKeys:this.state.defaultSelectedKeys,defaultCheckedKeys:this.state.defaultCheckedKeys,onSelect:this.onSelect,onCheck:this.onCheck,treeData:[e],icon:this.Icon,filterTreeNode:this.Filterer,switcherIcon:this.getSwitcherIcon}))):r.a.createElement("div",null,"Loading...")}}]),t}(r.a.Component));Tr.defaultProps={keys:["0-0","0-0-1","//Plant"]};var jr=function e(t){if(!t)return null;var a=[],n={key:t.fullPath,title:t.name,nodeType:t.nodeType,category:t.category};return t.children&&(t.children.forEach((function(t){a.push(e(t))})),n.children=a),n};var Nr=Object(c.b)((function(e){return{masterHierarchy:e.mainApp.masterHierarchy}}),(function(e){return Object(l.b)({selectToolPanelTree:K},e)}))(Tr);a(1186);var Pr=Object(c.b)((function(e){return{selectedNode:e.designer.toolPanelTreeSelected,masterAvailableData:e.mainApp.masterAvailableData}}))((function(e){var t=e.selectedNode;if(!t)return r.a.createElement("div",{className:"ui warning message"},r.a.createElement("i",{className:"ui icon exclamation circle large"}),"Please select a target or folder from the Hierarchy tree above");var a,n=function(e,t){var a=[];if(!t||!e)return a;var n=t.find((function(t){return"HierarchyName"===t.selectionType&&t.hierarchy===e.key}));if(n&&(a=a.concat(n.kpiNameList)),e.category){var r=t.find((function(t){return"Category"===t.selectionType&&t.category===e.category}));r&&(a=a.concat(r.kpiNameList))}if(e.nodeType){var o=t.find((function(t){return"NodeType"===t.selectionType&&t.nodeType===e.nodeType}));o&&(a=a.concat(o.kpiNameList))}return console.log("GetAvailableItems",a),a.map((function(e){return{name:e}}))}(t,e.masterAvailableData);return r.a.createElement("div",{className:"dataContainer"},"Showing Available Data for key: ",t.key,(a=n)?a.map((function(e){return r.a.createElement("div",{key:e.name,className:"ui grey horizontal label large availableData",draggable:"true"},e.name)})):null)})),Ar=(a(1187),a(651)),Ir=a.n(Ar),Fr=(a(1189),r.a.Component,a(1190),a(1245)),Lr=a(164),Rr=a(1252),Mr=(a(1191),a(436)),Vr=(a(1192),function(e){return Array.isArray(e)?e.map((function(e){return{key:e,text:e,value:e}})):[]}),zr=function(){var e=Object(c.d)((function(e){return e.mainApp.masterImages})),t=Object(c.c)();return r.a.createElement("div",{className:"settingsContentContainer"},r.a.createElement("iframe",{name:"hiddenFrame",className:"hiddenFrame"}),r.a.createElement(Mr.a,null,r.a.createElement("div",{className:"segmentTitle"},"Upload Image"),r.a.createElement("form",{method:"post",className:"uploadImageForm",encType:"multipart/form-data",action:"http://localhost:5000/fileupload",target:"hiddenFrame",onSubmit:function(e){ta("Image uploaded!",Yt,"Please refresh the browser to see it in the image lists!")}},r.a.createElement("input",{className:"ui button fileInputImageUpload",type:"file",name:"uploadedFile",accept:"image/*"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{className:"ui button primary submitBtnImageUpload",type:"submit",name:"upload"}))),r.a.createElement(Mr.a,null,r.a.createElement("div",{className:"segmentTitle"},"Delete Image"),r.a.createElement(Ga,{className:"deleteImageForm",onSubmit:function(e){if(e&&e.settingsImageDropdown){var a,n=e.settingsImageDropdown;t((a=n,function(){var e=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[action] fetchImages"),e.next=3,b.post("deletefile",{name:a});case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(){console.log("deleted image!"),ta("Deleted Image!"),t(Q())}))}}},r.a.createElement(ba,{name:"settingsImageDropdown",options:Vr(e),fluid:!1}),r.a.createElement(Ha.a,{color:"red"},"Delete"))))},Hr={name:"imageConfigMap",areas:[]},Wr={x:-1,y:-1},Br=function(e){var t,a,o=e.showOpenForm,i=e.onCloseOpenConfigDialog,l=e.selectedControl;l&&l.data&&l.data.imageProps&&(t=l.data.imageProps.image,a=l.data.imageProps.map);var s=Object(n.useState)({dropdownImage:t}),p=Object(Ct.a)(s,2),m=p[0],h=p[1],g=Object(n.useState)(!1),f=Object(Ct.a)(g,2),y=f[0],b=f[1],E=Object(n.useState)(Wr),C=Object(Ct.a)(E,2),k=C[0],O=(C[1],Object(n.useState)(a||Hr)),S=Object(Ct.a)(O,2),D=S[0],x=S[1],w=Object(c.d)((function(e){return e.mainApp.masterImages})),T=Object(c.c)();Object(n.useEffect)((function(){console.log("imagemap config useEffect",a),t&&h({dropdownImage:t}),a&&x(a)}),[t,a]);var j=function(){if(!D||!Array.isArray(D.areas))return"SPOT 0";for(var e=0,t=function(){var t="SPOT ".concat(e);if(!D.areas.find((function(e){return e.name===t})))return{v:t};e++};;){var a=t();if("object"===typeof a)return a.v}};console.log("ImageMapConfigDialog render",l.i,D);var N=JSON.stringify({controlId:l.i,map:D});return r.a.createElement(_n.a,{open:o,closeOnDimmerClick:!0,className:"imageMapConfigDialog",size:"fullscreen"},r.a.createElement(_n.a.Content,{className:"imageMapContent"},r.a.createElement("div",{className:"imageMapContentContainer"},r.a.createElement(Ga,{className:"imageMapForm",onSubmit:function(e){console.log("handleSubmit, formData:",e);var t=null,a=[];for(var n in e)if("dropdownImage"===n)t=e[n];else{var r=e[n];a.push({name:r.name,shape:"circle",coords:[r.x,r.y,15],preFillColor:r.color})}var o={name:"".concat(l.i,"-imageConfigMap"),areas:a};console.log("handleSubmit, newMap:",o),x(o),T(function(e,t,a){return{type:"APPLY_IMAGEMAP_PROPS",payload:{image:e,newMap:t,updatedControl:a}}}(t,o,l))},watchedField:"dropdownImage",setStateCb:h,setControlValues:function(e,t){D&&Array.isArray(D.areas)&&(console.log("setHotspotValues"),e("dropdownImage",m.dropdownImage),D.areas.forEach((function(t){e(t.name+".name",t.name),e(t.name+".x",t.coords[0]),e(t.name+".y",t.coords[1]),e(t.name+".color",t.preFillColor)})))},inputObj:D,inputObjId:N},r.a.createElement("div",{className:"formBodyImgMapConfig"},r.a.createElement("h4",null,"Configure ImageMap Control"),r.a.createElement(ba,{key:"dropdownImage",name:"dropdownImage",label:"Select Image:",options:Vr(w),size:"small"}),r.a.createElement(Ha.a,{toggle:!0,type:"button",active:y,onClick:function(){b(!y)},disabled:y||!m||!m.dropdownImage},r.a.createElement(Lr.a,{name:"plus"}),y?"Click on a spot in image":"Add Hotspot"),y&&r.a.createElement("div",null,"Image coords: ".concat(k.x,", ").concat(k.y)),(console.log("renderCoordsForm",D.areas),r.a.createElement("div",{className:"coordContainer"},D.areas.map((function(e){return r.a.createElement(Na,{key:"formImageArea-"+e.name,name:e.name,x:e.coords[0],y:e.coords[1],color:e.preFillColor})}))))),r.a.createElement("div",{className:"footerToolbarImgMapConfig"},r.a.createElement(_n.a.Actions,null,r.a.createElement(Ha.a,{floated:"left",color:"green",type:"submit"},"Apply"),r.a.createElement(Ha.a,{floated:"left",onClick:function(){i&&i(!1)}},"Close")))),r.a.createElement("div",{className:"imageContainer"},!!m&&!!m.dropdownImage&&r.a.createElement(Zn,{src:"".concat(v(),"/files/").concat(m.dropdownImage),onImageMouseMove:function(e){if(y)e.nativeEvent.layerX,e.nativeEvent.layerY},onImageClick:function(e){var t={x:e.nativeEvent.layerX,y:e.nativeEvent.layerY};if(console.log("handleMouseClick",t),b(!1),y&&!(t.x<0||t.y<0)){var a=Object(d.a)({},D);x(a),a.areas=Object(u.a)(D.areas),a.areas.push({name:j(),shape:"circle",coords:[t.x,t.y,15],preFillColor:"red"})}},map:D})))))},Gr=function(e,t){if(t){var a=ma(t.ctrlType);e("controlId",t.i),e("controlType",a.displayName),Object.keys(t.data).forEach((function(a,n){"dataProps"!==a&&e(a,t.data[a])})),t.data.dataProps&&Object.keys(t.data.dataProps).forEach((function(a,n){if("filtersList"===a){var r=t.data.dataProps[a];if(0===Object.keys(r).length)e("".concat("dataProps.").concat(a),{});else for(var o in r)e("".concat("dataProps.").concat(a,".").concat(o,".filterName"),r[o].filterName),e("".concat("dataProps.").concat(a,".").concat(o,".filterValue"),r[o].filterValue)}else e("dataProps."+a,t.data.dataProps[a])}))}},_r=function(e,t){if(t&&e)for(var a in t)e(a,t[a])},Ur=Object(c.b)((function(e){var t=e.mainApp.masterHierarchyViews,a=t&&t[0],n=function e(t,a){if(!t||!a)return[];for(var n=[],r=function(r){var o=t[r],i=a.find((function(e){return e.key===o.key})),l=Object(d.a)({},o,{value:o.key});n.push(l),i&&(l.title=i.dispName),l.children=e(l.children,a)},o=0;o<t.length;o++)r(o);return n}(a&&T(JSON.parse(a.hierarchyJson)),a&&JSON.parse(a.nodeSettingsJson));return{selectedControl:e.designer.layout.find((function(e){return!0===e.selected})),selectedPage:e.designer.pageSelected,layoutData:e.designer.layoutData,metadata:e.mainApp.masterMetadata,hierarchyTree:n}}),(function(e){return Object(l.b)({updateControlProps:le,deleteControl:se,updateLayoutProps:ce},e)}))((function(e){var t=e.selectedControl,a=e.metadata,o=e.updateControlProps,i=e.deleteControl,l=e.selectedPage,c=e.layoutData,s=e.updateLayoutProps,u=e.hierarchyTree,p=function(e){x(e)},m=function(e,a){console.log("submit control props",e);var n={i:e.controlId,data:e};delete n.data.controlId,delete n.data.controlType,t.data.imageProps&&(n.data.imageProps=Object(d.a)({},t.data.imageProps)),o(n),ta("Control Properties Applied!",Yt,"")},h=function(e){console.log("submit layout props",e),s(e),ta("Layout Properties Applied!",Yt,"")},g=function(){i(t),ta("Control Deleted!",Yt,"")},f=function(){var e=[];switch(t.ctrlType){case"section":e=St;break;case"label":e=Ut;break;case"pie":e=fn;break;case"barchart":e=wn;break;case"line":e=An;break;case"table":e=Gt;break;case"imageMap":e=ar;break;case"richtext":e=Nt;break;case"gauge":e=Rn}return e},y=function(){ma(t.ctrlType);var e=[];return e.push(r.a.createElement(ya,{key:"controlType",name:"controlType",label:"Control Type:",readOnly:!0})),e.push(r.a.createElement(ya,{key:"controlId",name:"controlId",label:"Control Id:",readOnly:!0})),e},v=function(e,n,o){if(n){var i=[];return Object.keys(n).forEach((function(l,c){var s=e.find((function(e){return e.name===l}));if(s){var d=function(e){return!!(k&&e&&e.watchedField&&e.watchedField===k)&&j!==e.watchedValue}(s);switch(s.propType){case"combo":i.push(r.a.createElement(ba,{key:t.i+"_"+l,name:o+l,label:Rt(l)+":",options:s.options}));break;case"icon":i.push(r.a.createElement(Ca,{key:t.i+"_"+l,name:o+l,label:Rt(l)+":",intialicon:n.icon}));break;case"color":i.push(r.a.createElement(Oa,{key:t.i+"_"+l,name:o+l,label:Rt(l)+":",intialcolor:n[s.name]}));break;case"number":i.push(r.a.createElement(ya,{key:t.i+"_"+l,numeric:!0,name:o+l,label:Rt(l)+":",toolTip:s.toolTip}));break;case"bool":i.push(r.a.createElement(va,{key:t.i+"_"+l,name:o+l,label:Rt(l)+":",toolTip:s.toolTip}));break;case"section":break;case"metadata":i.push(b(l,s,o,d));break;case"popupConfig":i.push(r.a.createElement(Ha.a,{type:"button",key:"".concat(s.name,"Btn"),primary:!0,onClick:function(){return p(!0)}},s.buttonName,"\xa0\xa0",r.a.createElement(Lr.a,{name:"external square alternate"})));break;case"richText":i.push(r.a.createElement(Va,{label:Rt(l)+":",name:o+l,key:"".concat(s.name,"Btn"),toolTip:s.toolTip,initialData:n.richTextData,controlId:t.i}));break;case"pageLinks":i.push(r.a.createElement(Ya,{key:"linkedPage",name:"linkedPage",treeData:u,isRequired:!1,label:Rt(l)+":",dropdownStyle:{height:300,overflow:"auto"}}));break;case"dynamicFilter":i.push(r.a.createElement(Wa,{label:Rt(l)+":",name:o+l,key:"".concat(s.name,"Btn"),toolTip:s.toolTip,filterFieldOptions:tn(a,[s.metadataField]),initialFilters:n.filtersList,parentId:t.i}));break;case"alignment":i.push(r.a.createElement(ya,{key:t.i+"_"+l,name:o+l,label:Rt(l)+":",toolTip:s.toolTip}))}}else i.push(r.a.createElement(ya,{key:t.i+"_"+l,name:o+l,label:Rt(l)+":"}))})),i}},b=function(e,n,o,i){switch(n.metadataPropType){case"dropdown":return r.a.createElement(ba,{key:t.i+"_"+e,name:o+e,label:Rt(e)+":",options:en(a,n.metadataField)});case"treeDropdown":return r.a.createElement(Ya,{key:t.i+"_"+e,name:o+e,treeData:tn(a,[n.metadataField]),isRequired:!1,label:Rt(e)+":",dropdownStyle:{height:300,overflow:"auto"},multiple:n.multiple,disabled:i});case"textbox":return r.a.createElement(ya,{key:t.i+"_"+e,name:o+e,label:Rt(e)+":",toolTip:n.toolTip,readOnly:n.readOnly})}return null},E=function(){var e=[];for(var t in c)switch(t){case"name":e.push(r.a.createElement(ya,{key:"layout_".concat(t,"_prop"),name:t,label:Rt(t)+":",readOnly:!0}));break;case"columns":e.push(r.a.createElement(ya,{key:"layout_".concat(t,"_prop"),numeric:!0,name:t,label:Rt(t)+":",readOnly:!0,toolTip:"For this version, column size cannot be changed"}));break;case"rows":e.push(r.a.createElement(ya,{key:"layout_".concat(t,"_prop"),numeric:!0,name:t,label:Rt(t)+":",toolTip:"For now, there is no validation. Make sure the value provided is sufficient. Otherwise some existing controls might be deleted."}));break;case"pageFilterFields":e.push(r.a.createElement(Ya,{key:"pageFilterFields",name:"pageFilterFields",treeData:tn(a,["requestParams","dimensions"]),isRequired:!1,label:"Page Filter Fields:",dropdownStyle:{height:300,overflow:"auto"},multiple:!0}));break;default:e.push(r.a.createElement(ya,{key:t,name:t,label:Rt(t)+":"}))}return e},C=null,k=function(){if(!t||!t.data||!t.data.dataProps)return null;var e=f();if(!e)return null;var a=e.find((function(e){return!0===e.watchableField}));return a?a.name:null}();k&&(C=t.data.dataProps[k]);var O=Object(n.useState)(!1),S=Object(Ct.a)(O,2),D=S[0],x=S[1],w=Object(n.useState)(C),T=Object(Ct.a)(w,2),j=T[0],N=T[1];return console.log("[PropertiesPanel] render",j),t||l?l?r.a.createElement(Ga,{className:"propsFormContainer ui small form",key:"formLayoutProps",onSubmit:h,inputObj:c,setControlValues:_r},r.a.createElement("div",{className:"propsForm"},E(c)),r.a.createElement("div",{className:"footerToolbar"},r.a.createElement("button",{key:"submitBtn",type:"submit",className:"ui button secondary mini"},"Apply"))):function(e){var a,n,o=f();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ga,{className:"propsFormContainer ui small form",key:"formControlProps",onSubmit:m,inputObj:t,inputObjId:t.i,setControlValues:Gr,watchedField:e,setStateHook:N},r.a.createElement("div",{className:"propsForm"},y(t),v(o,t.data,""),t.data.dataProps&&(a="Data Config",n="database",r.a.createElement(Fr.a,{horizontal:!0},r.a.createElement(Qa.a,{as:"h5"},r.a.createElement(Lr.a,{name:n}),a))),t.data.dataProps&&v(o,t.data.dataProps,"dataProps.")),r.a.createElement("div",{className:"footerToolbar"},r.a.createElement("button",{key:"deleteBtn",type:"button",className:"ui negative button mini",onClick:g},"Delete"),r.a.createElement("button",{key:"submitBtn",type:"submit",className:"ui button secondary mini"},"Apply"))),"imageMap"===t.ctrlType&&r.a.createElement(Br,{showOpenForm:D,onCloseOpenConfigDialog:p,selectedControl:t}))}("dataProps."+k):r.a.createElement(Rr.a,{header:"No object selected in the Designer",content:"Please select either any control or click [Configure Page Settings] button to configure the layout"})})),Kr=[25,75],qr=function(e){var t=e.title,a=e.onClickCollapseExpand,n=e.id,o=e.isCollapsed,i=e.panelContent,l=o?"down":"up";return r.a.createElement("div",{className:"accordionPanel"},r.a.createElement("div",{className:"titleBar"},r.a.createElement("div",{className:"titleBarText"},t),r.a.createElement("div",{className:"collExpBtn",onClick:function(){return a(n)}},r.a.createElement("i",{className:"icon angle ".concat(l)}))),r.a.createElement("div",{className:"panelBody"},i))},Jr=[{title:"Toolbox",id:"toolbox",isCollapsed:!1,size:0,helpText:"Drag an item to the Designer Area"},{title:"Hierarchy",id:"toolHierarchy",isCollapsed:!1,size:0,helpText:"Select an item in the hierarchy to show the available data below"},{title:"Available Data",id:"availableData",isCollapsed:!1,size:0,helpText:"Drag an item to the Designer Area"}],Yr=function(e){function t(e){var a;Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).recalculatePanelSizes=function(e){var t=100/e.filter((function(e){return!1===e.isCollapsed})).length;if(e.find((function(e){return e.isCollapsed}))||Kr.length!==e.length)e.forEach((function(e){e.isCollapsed?e.size=0:e.size=t}));else for(var a=0;a<e.length;a++){e[a].size=Kr[a]}return e},a.getPanelSizes=function(){return a.state.panelsData.map((function(e){return e.size}))},a.addRemovePanelTransition=function(e){for(var t=document.getElementsByClassName("accordionPanel"),a=0;a<t.length;a++){var n=t[a];n.style.transition=e?"0.5s":"0s"}},a.onClickCollapseExpand=function(e){a.addRemovePanelTransition(!0);var t=Object(u.a)(a.state.panelsData),n=t.find((function(t){return t.id===e}));if(n){n.isCollapsed=!n.isCollapsed;var r=a.recalculatePanelSizes(t);a.setState({panelsData:r,sizes:r.map((function(e){return e.size}))})}else console.error("Cannot find the panel expanded or collapsed!")},a.getPanelContent=function(e,t){switch(e){case"toolbox":return r.a.createElement(ha,{containerWidth:t});case"toolHierarchy":return r.a.createElement(Nr,null);case"availableData":return r.a.createElement(Pr,null);case"properties":return r.a.createElement(Ur,null)}return null},a.createPanels=function(e){return a.state.panelsData.map((function(t){var n=a.getPanelContent(t.id,e);return r.a.createElement(qr,{key:t.id,id:t.id,title:t.title,isCollapsed:t.isCollapsed,onClickCollapseExpand:a.onClickCollapseExpand,panelContent:n})}))};var n=e.panelItems?e.panelItems:Jr,o=a.recalculatePanelSizes(n);return a.onSplitDragEnd=a.onSplitDragEnd.bind(Object(nt.a)(a)),a.onSplitDragStart=a.onSplitDragStart.bind(Object(nt.a)(a)),a.state={panelsData:o,sizes:o.map((function(e){return e.size}))},a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"onSplitDragEnd",value:function(e){console.log("[toolPanel] onSplitDrageEnd",e,this);for(var t=Object(u.a)(this.state.panelsData),a=0;a<e.length;a++){var n=t[a];e[a]>8?n.isCollapsed&&(n.isCollapsed=!1):n.isCollapsed||(n.isCollapsed=!0)}this.setState({panelsData:t,sizes:e}),this.addRemovePanelTransition(!1)}},{key:"onSplitDragStart",value:function(e){console.log("[toolPanel] onSplitDrageStart",e),this.addRemovePanelTransition(!1)}},{key:"render",value:function(){return console.log("[toolPanel] render",this.props.containerWidth),r.a.createElement(mt.a,{className:"split",direction:"vertical",sizes:this.state.sizes,minSize:33,gutterSize:5,snapOffset:0,onDragEnd:this.onSplitDragEnd,onDragStart:this.onSplitDragStart,cursor:"row-resize"},this.createPanels(this.props.containerWidth))}}]),t}(r.a.Component),Xr=a(652),$r=(a(1199),Xr.Responsive),Zr=[{key:"angular",text:"Angular",value:"angular"},{key:"css",text:"CSS",value:"css"},{key:"design",text:"Graphic Design",value:"design"},{key:"ember",text:"Ember",value:"ember"},{key:"html",text:"HTML",value:"html"},{key:"ia",text:"Information Architecture",value:"ia"},{key:"javascript",text:"Javascript",value:"javascript"},{key:"mech",text:"Mechanical Engineering",value:"mech"},{key:"meteor",text:"Meteor",value:"meteor"},{key:"node",text:"NodeJS",value:"node"},{key:"plumbing",text:"Plumbing",value:"plumbing"},{key:"python",text:"Python",value:"python"},{key:"rails",text:"Rails",value:"rails"},{key:"react",text:"React",value:"react"},{key:"repair",text:"Kitchen Repair",value:"repair"},{key:"ruby",text:"Ruby",value:"ruby"},{key:"ui",text:"UI Design",value:"ui"},{key:"ux",text:"User Experience",value:"ux"},{key:"test1",text:"A quick brown fox jumps over the lazy dog",value:"test1"},{key:"test2",text:"ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!@#$%^&*()_+",value:"test2"},{key:"test3",text:"\u6625\u7720\u4e0d\u89c9\u6653\uff0c\u5904\u5904\u95fb\u557c\u9e1f\u3002\u591c\u6765\u98ce\u96e8\u58f0\uff0c\u82b1\u843d\u77e5\u591a\u5c11\u3002",value:"test3"}],Qr=function(e){return console.log("[designerForm] generateDOM()...",e),C.a.map(e.lg,(function(e,t){return r.a.createElement("div",{key:e.i,className:e.static?"static":"",style:{border:"1px dashed lightgray",borderRadius:"3px"}},r.a.createElement(Kn,{controlInfo:e}),function(e){switch(e.ctrlType){case"barchart":return r.a.createElement(xn,{i:"ctrl-bar0",x:6,y:1,w:3,h:4,ctrlType:"barchart",data:{label:"Bar:"}});case"pie":return r.a.createElement(gn,{i:"ctrl-pie0",x:6,y:1,w:3,h:4,ctrlType:"pie",data:{label:"Pie:"}});case"section":return r.a.createElement("div",{className:"Aligner"},r.a.createElement("div",{className:"Aligner-item",style:{fontSize:"30px"}},"Plant Overall Status"));case"combo":var t={i:"ctrl-pie0",x:6,y:1,w:3,h:4,ctrlType:"dummy",data:{placeholder:"Please select...",options:Zr,label:"Combobox:"}};return r.a.createElement(At,t)}}(e))}))},eo=function(e){Object(n.useEffect)((function(){console.log("RGL useEffect start"),i(Object(d.a)({},o,{mounted:!0}))}),[e.controls]);var t=Object(n.useState)({mounted:!1,layouts:{lg:e.controls}}),a=Object(Ct.a)(t,2),o=a[0],i=a[1];return console.log("render RGL"),r.a.createElement("div",{style:{border:"1px dashed dimgray",position:"relative",top:"30px"}},r.a.createElement($r,Object.assign({width:e.containerWidth},e,{initialLayout:e.controls,layouts:o.layouts,measureBeforeMount:!1,useCSSTransforms:o.mounted,isDroppable:!0}),Qr(o.layouts)))};eo.defaultProps={className:"layout",rowHeight:30,onLayoutChange:function(e,t){console.log("layout changed")},cols:{lg:12,md:12,sm:2,xs:1,xxs:1},initialLayout:[],compactType:"vertical"};var to=Object(c.b)((function(e,t){return{}}),(function(e){return Object(l.b)({selectedControl:ee},e)}))(eo),ao={left:[{key:"designertb_save",icon:"save",text:"Save"},{key:"designertb_saveas",icon:"save outline",text:"Save As..."},{key:"designertb_open",icon:"open folder outline",text:"Open..."}],right:[{key:"designertb_preview",icon:"eye",text:"Hold to Preview",disabled:!0}]},no=function(e){var t="toolbarButton";return e.disabled&&(t+=" toolbarButton-disabled"),r.a.createElement("div",{key:e.key,className:t},r.a.createElement("i",{className:"ui icon "+e.icon}),e.text)},ro=function(e){return e.containerWidth>600?r.a.createElement("div",{className:"designerToolbar"},r.a.createElement("div",{className:"left"},ao.left.map((function(e){return no(e)}))),r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"title"},"Untitled"),r.a.createElement(fa.a,{inverted:!0,basic:!0,size:"tiny",style:{opacity:"0.8"},content:"Form is not yet saved",trigger:r.a.createElement("div",{className:"infoContainer"},r.a.createElement("i",{className:"ui icon info circle"}))})),r.a.createElement("div",{className:"rightTb"},ao.right.map((function(e){return no(e)})))):r.a.createElement("div",{className:"designerToolbar"},r.a.createElement("div",{className:"desginerDropdown"},r.a.createElement("i",{className:"desginerDropbtn ui icon th"}),r.a.createElement("div",{className:"desginerDropdown-content"},ao.left.map((function(e){return r.a.createElement("div",{key:e.key,className:"desginerDropdown-item"},r.a.createElement("i",{className:"ui icon "+e.icon}),r.a.createElement("a",null,e.text))})))),"\xa0 \xa0",r.a.createElement("div",{className:"title"},"Untitled"),r.a.createElement(fa.a,{inverted:!0,size:"tiny",style:{opacity:"0.8"},content:"Form is not yet saved",trigger:r.a.createElement("div",{className:"infoContainer"},r.a.createElement("i",{className:"ui icon info circle"}))}))},oo=[15,85],io=function(e){function t(e){var a;return Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).defaultSizes=oo,a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){return console.log("render dashboard designerContent"),r.a.createElement(gt,{id:"designerPanel",onDragEnd:this.onSplitDragEnd,defaultSize:oo},r.a.createElement(Yr,{containerWidth:this.state.leftPixels}),r.a.createElement("div",null,r.a.createElement(ro,{containerWidth:this.state.rightPixels}),r.a.createElement(to,{containerWidth:this.state.rightPixels,controls:this.props.layout})))}}]),t}(yt),lo=(Object(c.b)((function(e){return{layout:e.designer.dashLayout,layoutData:e.designer.dashLayoutData}}))(io),a(1200),function(e){var t=e.showSaveForm,a=e.title,o=e.formLabel,i=e.onSave,l=e.onClose,c=Object(n.useState)(Object(la.a)({},"Name",null)),s=Object(Ct.a)(c,2),u=s[0],d=s[1];return r.a.createElement(_n.a,{open:t,size:"mini",closeOnDimmerClick:!0,className:"saveAsModal"},r.a.createElement(Qa.a,{icon:"save",content:a}),r.a.createElement(_n.a.Content,{scrolling:!0},r.a.createElement(Ga,{onSubmit:function(e){return i(e.Name)},watchedField:"Name",setStateCb:d},r.a.createElement(ya,{key:"SaveAs-Name",name:"Name",label:o}),r.a.createElement(_n.a.Actions,null,r.a.createElement(Ha.a,{floated:"right",color:"green",type:"submit",disabled:!u.Name||0===u.Name.length},"Save"),r.a.createElement(Ha.a,{floated:"right",onClick:l},"Cancel")))))}),co=function(e){var t=e.showOpenForm,a=e.title,o=e.formLabel,i=e.onOpen,l=e.onClose,c=e.options,s=Object(n.useState)(Object(la.a)({},"Name",null)),u=Object(Ct.a)(s,2),d=u[0],p=u[1];return r.a.createElement(_n.a,{open:t,size:"mini",closeOnDimmerClick:!0,className:"openModal"},r.a.createElement(Qa.a,{icon:"folder",content:a}),r.a.createElement(_n.a.Content,{scrolling:!0},r.a.createElement(Ga,{onSubmit:function(e){return i(e.Name)},watchedField:"Name",setStateCb:p},r.a.createElement(ba,{key:"Open-Name",name:"Name",label:o,options:c}),r.a.createElement(_n.a.Actions,null,r.a.createElement(Ha.a,{floated:"right",color:"green",type:"submit",disabled:!d.Name||0===d.Name.length},"Open"),r.a.createElement(Ha.a,{floated:"right",onClick:l},"Cancel")))))},so=[25,75],uo=[{title:"Toolbox",id:"toolbox",isCollapsed:!1,size:0,helpText:"Drag an item to the Designer Area"},{title:"Properties",id:"properties",isCollapsed:!1,size:0,helpText:"Please select an item from the Designer Area to view the properties"}],po=function(e){function t(e){var a;return Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).configPageSettings=function(){a.props.selectedPage()},a.saveCallback=function(){console.log("Save callback",a.props.layoutData),a.props.layoutData.name?a.handleSave(a.props.layoutData.name):a.saveAsCallback()},a.saveAsCallback=function(){console.log("Save As callback"),a.setState({showSaveForm:!0})},a.handleSave=function(){var e=Object(h.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Save the layout...",t),e.next=3,a.props.saveLayout(a.props.layout,t,a.props.layoutData);case 3:!0===(n=e.sent)?(ta("Layout Saved!"),a.setState({openedLayoutName:t})):ta("Failed to Save Layout!",Xt,n.message),a.handleCloseSave(),r=a.getLayoutToUse(t),a.props.openLayout(r.controls,r.layoutData);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleCloseSave=function(){console.log("handleCloseSave"),a.state.showSaveForm&&a.setState({showSaveForm:!1})},a.openCallback=function(){console.log("Open callback"),a.setState({showOpenForm:!0})},a.handleCloseOpenDlg=function(){console.log("handleCloseSave"),a.state.showOpenForm&&a.setState({showOpenForm:!1})},a.handleOpenLayout=function(e){a.state.showOpenForm&&a.setState({openedLayoutName:e,showOpenForm:!1});var t=a.getLayoutToUse(e);a.props.openLayout(t.controls,t.layoutData)},a.getLayoutToUse=function(e){var t={controls:a.props.layout,layoutData:a.props.layoutData,title:"Untitled",titleTooltip:"Form is not yet saved"};if(!e)return t;var n=a.props.savedLayouts.find((function(t){return t.name===e}));return n?{controls:JSON.parse(n.layoutJson),layoutData:{name:n.name,columns:n.numCols,rows:n.numRows,pageFilterFields:n.pageFilterFields&&JSON.parse(n.pageFilterFields),pageApiData:n.pageApiData&&JSON.parse(n.pageApiData)},title:n.name,titleTooltip:"Last saved on "+n.lastUpdateDate}:t},a.menuItems={left:[{key:"designertb_save",icon:"save",text:"Save",callback:a.saveCallback},{key:"designertb_saveas",icon:"save outline",text:"Save As...",callback:a.saveAsCallback},{key:"designertb_open",icon:"open folder outline",text:"Open...",callback:a.openCallback}],right:[{key:"designertb_configPage",icon:"window maximize outline",text:"Configure Page Settings",callback:a.configPageSettings}]},a.state=Object(d.a)({},a.state,{showSaveForm:!1,showOpenForm:!1,openedLayoutName:null}),a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){console.log("render designerContent",this.props.savedLayouts);var e=Array.isArray(this.props.savedLayouts)&&this.props.savedLayouts.map((function(e){return{key:"option_".concat(e.name),text:e.name,value:e.name}})),t=this.getLayoutToUse(this.state.openedLayoutName);return r.a.createElement(gt,{id:"designerPanel",onDragEnd:this.onSplitDragEnd,defaultSize:so},r.a.createElement(Yr,{panelItems:uo,containerWidth:this.state.leftPixels}),r.a.createElement("div",{id:"rightContainer",className:"designerContainer"},r.a.createElement(br,{containerWidth:this.state.rightPixels,menuItems:this.menuItems,title:t.title,titleTooltip:t.titleTooltip}),r.a.createElement("div",{className:"layoutEditorContainer"},r.a.createElement(zn,{containerWidth:this.state.rightPixels,layoutData:this.props.layoutData,controls:this.props.layout})),r.a.createElement(lo,{showSaveForm:this.state.showSaveForm,title:"Save Layout",formLabel:"Layout name:",onSave:this.handleSave,onClose:this.handleCloseSave}),r.a.createElement(co,{showOpenForm:this.state.showOpenForm,title:"Open Layout",formLabel:"Layout name:",onOpen:this.handleOpenLayout,onClose:this.handleCloseOpenDlg,options:e})))}}]),t}(yt);var mo=Object(c.b)((function(e){return{layout:e.designer.layout,layoutData:e.designer.layoutData,metadata:e.designer.metadata,savedLayouts:e.mainApp.masterLayouts}}),(function(e){return Object(l.b)({saveLayout:re,openLayout:ne,selectedPage:te},e)}))(po),ho=(a(1201),function(e){var t=e.onDelete,a=e.onInsert,n=e.onSave,o=e.onSearchText,i="hierDesignerToolbarButton";return e.bEnableDelete||(i+=" hierDesignerToolbarButton-disabled"),r.a.createElement("div",{className:"hierDesignToolbar"},r.a.createElement("div",{className:"ui icon input small fluid",style:{margin:"5px",width:"100%"}},r.a.createElement("input",{type:"text",placeholder:"Search tree...",onChange:o,disabled:!0}),r.a.createElement("i",{className:"inverted circular filter icon"})),r.a.createElement("div",{className:"toolBarBtnContainer"},r.a.createElement("div",{className:"hierDesignerToolbarButton",onClick:n},r.a.createElement("i",{className:"ui icon save"}),"Save"),r.a.createElement("div",{className:"hierDesignerToolbarButton",onClick:a},r.a.createElement("i",{className:"ui icon plus insert"}),"Insert"),r.a.createElement("div",{className:i,onClick:t},r.a.createElement("i",{className:"ui icon trash alternate"}),"Delete")))}),go=(a(1202),[25,75]),fo=function(e){var t=e.children,a=e.onDelete,n=e.onInsert,o=e.onSave,i=e.onSearchText,l=e.bEnableDelete;return r.a.createElement("div",{className:"toolbarPanel"},r.a.createElement("div",{className:"toolbarContainer"},r.a.createElement(ho,{onDelete:a,onInsert:n,onSave:o,onSearchText:i,bEnableDelete:l})),r.a.createElement("div",{className:"toolbarPanelBody"},t))},yo=function(e){function t(e){var a;return Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).onSelect=function(e,t){console.log("selected",e,t),a.selKey=t.node.props.eventKey,e.length>0?a.props.selectHierDesignerTree(Object(d.a)({key:e[0]},t.selectedNodes[0].props)):a.props.selectHierDesignerTree(null)},a.onHierarchyChanged=function(e){a.props.updateHierDesignerTree(e)},a.onSave=Object(h.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onSave"),e.next=3,a.props.saveHierarchyView(a.props.hierarchyTree,a.props.userSettings);case 3:!0===(t=e.sent)?ta("Saved Hierarchy View!"):ta("Failed to Save Hierarchy View!",Xt,t.message);case 5:case"end":return e.stop()}}),e)}))),a.onInsert=function(){console.log("onInsert"),a.props.insertNewNode()},a.onDelete=function(){console.log("onDelete");var e=a.props.selectedNode,t=Object(u.a)(a.props.hierarchyTree),n=x(t,e.key);n&&(n.parentArr.splice(n.index,1),a.props.updateHierDesignerTree(t))},a.onSearchText=function(e){a.setState({searchText:e.currentTarget.value})},a.state=Object(d.a)({searchText:null,treeData:null},a.state),a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){return console.log("render hierarchyDesigner",this.state.rightPixels),r.a.createElement(gt,{id:"hierarchyDesigner",onDragEnd:this.onSplitDragEnd,defaultSize:go,minSize:230},r.a.createElement(fo,{onDelete:this.onDelete,onInsert:this.onInsert,onSave:this.onSave,onSearchText:this.onSearchText,bEnableDelete:!!this.props.selectedNode&&!!this.props.selectedNode.key},this.props.hierarchyTree&&r.a.createElement(Et,{onSelectCb:this.onSelect,onHierarchyChanged:this.onHierarchyChanged,treeData:this.props.hierarchyTree,selectedNodeKey:this.props.selectedNode?this.props.selectedNode.key:null,searchText:this.state.searchText,userSettings:this.props.userSettings,draggable:!0,defaultExpandAll:!0})),(e=this.state.rightPixels,r.a.createElement(Sr,{containerWidth:e})));var e}}]),t}(yt);var vo=Object(c.b)((function(e){return{hierarchyTree:e.hierarchyDesigner.hierarchyTree,selectedNode:e.hierarchyDesigner.selectedNode,userSettings:e.hierarchyDesigner.userSettings}}),(function(e){return Object(l.b)({selectHierDesignerTree:q,updateHierDesignerTree:J,insertNewNode:X,filterHierDesignerTree:Y,fetchHierarchyViews:Z,saveHierarchyView:oe},e)}))(yo),bo=(a(1203),function(e){var t=e.hierarchyPropName,a=Object(c.d)((function(e){return e.mainApp.masterHierarchyViews})),n=Object(c.d)((function(e){return e.mainApp.masterLayouts})),o=Object(c.d)((function(e){return e.mainApp.masterMetadata})),i=a&&a[0],l=function(e){return e?e.find((function(e){return!0===e[t]})):null}(i&&JSON.parse(i.nodeSettingsJson));if(!l)return r.a.createElement("div",null,"Loading...");var s=l.pageAssoc,u=function(e,t){var a=t&&t.find((function(t){return t.name===e}));return{controls:a&&JSON.parse(a.layoutJson),layoutData:a&&{rows:a.numRows,columns:a.numCols,pageFilterFields:a.pageFilterFields&&JSON.parse(a.pageFilterFields),pageApiData:a.pageApiData&&JSON.parse(a.pageApiData)}}}(s,n);return r.a.createElement("div",{className:"specialTabContainer"},r.a.createElement(yr,{containerWidth:window.innerWidth,layoutData:u.layoutData,controls:u.controls,metadata:o,layoutName:s,pageFilters:null}))}),Eo=(a(1204),a(653),a(654)),Co=a.n(Eo),ko=(a(1223),Co()({target:"_blank",component:function(e){e.contentState;var t=Object(k.a)(e,["contentState"]);return r.a.createElement("a",Object.assign({},t,{onClick:function(){return alert("link clickedxxx!!!")}}))}}),function(e,t){e("downloadCentreAnalysisPeriod","CustomRange")}),Oo=[{key:"ExecSummary",text:"APR Executive Summary",value:"ExecSummary"},{key:"Full APR Report",text:"Full APR Report",value:"Full APR Report",disabled:!0}],So=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1)},Do=function(e){if(!e)return"Report.pdf";var t=new Date(e.aprStart),a=new Date(e.aprEnd);return"Report_".concat(So(t),"_").concat(So(a),".pdf")},xo=function(){var e=function(){var e=Object(h.a)(m.a.mark((function e(a){var n,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(ie({uuid:a.uuid,start:a.aprStart,end:a.aprEnd}));case 2:n=e.sent,r=window.URL.createObjectURL(new Blob([n.data],{type:"application/octet-stream"})),(o=document.createElement("a")).href=r,o.setAttribute("download","".concat(Do(a))),document.body.appendChild(o),o.click();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=Object(c.c)(),a=Object(n.useState)(!1),o=Object(Ct.a)(a,2),i=o[0],l=o[1],s=Object(n.useState)("Download Report"),u=Object(Ct.a)(s,2),d=u[0],p=u[1];return r.a.createElement("div",{className:"downloadCenterContent"},r.a.createElement(Mr.a,null,r.a.createElement(Ga,{setControlValues:ko,onSubmit:function(t){console.log("onSubmitDownloadReport",t),l(!0),p("Fetching Exec Summaries"),mr("https://0kwuefbg37.execute-api.ap-south-1.amazonaws.com/Initial/execsummary").catch((function(e){l(!1),p("Download Report")})).then(function(){var a=Object(h.a)(m.a.mark((function a(n){var r,o;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:0===(r=gr(n,t)).length&&ta("Did not find matching Executive Summary Record",$t,"Please try another Analysis Period"),o=0;case 3:if(!(o<r.length)){a.next=10;break}return p("Downloading Report ".concat(o+1," of ").concat(r.length)),a.next=7,e(r[o]);case 7:o++,a.next=3;break;case 10:l(!1),p("Download Report");case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}},r.a.createElement("div",{className:"segmentTitle"},"Request PDF Report"),r.a.createElement(_a.a,{tag:!0,size:"large",color:"brown"},"Step 1:\xa0\xa0\xa0Enter the Analysis Period"),r.a.createElement("div",{className:"downloadCenterFieldContainer"},r.a.createElement(wa,{alwaysCustomRange:!0,key:"downloadCentreAnalysisPeriod",name:"analysisPeriod",label:null,showMonthYearPicker:!0,dateFormat:"yyyy / MMM"})),r.a.createElement(_a.a,{tag:!0,size:"large",color:"brown"},"Step 2:\xa0\xa0\xa0Select the APR Download Type"),r.a.createElement("div",{className:"downloadCenterFieldContainer"},r.a.createElement("div",null),r.a.createElement(ba,{key:"downloadCenterPdfOptions",name:"downloadCenterPdfOptions",label:"",options:Oo,size:"small"})),r.a.createElement(_a.a,{tag:!0,size:"large",color:"brown"},"Step 3:\xa0\xa0\xa0Download Report"),r.a.createElement("div",{className:"downloadCenterFieldContainer"},r.a.createElement("div",null),r.a.createElement(Ha.a,{primary:!0,disabled:i},d)))))},wo=a(1251),To=(a(1224),[15,85]),jo={left:[{key:"datadesignertb_save",icon:"save",text:"Save",type:"submit"},{key:"datadesignertb_saveas",icon:"save outline",text:"Save As",type:"submit"}]},No=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?t.map((function(t){var n=t.name,r=t.items,o=Object(k.a)(t,["name","items"]);return Object(d.a)({name:a?"".concat(a.name,".").concat(n):n,value:a?"".concat(a.name,".").concat(n):n,title:n,children:e(r,t)},o)})):null},Po=function(e){var t=No(e.Dimensions),a=e.RequestParams.map((function(e){var t=e.name,a=Object(k.a)(e,["name"]);return Object(d.a)({name:t,value:t,title:t,children:[]},a)}));return t.unshift.apply(t,Object(u.a)(a)),t},Ao=function(e,t,a){},Io=function(e,t){return r.a.createElement(Mr.a,null,r.a.createElement(sa.a.Field,null,r.a.createElement("div",{className:"segmentTitle"},"Filters:"),function(e,t){if(!e||!e.filterFields)return null;var a=e.filterFields.map((function(e,a){return r.a.createElement("div",{className:"filterRow",key:"filterField"+a},r.a.createElement(sa.a.Field,{className:"filterField"},r.a.createElement(Ya,{name:"filterField"+a,treeData:t.filtersMetadata,isRequired:!1,label:"Field Name"})),r.a.createElement(sa.a.Field,{className:"filterField"},r.a.createElement(ya,{label:"Filter Value",small:!0})),r.a.createElement(sa.a.Field,{className:"filterFieldAligner"},r.a.createElement(Ha.a,{type:"button",className:"filterFieldBtn"},"Delete")))}));return r.a.createElement("div",{className:"filterTable"},a)}(e,t),r.a.createElement(Ha.a,{type:"button"},"Add Filter")))},Fo=function(e,t,a,n){return r.a.createElement(Ga,{className:"hierConfigPanelContainer",key:"formDataDesigner",onSubmit:function(e){},setControlValues:Lo,watchedField:[],inputObj:null,setStateCb:n},r.a.createElement(br,{containerWidth:t,menuItems:jo}),function(e,t,a){x(e.hierarchyConso,t.hierarchyTree);var n="eye",o="Preview Data";return t.fetchingPreview&&(o="Fetching Preview Data...",n="hourglass half"),r.a.createElement("div",{className:"dataDesignerPanelContainer"},r.a.createElement(Mr.a,null,r.a.createElement("div",{className:"segmentTitle"},"Analysis Period Test"),r.a.createElement(wa,{name:"AnalysisPeriod"})),r.a.createElement(Mr.a,null,r.a.createElement("div",{className:"segmentTitle"},"Data Source"),r.a.createElement(ba,{name:"dataSource",isRequired:!1,onSelect:Ao,options:[]})),r.a.createElement(Mr.a,null,r.a.createElement("div",{className:"segmentTitle"},"Metadata Name"),r.a.createElement(ba,{name:"metadataName",isRequired:!1,onSelect:Ao,options:[]})),r.a.createElement(Mr.a,null,r.a.createElement("div",{className:"segmentTitle"},"Dimensions"),r.a.createElement(Ya,{name:"hierarchyTree",treeData:No(e.metadata.Dimensions),isRequired:!1,multiple:!0,onSelect:Ao})),Io(t,e),r.a.createElement(Mr.a,null,r.a.createElement("div",{className:"segmentTitle"},"Other Settings"),r.a.createElement(Ya,{label:"Sort:",name:"hierarchyTreeSort",treeData:No(e.metadata.Dimensions),isRequired:!1,multiple:!0,onSelect:Ao}),r.a.createElement(ya,{label:"Size",name:"datasetSize",small:!0})),t.formInvalid&&r.a.createElement("div",null,r.a.createElement(_a.a,{basic:!0,color:"red",pointing:!0},t.formInvalid)),r.a.createElement(Ha.a,{id:"dataDsgnPreview",primary:!0,disabled:t.fetchingPreview},r.a.createElement(Lr.a,{name:n}),o),void 0)}(e,a))},Lo=function(e,t){},Ro=function(e){function t(e){var a;return Object(Ze.a)(this,t),(a=Object(et.a)(this,Object(tt.a)(t).call(this,e))).state=Object(d.a)({hierarchyTree:null,HierarchyScope:"self",hierDsgnKpiGroup:[],fetchingPreview:!1,formInvalid:null,filterFields:[{name:"",value:null},{name:"",value:null},{name:"",value:null}]},a.state),a}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"render",value:function(){return console.log("render DataDesignerContainer",this.props.metadata),r.a.createElement(gt,{id:"hierarchyDesigner",onDragEnd:this.onSplitDragEnd,defaultSize:To,minSize:230},r.a.createElement("div",null,"Data List Panel (Under Construction)"),Fo(this.props,this.state.rightPixels,this.state,this.setState.bind(this)))}}]),t}(yt);Object(c.b)((function(e){return{hierarchyConso:e.dataDesigner.hierarchyConso,dimensions:e.dataDesigner.dimensions,hierarchyKpi:e.dataDesigner.hierarchyKpi,metadata:e.designer.metadata,dimensionsMetadata:No(e.designer.metadata.Dimensions),filtersMetadata:Po(e.designer.metadata)}}),(function(e){return Object(l.b)({},e)}))(Ro),a(1225),a(1226);var Mo={Apple:["iMac","iPhone","Macbook","iPad"],Samsung:["Galaxy S","Galaxy Note","Galaxy Tab"],Huawei:["P30","Mate30"]},Vo={iMac:"Computer",iPhone:"Phone",Macbook:"Computer",iPad:"Tablet","Galaxy S":"Phone","Galaxy Note":"Phone","Galaxy Tab":"Tablet",P30:"Phone",Mate30:"Phone"},zo=["Brand new","Used"],Ho=function(){var e=[];for(var t in Mo)for(var a=Mo[t],n=0;n<a.length;n++)for(var r=a[n],o=0;o<10;o++)e.push({deviceId:"".concat(t,"-").concat(r,"-").concat(o),vendor:t,model:r,itemCond:zo[o%zo.length],category:Vo[r]});return e},Wo=function(e,t){return C.a.pick(e,t)},Bo=function(e,t){return e.dimension((function(e){var a=Wo(e,t);return JSON.stringify(a)}))},Go=[{key:"vendor",value:"vendor",title:"Vendor",children:[{key:"model",value:"model",title:"Model"}]}],_o=[{key:"vendor",value:"vendor",title:"Vendor",children:[{key:"category",value:"category",title:"Category"}]}],Uo=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return null;for(var n=0;n<t.length;n++){var r=t[n];r.parent=a,e(r.children,r)}return t},Ko=(r.a.Component,[{menuItem:"MapViewContent",pane:r.a.createElement(wo.a.Pane,{key:"mapView",style:{height:"100%",width:"100%",padding:"0px"}},r.a.createElement(bo,{hierarchyPropName:"displayAsMapView"}))},{menuItem:"AnalysisViewContent",pane:r.a.createElement(wo.a.Pane,{key:"analysisView",style:{height:"100%",width:"100%",padding:"0px"}},r.a.createElement(bo,{hierarchyPropName:"displayAsAnalysisView"}))},{menuItem:"Home",pane:r.a.createElement(wo.a.Pane,{key:"home",style:{height:"100%",width:"100%",padding:"0px"}},r.a.createElement(wr,{defaultSizes:[15,85]}))},{menuItem:"DownloadCenterContent",pane:r.a.createElement(wo.a.Pane,{key:"downloadCenter",style:{height:"100%",width:"100%",padding:"0px"}},r.a.createElement(xo,null))},{menuItem:"formsDesigner",pane:r.a.createElement(wo.a.Pane,{key:"formsDesigner",style:{height:"100%",width:"100%",padding:"0px"}},r.a.createElement(mo,{defaultSizes:[25,75]}))},{menuItem:"HierarchyDesigner",pane:r.a.createElement(wo.a.Pane,{key:"hierarchyDesigner",style:{height:"100%",width:"100%",padding:"0px"}},r.a.createElement(vo,null))},{menuItem:"affiliate",pane:r.a.createElement(wo.a.Pane,{key:"affiliate",style:{height:"100%",width:"100%",padding:"0px"}},r.a.createElement(or,null))},{menuItem:"Settings",pane:r.a.createElement(wo.a.Pane,{key:"settings",style:{height:"100%",width:"100%",padding:"0px"}},r.a.createElement(zr,null))}]);var qo=Object(c.b)((function(e){return{mainAppState:e.mainApp}}))((function(e){return r.a.createElement("div",{id:"mainContent"},r.a.createElement(wo.a,{id:"mainTab",panes:Ko,renderActiveOnly:!1,style:{height:"100%"},activeIndex:e.mainAppState.tabIndex}))})),Jo=a(657),Yo=a(435),Xo=a(1246),$o=(a(1227),Object(c.b)((function(e){var t=e.mainApp.masterHierarchyViews,a=t&&t[0];return{layout:e.reportApp.layout,layoutData:e.reportApp.layoutData,metadata:e.mainApp.masterMetadata,hierarchyView:a,masterLayouts:e.mainApp.masterLayouts}}))((function(e){e.layoutData,e.layout;var t=e.metadata,a=e.hierarchyView,n=e.masterLayouts,o=function e(t){if(!Array.isArray(t)||!Array.isArray(c))return null;for(var a=[],r=function(r){var o=t[r],i=c.find((function(e){return e.key===o.key}));if(i&&!0===i.displayReport){var s=function(e,t){if(!e)return null;if(!1===e.inherit)return e.pageAssoc;var a=x(l,t.key);return a&&a.item?Or(a.item,c):null}(i,o),u=n.find((function(e){return e.name===s}));if(u){var d=u.layoutJson&&JSON.parse(u.layoutJson),p=u.pageApiData&&JSON.parse(u.pageApiData);a.push({layoutName:s,controls:d,pageApiData:p}),console.log("[extractLayouts] Adding: ",s)}}var m=e(o.children);Array.isArray(m)&&m.length>0&&(a=a.concat(m))},o=0;o<t.length;o++)r(o);return a},i=function(e,t,a){for(var n={lastNonEmptyRow:0,adjustedControls:[]},r=0;r<e.length;r++){var o=e[r],i=o.y+t,l=i+o.h;n.adjustedControls.push(Object(d.a)({},o,{y:i,layoutName:a})),l>n.lastNonEmptyRow&&(n.lastNonEmptyRow=l)}return n},l=a&&JSON.parse(a.hierarchyJson),c=a&&JSON.parse(a.nodeSettingsJson),s=l&&0!==l.length?function(e){if(!Array.isArray(e))return[];for(var t={controls:[],lastNonEmptyRow:0,apiDataMap:{}},a=0,n=0;n<e.length;n++){var r=e[n].layoutName,o=e[n].controls,l=e[n].pageApiData;l&&(t.apiDataMap[r]=l);var c=i(o,a,r);console.log("[mergeLayoutControls], layout: ",r,"last empty row",c.lastNonEmptyRow,"currRowOffset:",a),c.adjustedControls.push({i:"ctrl-pagebreak-report"+be(),x:0,y:c.lastNonEmptyRow+1,w:12,h:1,ctrlType:"pagebreak",data:{}}),a=c.lastNonEmptyRow+2,t.controls=t.controls.concat(c.adjustedControls)}return t.lastNonEmptyRow=a,t}(o(l)):[],u={columns:12,rows:s.lastNonEmptyRow+1,pageApiData:function(e){if(!e)return null;var t=Object.values(e);return t&&t.length>0?t[0]:null}(s.apiDataMap)},p=function(){var e,t=new URL(document.URL).searchParams,a=t.get("start"),n=t.get("end"),r=t.get("uuid"),o=[];return r&&o.push({name:"uuid",value:r}),a&&n&&o.push({name:"AnalysisPeriod",value:"CustomRange",startDate:(e=new Date(a),new Date(e.getFullYear(),e.getMonth(),1)),endDate:Ee(new Date(n))}),o}();return console.log("requestParams: ",p),r.a.createElement("div",{className:"ReportApp"},r.a.createElement(yr,{containerWidth:window.innerWidth,layoutData:u,controls:s.controls,metadata:t,pageFilters:p}))}))),Zo=function(e){function t(){return Object(Ze.a)(this,t),Object(et.a)(this,Object(tt.a)(t).apply(this,arguments))}return Object(at.a)(t,e),Object(Qe.a)(t,[{key:"componentDidMount",value:function(){console.log("[App][componentDidMount] fetch master data..."),this.props.fetchHierarchyViews(),this.props.fetchSavedLayouts(),this.props.fetchImages()}},{key:"render",value:function(){var e="ontouchstart"in document.documentElement;return console.log("[App] render(), touch?",e),console.log("URL Params",document.URL),document.URL.toLowerCase().includes("reporting")?r.a.createElement(Xo.a,{backend:Yo.a},r.a.createElement("div",{id:"reportApp"},r.a.createElement($o,null))):r.a.createElement(Xo.a,{backend:e?Jo.a:Yo.a},r.a.createElement("div",{id:"app",style:{height:"calc(100%)"}},r.a.createElement(qt.a,null),r.a.createElement(pt,null,r.a.createElement(qo,null))))}}]),t}(r.a.Component),Qo=Object(c.b)(null,{fetchHierarchy:function(){return function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[action] fetchHierarchy"),e.next=3,y.get("hierarchy");case 3:return a=e.sent,t({type:R,payload:a}),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},fetchSavedLayouts:function(){return function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[action] fetchSavedLayouts"),e.next=3,b.get("fetchSavedLayouts");case 3:a=e.sent,t({type:"FETCH_SAVEDLAYOUTS",payload:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},fetchHierarchyViews:Z,fetchHierarchyKpi:function(){return function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[action] fetchHierarchyKpi"),e.next=3,y.get("HierarchyKpi");case 3:a=e.sent,t({type:W,payload:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},fetchHierarchyConso:function(){return function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[action] fetchHierarchyConso"),e.next=3,y.get("hierarchy/conso");case 3:return a=e.sent,t({type:M,payload:a}),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},fetchDimensions:function(){return function(){var e=Object(h.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[action] fetchDimensions"),e.next=3,y.get("dimensions");case 3:a=e.sent,t({type:H,payload:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},fetchImages:Q})(Zo),ei=(a(1228),Object(l.d)($e,Object(l.a)(s.a)));i.a.render(r.a.createElement(c.a,{store:ei},r.a.createElement(Qo,null)),document.getElementById("root"))},286:function(e,t,a){},287:function(e,t,a){},362:function(e,t,a){},396:function(e,t,a){},488:function(e,t,a){},489:function(e,t,a){},504:function(e,t,a){},505:function(e,t,a){},545:function(e,t,a){},582:function(e,t,a){},593:function(e,t,a){},608:function(e,t,a){},688:function(e,t,a){e.exports=a(1229)},796:function(e,t,a){},836:function(e,t,a){},837:function(e,t,a){},930:function(e,t,a){},949:function(e,t,a){},950:function(e,t,a){},951:function(e,t,a){}},[[688,1,2]]]);
//# sourceMappingURL=main.7f66a30f.chunk.js.map